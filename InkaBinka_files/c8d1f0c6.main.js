/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/* Zepto v1.1.3 - zepto event ajax form ie - zeptojs.com/license */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: mark@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: david@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: felix@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

!function(){var t,i,e;!function(n){function s(t,i){return w.call(t,i)}function o(t,i){var e,n,s,o,r,a,h,u,l,c,p,d=i&&i.split("/"),f=y.map,m=f&&f["*"]||{};if(t&&"."===t.charAt(0))if(i){for(d=d.slice(0,d.length-1),t=t.split("/"),r=t.length-1,y.nodeIdCompat&&b.test(t[r])&&(t[r]=t[r].replace(b,"")),t=d.concat(t),l=0;l<t.length;l+=1)if(p=t[l],"."===p)t.splice(l,1),l-=1;else if(".."===p){if(1===l&&(".."===t[2]||".."===t[0]))break;l>0&&(t.splice(l-1,2),l-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((d||m)&&f){for(e=t.split("/"),l=e.length;l>0;l-=1){if(n=e.slice(0,l).join("/"),d)for(c=d.length;c>0;c-=1)if(s=f[d.slice(0,c).join("/")],s&&(s=s[n])){o=s,a=l;break}if(o)break;!h&&m&&m[n]&&(h=m[n],u=l)}!o&&h&&(o=h,a=u),o&&(e.splice(0,a,o),t=e.join("/"))}return t}function r(t,i){return function(){return d.apply(n,S.call(arguments,0).concat([t,i]))}}function a(t){return function(i){return o(i,t)}}function h(t){return function(i){g[t]=i}}function u(t){if(s(v,t)){var i=v[t];delete v[t],_[t]=!0,p.apply(n,i)}if(!s(g,t)&&!s(_,t))throw new Error("No "+t);return g[t]}function l(t){var i,e=t?t.indexOf("!"):-1;return e>-1&&(i=t.substring(0,e),t=t.substring(e+1,t.length)),[i,t]}function c(t){return function(){return y&&y.config&&y.config[t]||{}}}var p,d,f,m,g={},v={},y={},_={},w=Object.prototype.hasOwnProperty,S=[].slice,b=/\.js$/;f=function(t,i){var e,n=l(t),s=n[0];return t=n[1],s&&(s=o(s,i),e=u(s)),s?t=e&&e.normalize?e.normalize(t,a(i)):o(t,i):(t=o(t,i),n=l(t),s=n[0],t=n[1],s&&(e=u(s))),{f:s?s+"!"+t:t,n:t,pr:s,p:e}},m={require:function(t){return r(t)},exports:function(t){var i=g[t];return"undefined"!=typeof i?i:g[t]={}},module:function(t){return{id:t,uri:"",exports:g[t],config:c(t)}}},p=function(t,i,e,o){var a,l,c,p,d,y,w=[],S=typeof e;if(o=o||t,"undefined"===S||"function"===S){for(i=!i.length&&e.length?["require","exports","module"]:i,d=0;d<i.length;d+=1)if(p=f(i[d],o),l=p.f,"require"===l)w[d]=m.require(t);else if("exports"===l)w[d]=m.exports(t),y=!0;else if("module"===l)a=w[d]=m.module(t);else if(s(g,l)||s(v,l)||s(_,l))w[d]=u(l);else{if(!p.p)throw new Error(t+" missing "+l);p.p.load(p.n,r(o,!0),h(l),{}),w[d]=g[l]}c=e?e.apply(g[t],w):void 0,t&&(a&&a.exports!==n&&a.exports!==g[t]?g[t]=a.exports:c===n&&y||(g[t]=c))}else t&&(g[t]=e)},t=i=d=function(t,i,e,s,o){if("string"==typeof t)return m[t]?m[t](i):u(f(t,i).f);if(!t.splice){if(y=t,y.deps&&d(y.deps,y.callback),!i)return;i.splice?(t=i,i=e,e=null):t=n}return i=i||function(){},"function"==typeof e&&(e=s,s=o),s?p(n,t,i,e):setTimeout(function(){p(n,t,i,e)},4),d},d.config=function(t){return d(t)},t._defined=g,e=function(t,i,e){i.splice||(e=i,i=[]),s(g,t)||s(v,t)||(v[t]=[t,i,e])},e.amd={jQuery:!0}}(),e("almond",function(){});var n=function(){function t(t){return null==t?String(t):q[X.call(t)]||"object"}function i(i){return"function"==t(i)}function e(t){return null!=t&&t==t.window}function n(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function s(i){return"object"==t(i)}function o(t){return s(t)&&!e(t)&&Object.getPrototypeOf(t)==Object.prototype}function r(t){return"number"==typeof t.length}function a(t){return C.call(t,function(t){return null!=t})}function h(t){return t.length>0?x.fn.concat.apply([],t):t}function u(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function l(t){return t in A?A[t]:A[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function c(t,i){return"number"!=typeof i||H[u(t)]?i:i+"px"}function p(t){var i,e;return P[t]||(i=E.createElement(t),E.body.appendChild(i),e=getComputedStyle(i,"").getPropertyValue("display"),i.parentNode.removeChild(i),"none"==e&&(e="block"),P[t]=e),P[t]}function d(t){return"children"in t?O.call(t.children):x.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function f(t,i,e){for(b in i)e&&(o(i[b])||Q(i[b]))?(o(i[b])&&!o(t[b])&&(t[b]={}),Q(i[b])&&!Q(t[b])&&(t[b]=[]),f(t[b],i[b],e)):i[b]!==S&&(t[b]=i[b])}function m(t,i){return null==i?x(t):x(t).filter(i)}function g(t,e,n,s){return i(e)?e.call(t,n,s):e}function v(t,i,e){null==e?t.removeAttribute(i):t.setAttribute(i,e)}function y(t,i){var e=t.className,n=e&&e.baseVal!==S;return i===S?n?e.baseVal:e:void(n?e.baseVal=i:t.className=i)}function _(t){var i;try{return t?"true"==t||("false"==t?!1:"null"==t?null:/^0/.test(t)||isNaN(i=Number(t))?/^[\[\{]/.test(t)?x.parseJSON(t):t:i):t}catch(e){return t}}function w(t,i){i(t);for(var e in t.childNodes)w(t.childNodes[e],i)}var S,b,x,I,T,M,z=[],O=z.slice,C=z.filter,E=window.document,P={},A={},H={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},D=/^\s*<(\w+|!)[^>]*>/,k=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,N=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,F=/^(?:body|html)$/i,L=/([A-Z])/g,V=["val","css","html","text","data","width","height","offset"],R=["after","prepend","before","append"],U=E.createElement("table"),W=E.createElement("tr"),j={tr:E.createElement("tbody"),tbody:U,thead:U,tfoot:U,td:W,th:W,"*":E.createElement("div")},B=/complete|loaded|interactive/,G=/^[\w-]*$/,q={},X=q.toString,Y={},Z=E.createElement("div"),$={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},Q=Array.isArray||function(t){return t instanceof Array};return Y.matches=function(t,i){if(!i||!t||1!==t.nodeType)return!1;var e=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(e)return e.call(t,i);var n,s=t.parentNode,o=!s;return o&&(s=Z).appendChild(t),n=~Y.qsa(s,i).indexOf(t),o&&Z.removeChild(t),n},T=function(t){return t.replace(/-+(.)?/g,function(t,i){return i?i.toUpperCase():""})},M=function(t){return C.call(t,function(i,e){return t.indexOf(i)==e})},Y.fragment=function(t,i,e){var n,s,r;return k.test(t)&&(n=x(E.createElement(RegExp.$1))),n||(t.replace&&(t=t.replace(N,"<$1></$2>")),i===S&&(i=D.test(t)&&RegExp.$1),i in j||(i="*"),r=j[i],r.innerHTML=""+t,n=x.each(O.call(r.childNodes),function(){r.removeChild(this)})),o(e)&&(s=x(n),x.each(e,function(t,i){V.indexOf(t)>-1?s[t](i):s.attr(t,i)})),n},Y.Z=function(t,i){return t=t||[],t.__proto__=x.fn,t.selector=i||"",t},Y.isZ=function(t){return t instanceof Y.Z},Y.init=function(t,e){var n;if(!t)return Y.Z();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&D.test(t))n=Y.fragment(t,RegExp.$1,e),t=null;else{if(e!==S)return x(e).find(t);n=Y.qsa(E,t)}else{if(i(t))return x(E).ready(t);if(Y.isZ(t))return t;if(Q(t))n=a(t);else if(s(t))n=[t],t=null;else if(D.test(t))n=Y.fragment(t.trim(),RegExp.$1,e),t=null;else{if(e!==S)return x(e).find(t);n=Y.qsa(E,t)}}return Y.Z(n,t)},x=function(t,i){return Y.init(t,i)},x.extend=function(t){var i,e=O.call(arguments,1);return"boolean"==typeof t&&(i=t,t=e.shift()),e.forEach(function(e){f(t,e,i)}),t},Y.qsa=function(t,i){var e,s="#"==i[0],o=!s&&"."==i[0],r=s||o?i.slice(1):i,a=G.test(r);return n(t)&&a&&s?(e=t.getElementById(r))?[e]:[]:1!==t.nodeType&&9!==t.nodeType?[]:O.call(a&&!s?o?t.getElementsByClassName(r):t.getElementsByTagName(i):t.querySelectorAll(i))},x.contains=function(t,i){return t!==i&&t.contains(i)},x.type=t,x.isFunction=i,x.isWindow=e,x.isArray=Q,x.isPlainObject=o,x.isEmptyObject=function(t){var i;for(i in t)return!1;return!0},x.inArray=function(t,i,e){return z.indexOf.call(i,t,e)},x.camelCase=T,x.trim=function(t){return null==t?"":String.prototype.trim.call(t)},x.uuid=0,x.support={},x.expr={},x.map=function(t,i){var e,n,s,o=[];if(r(t))for(n=0;n<t.length;n++)e=i(t[n],n),null!=e&&o.push(e);else for(s in t)e=i(t[s],s),null!=e&&o.push(e);return h(o)},x.each=function(t,i){var e,n;if(r(t)){for(e=0;e<t.length;e++)if(i.call(t[e],e,t[e])===!1)return t}else for(n in t)if(i.call(t[n],n,t[n])===!1)return t;return t},x.grep=function(t,i){return C.call(t,i)},window.JSON&&(x.parseJSON=JSON.parse),x.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,i){q["[object "+i+"]"]=i.toLowerCase()}),x.fn={forEach:z.forEach,reduce:z.reduce,push:z.push,sort:z.sort,indexOf:z.indexOf,concat:z.concat,map:function(t){return x(x.map(this,function(i,e){return t.call(i,e,i)}))},slice:function(){return x(O.apply(this,arguments))},ready:function(t){return B.test(E.readyState)&&E.body?t(x):E.addEventListener("DOMContentLoaded",function(){t(x)},!1),this},get:function(t){return t===S?O.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return z.every.call(this,function(i,e){return t.call(i,e,i)!==!1}),this},filter:function(t){return i(t)?this.not(this.not(t)):x(C.call(this,function(i){return Y.matches(i,t)}))},add:function(t,i){return x(M(this.concat(x(t,i))))},is:function(t){return this.length>0&&Y.matches(this[0],t)},not:function(t){var e=[];if(i(t)&&t.call!==S)this.each(function(i){t.call(this,i)||e.push(this)});else{var n="string"==typeof t?this.filter(t):r(t)&&i(t.item)?O.call(t):x(t);this.forEach(function(t){n.indexOf(t)<0&&e.push(t)})}return x(e)},has:function(t){return this.filter(function(){return s(t)?x.contains(this,t):x(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!s(t)?t:x(t)},last:function(){var t=this[this.length-1];return t&&!s(t)?t:x(t)},find:function(t){var i,e=this;return i="object"==typeof t?x(t).filter(function(){var t=this;return z.some.call(e,function(i){return x.contains(i,t)})}):1==this.length?x(Y.qsa(this[0],t)):this.map(function(){return Y.qsa(this,t)})},closest:function(t,i){var e=this[0],s=!1;for("object"==typeof t&&(s=x(t));e&&!(s?s.indexOf(e)>=0:Y.matches(e,t));)e=e!==i&&!n(e)&&e.parentNode;return x(e)},parents:function(t){for(var i=[],e=this;e.length>0;)e=x.map(e,function(t){return(t=t.parentNode)&&!n(t)&&i.indexOf(t)<0?(i.push(t),t):void 0});return m(i,t)},parent:function(t){return m(M(this.pluck("parentNode")),t)},children:function(t){return m(this.map(function(){return d(this)}),t)},contents:function(){return this.map(function(){return O.call(this.childNodes)})},siblings:function(t){return m(this.map(function(t,i){return C.call(d(i.parentNode),function(t){return t!==i})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return x.map(this,function(i){return i[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=p(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var e=i(t);if(this[0]&&!e)var n=x(t).get(0),s=n.parentNode||this.length>1;return this.each(function(i){x(this).wrapAll(e?t.call(this,i):s?n.cloneNode(!0):n)})},wrapAll:function(t){if(this[0]){x(this[0]).before(t=x(t));for(var i;(i=t.children()).length;)t=i.first();x(t).append(this)}return this},wrapInner:function(t){var e=i(t);return this.each(function(i){var n=x(this),s=n.contents(),o=e?t.call(this,i):t;s.length?s.wrapAll(o):n.append(o)})},unwrap:function(){return this.parent().each(function(){x(this).replaceWith(x(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var i=x(this);(t===S?"none"==i.css("display"):t)?i.show():i.hide()})},prev:function(t){return x(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return x(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0===arguments.length?this.length>0?this[0].innerHTML:null:this.each(function(i){var e=this.innerHTML;x(this).empty().append(g(this,t,i,e))})},text:function(t){return 0===arguments.length?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=t===S?"":""+t})},attr:function(t,i){var e;return"string"==typeof t&&i===S?0==this.length||1!==this[0].nodeType?S:"value"==t&&"INPUT"==this[0].nodeName?this.val():!(e=this[0].getAttribute(t))&&t in this[0]?this[0][t]:e:this.each(function(e){if(1===this.nodeType)if(s(t))for(b in t)v(this,b,t[b]);else v(this,t,g(this,i,e,this.getAttribute(t)))})},removeAttr:function(t){return this.each(function(){1===this.nodeType&&v(this,t)})},prop:function(t,i){return t=$[t]||t,i===S?this[0]&&this[0][t]:this.each(function(e){this[t]=g(this,i,e,this[t])})},data:function(t,i){var e=this.attr("data-"+t.replace(L,"-$1").toLowerCase(),i);return null!==e?_(e):S},val:function(t){return 0===arguments.length?this[0]&&(this[0].multiple?x(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(i){this.value=g(this,t,i,this.value)})},offset:function(t){if(t)return this.each(function(i){var e=x(this),n=g(this,t,i,e.offset()),s=e.offsetParent().offset(),o={top:n.top-s.top,left:n.left-s.left};"static"==e.css("position")&&(o.position="relative"),e.css(o)});if(0==this.length)return null;var i=this[0].getBoundingClientRect();return{left:i.left+window.pageXOffset,top:i.top+window.pageYOffset,width:Math.round(i.width),height:Math.round(i.height)}},css:function(i,e){if(arguments.length<2){var n=this[0],s=getComputedStyle(n,"");if(!n)return;if("string"==typeof i)return n.style[T(i)]||s.getPropertyValue(i);if(Q(i)){var o={};return x.each(Q(i)?i:[i],function(t,i){o[i]=n.style[T(i)]||s.getPropertyValue(i)}),o}}var r="";if("string"==t(i))e||0===e?r=u(i)+":"+c(i,e):this.each(function(){this.style.removeProperty(u(i))});else for(b in i)i[b]||0===i[b]?r+=u(b)+":"+c(b,i[b])+";":this.each(function(){this.style.removeProperty(u(b))});return this.each(function(){this.style.cssText+=";"+r})},index:function(t){return t?this.indexOf(x(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return t?z.some.call(this,function(t){return this.test(y(t))},l(t)):!1},addClass:function(t){return t?this.each(function(i){I=[];var e=y(this),n=g(this,t,i,e);n.split(/\s+/g).forEach(function(t){x(this).hasClass(t)||I.push(t)},this),I.length&&y(this,e+(e?" ":"")+I.join(" "))}):this},removeClass:function(t){return this.each(function(i){return t===S?y(this,""):(I=y(this),g(this,t,i,I).split(/\s+/g).forEach(function(t){I=I.replace(l(t)," ")}),void y(this,I.trim()))})},toggleClass:function(t,i){return t?this.each(function(e){var n=x(this),s=g(this,t,e,y(this));s.split(/\s+/g).forEach(function(t){(i===S?!n.hasClass(t):i)?n.addClass(t):n.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var i="scrollTop"in this[0];return t===S?i?this[0].scrollTop:this[0].pageYOffset:this.each(i?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var i="scrollLeft"in this[0];return t===S?i?this[0].scrollLeft:this[0].pageXOffset:this.each(i?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],i=this.offsetParent(),e=this.offset(),n=F.test(i[0].nodeName)?{top:0,left:0}:i.offset();return e.top-=parseFloat(x(t).css("margin-top"))||0,e.left-=parseFloat(x(t).css("margin-left"))||0,n.top+=parseFloat(x(i[0]).css("border-top-width"))||0,n.left+=parseFloat(x(i[0]).css("border-left-width"))||0,{top:e.top-n.top,left:e.left-n.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||E.body;t&&!F.test(t.nodeName)&&"static"==x(t).css("position");)t=t.offsetParent;return t})}},x.fn.detach=x.fn.remove,["width","height"].forEach(function(t){var i=t.replace(/./,function(t){return t[0].toUpperCase()});x.fn[t]=function(s){var o,r=this[0];return s===S?e(r)?r["inner"+i]:n(r)?r.documentElement["scroll"+i]:(o=this.offset())&&o[t]:this.each(function(i){r=x(this),r.css(t,g(this,s,i,r[t]()))})}}),R.forEach(function(i,e){var n=e%2;x.fn[i]=function(){var i,s,o=x.map(arguments,function(e){return i=t(e),"object"==i||"array"==i||null==e?e:Y.fragment(e)}),r=this.length>1;return o.length<1?this:this.each(function(t,i){s=n?i:i.parentNode,i=0==e?i.nextSibling:1==e?i.firstChild:2==e?i:null,o.forEach(function(t){if(r)t=t.cloneNode(!0);else if(!s)return x(t).remove();w(s.insertBefore(t,i),function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||window.eval.call(window,t.innerHTML)})})})},x.fn[n?i+"To":"insert"+(e?"Before":"After")]=function(t){return x(t)[i](this),this}}),Y.Z.prototype=x.fn,Y.uniq=M,Y.deserializeValue=_,x.zepto=Y,x}();window.Zepto=n,void 0===window.$&&(window.$=n),function(t){function i(t){return t._zid||(t._zid=p++)}function e(t,e,o,r){if(e=n(e),e.ns)var a=s(e.ns);return(g[i(t)]||[]).filter(function(t){return!(!t||e.e&&t.e!=e.e||e.ns&&!a.test(t.ns)||o&&i(t.fn)!==i(o)||r&&t.sel!=r)})}function n(t){var i=(""+t).split(".");return{e:i[0],ns:i.slice(1).sort().join(" ")}}function s(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function o(t,i){return t.del&&!y&&t.e in _||!!i}function r(t){return w[t]||y&&_[t]||t}function a(e,s,a,h,l,p,d){var f=i(e),m=g[f]||(g[f]=[]);s.split(/\s/).forEach(function(i){if("ready"==i)return t(document).ready(a);var s=n(i);s.fn=a,s.sel=l,s.e in w&&(a=function(i){var e=i.relatedTarget;return!e||e!==this&&!t.contains(this,e)?s.fn.apply(this,arguments):void 0}),s.del=p;var f=p||a;s.proxy=function(t){if(t=u(t),!t.isImmediatePropagationStopped()){t.data=h;var i=f.apply(e,t._args==c?[t]:[t].concat(t._args));return i===!1&&(t.preventDefault(),t.stopPropagation()),i}},s.i=m.length,m.push(s),"addEventListener"in e&&e.addEventListener(r(s.e),s.proxy,o(s,d))})}function h(t,n,s,a,h){var u=i(t);(n||"").split(/\s/).forEach(function(i){e(t,i,s,a).forEach(function(i){delete g[u][i.i],"removeEventListener"in t&&t.removeEventListener(r(i.e),i.proxy,o(i,h))})})}function u(i,e){return(e||!i.isDefaultPrevented)&&(e||(e=i),t.each(I,function(t,n){var s=e[t];i[t]=function(){return this[n]=S,s&&s.apply(e,arguments)},i[n]=b}),(e.defaultPrevented!==c?e.defaultPrevented:"returnValue"in e?e.returnValue===!1:e.getPreventDefault&&e.getPreventDefault())&&(i.isDefaultPrevented=S)),i}function l(t){var i,e={originalEvent:t};for(i in t)x.test(i)||t[i]===c||(e[i]=t[i]);return u(e,t)}var c,p=1,d=Array.prototype.slice,f=t.isFunction,m=function(t){return"string"==typeof t},g={},v={},y="onfocusin"in window,_={focus:"focusin",blur:"focusout"},w={mouseenter:"mouseover",mouseleave:"mouseout"};v.click=v.mousedown=v.mouseup=v.mousemove="MouseEvents",t.event={add:a,remove:h},t.proxy=function(e,n){if(f(e)){var s=function(){return e.apply(n,arguments)};return s._zid=i(e),s}if(m(n))return t.proxy(e[n],e);throw new TypeError("expected function")},t.fn.bind=function(t,i,e){return this.on(t,i,e)},t.fn.unbind=function(t,i){return this.off(t,i)},t.fn.one=function(t,i,e,n){return this.on(t,i,e,n,1)};var S=function(){return!0},b=function(){return!1},x=/^([A-Z]|returnValue$|layer[XY]$)/,I={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(t,i,e){return this.on(i,t,e)},t.fn.undelegate=function(t,i,e){return this.off(i,t,e)},t.fn.live=function(i,e){return t(document.body).delegate(this.selector,i,e),this},t.fn.die=function(i,e){return t(document.body).undelegate(this.selector,i,e),this},t.fn.on=function(i,e,n,s,o){var r,u,p=this;return i&&!m(i)?(t.each(i,function(t,i){p.on(t,e,n,i,o)}),p):(m(e)||f(s)||s===!1||(s=n,n=e,e=c),(f(n)||n===!1)&&(s=n,n=c),s===!1&&(s=b),p.each(function(c,p){o&&(r=function(t){return h(p,t.type,s),s.apply(this,arguments)}),e&&(u=function(i){var n,o=t(i.target).closest(e,p).get(0);return o&&o!==p?(n=t.extend(l(i),{currentTarget:o,liveFired:p}),(r||s).apply(o,[n].concat(d.call(arguments,1)))):void 0}),a(p,i,s,n,e,u||r)}))},t.fn.off=function(i,e,n){var s=this;return i&&!m(i)?(t.each(i,function(t,i){s.off(t,e,i)}),s):(m(e)||f(n)||n===!1||(n=e,e=c),n===!1&&(n=b),s.each(function(){h(this,i,n,e)}))},t.fn.trigger=function(i,e){return i=m(i)||t.isPlainObject(i)?t.Event(i):u(i),i._args=e,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(i):t(this).triggerHandler(i,e)})},t.fn.triggerHandler=function(i,n){var s,o;return this.each(function(r,a){s=l(m(i)?t.Event(i):i),s._args=n,s.target=a,t.each(e(a,i.type||i),function(t,i){return o=i.proxy(s),s.isImmediatePropagationStopped()?!1:void 0})}),o},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(i){t.fn[i]=function(t){return t?this.bind(i,t):this.trigger(i)}}),["focus","blur"].forEach(function(i){t.fn[i]=function(t){return t?this.bind(i,t):this.each(function(){try{this[i]()}catch(t){}}),this}}),t.Event=function(t,i){m(t)||(i=t,t=i.type);var e=document.createEvent(v[t]||"Events"),n=!0;if(i)for(var s in i)"bubbles"==s?n=!!i[s]:e[s]=i[s];return e.initEvent(t,n,!0),u(e)}}(n),function(t){function i(i,e,n){var s=t.Event(e);return t(i).trigger(s,n),!s.isDefaultPrevented()}function e(t,e,n,s){return t.global?i(e||y,n,s):void 0}function n(i){i.global&&0===t.active++&&e(i,null,"ajaxStart")}function s(i){i.global&&!--t.active&&e(i,null,"ajaxStop")}function o(t,i){var n=i.context;return i.beforeSend.call(n,t,i)===!1||e(i,n,"ajaxBeforeSend",[t,i])===!1?!1:void e(i,n,"ajaxSend",[t,i])}function r(t,i,n,s){var o=n.context,r="success";n.success.call(o,t,r,i),s&&s.resolveWith(o,[t,r,i]),e(n,o,"ajaxSuccess",[i,n,t]),h(r,i,n)}function a(t,i,n,s,o){var r=s.context;s.error.call(r,n,i,t),o&&o.rejectWith(r,[n,i,t]),e(s,r,"ajaxError",[n,s,t||i]),h(i,n,s)}function h(t,i,n){var o=n.context;n.complete.call(o,i,t),e(n,o,"ajaxComplete",[i,n]),s(n)}function u(){}function l(t){return t&&(t=t.split(";",2)[0]),t&&(t==x?"html":t==b?"json":w.test(t)?"script":S.test(t)&&"xml")||"text"}function c(t,i){return""==i?t:(t+"&"+i).replace(/[&?]{1,2}/,"?")}function p(i){i.processData&&i.data&&"string"!=t.type(i.data)&&(i.data=t.param(i.data,i.traditional)),!i.data||i.type&&"GET"!=i.type.toUpperCase()||(i.url=c(i.url,i.data),i.data=void 0)}function d(i,e,n,s){return t.isFunction(e)&&(s=n,n=e,e=void 0),t.isFunction(n)||(s=n,n=void 0),{url:i,data:e,success:n,dataType:s}}function f(i,e,n,s){var o,r=t.isArray(e),a=t.isPlainObject(e);t.each(e,function(e,h){o=t.type(h),s&&(e=n?s:s+"["+(a||"object"==o||"array"==o?e:"")+"]"),!s&&r?i.add(h.name,h.value):"array"==o||!n&&"object"==o?f(i,h,n,e):i.add(e,h)})}var m,g,v=0,y=window.document,_=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,w=/^(?:text|application)\/javascript/i,S=/^(?:text|application)\/xml/i,b="application/json",x="text/html",I=/^\s*$/;t.active=0,t.ajaxJSONP=function(i,e){if(!("type"in i))return t.ajax(i);var n,s,h=i.jsonpCallback,u=(t.isFunction(h)?h():h)||"jsonp"+ ++v,l=y.createElement("script"),c=window[u],p=function(i){t(l).triggerHandler("error",i||"abort")},d={abort:p};return e&&e.promise(d),t(l).on("load error",function(o,h){clearTimeout(s),t(l).off().remove(),"error"!=o.type&&n?r(n[0],d,i,e):a(null,h||"error",d,i,e),window[u]=c,n&&t.isFunction(c)&&c(n[0]),c=n=void 0}),o(d,i)===!1?(p("abort"),d):(window[u]=function(){n=arguments},l.src=i.url.replace(/\?(.+)=\?/,"?$1="+u),y.head.appendChild(l),i.timeout>0&&(s=setTimeout(function(){p("timeout")},i.timeout)),d)},t.ajaxSettings={type:"GET",beforeSend:u,success:u,error:u,complete:u,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:b,xml:"application/xml, text/xml",html:x,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},t.ajax=function(i){var e=t.extend({},i||{}),s=t.Deferred&&t.Deferred();for(m in t.ajaxSettings)void 0===e[m]&&(e[m]=t.ajaxSettings[m]);n(e),e.crossDomain||(e.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(e.url)&&RegExp.$2!=window.location.host),e.url||(e.url=window.location.toString()),p(e),e.cache===!1&&(e.url=c(e.url,"_="+Date.now()));var h=e.dataType,d=/\?.+=\?/.test(e.url);if("jsonp"==h||d)return d||(e.url=c(e.url,e.jsonp?e.jsonp+"=?":e.jsonp===!1?"":"callback=?")),t.ajaxJSONP(e,s);var f,v=e.accepts[h],y={},_=function(t,i){y[t.toLowerCase()]=[t,i]},w=/^([\w-]+:)\/\//.test(e.url)?RegExp.$1:window.location.protocol,S=e.xhr(),b=S.setRequestHeader;if(s&&s.promise(S),e.crossDomain||_("X-Requested-With","XMLHttpRequest"),_("Accept",v||"*/*"),(v=e.mimeType||v)&&(v.indexOf(",")>-1&&(v=v.split(",",2)[0]),S.overrideMimeType&&S.overrideMimeType(v)),(e.contentType||e.contentType!==!1&&e.data&&"GET"!=e.type.toUpperCase())&&_("Content-Type",e.contentType||"application/x-www-form-urlencoded"),e.headers)for(g in e.headers)_(g,e.headers[g]);if(S.setRequestHeader=_,S.onreadystatechange=function(){if(4==S.readyState){S.onreadystatechange=u,clearTimeout(f);var i,n=!1;if(S.status>=200&&S.status<300||304==S.status||0==S.status&&"file:"==w){h=h||l(e.mimeType||S.getResponseHeader("content-type")),i=S.responseText;try{"script"==h?(1,eval)(i):"xml"==h?i=S.responseXML:"json"==h&&(i=I.test(i)?null:t.parseJSON(i))}catch(o){n=o}n?a(n,"parsererror",S,e,s):r(i,S,e,s)}else a(S.statusText||null,S.status?"error":"abort",S,e,s)}},o(S,e)===!1)return S.abort(),a(null,"abort",S,e,s),S;if(e.xhrFields)for(g in e.xhrFields)S[g]=e.xhrFields[g];var x="async"in e?e.async:!0;S.open(e.type,e.url,x,e.username,e.password);for(g in y)b.apply(S,y[g]);return e.timeout>0&&(f=setTimeout(function(){S.onreadystatechange=u,S.abort(),a(null,"timeout",S,e,s)},e.timeout)),S.send(e.data?e.data:null),S},t.get=function(){return t.ajax(d.apply(null,arguments))},t.post=function(){var i=d.apply(null,arguments);return i.type="POST",t.ajax(i)},t.getJSON=function(){var i=d.apply(null,arguments);return i.dataType="json",t.ajax(i)},t.fn.load=function(i,e,n){if(!this.length)return this;var s,o=this,r=i.split(/\s/),a=d(i,e,n),h=a.success;return r.length>1&&(a.url=r[0],s=r[1]),a.success=function(i){o.html(s?t("<div>").html(i.replace(_,"")).find(s):i),h&&h.apply(o,arguments)},t.ajax(a),this};var T=encodeURIComponent;t.param=function(t,i){var e=[];return e.add=function(t,i){this.push(T(t)+"="+T(i))},f(e,t,i),e.join("&").replace(/%20/g,"+")}}(n),function(t){t.fn.serializeArray=function(){var i,e=[];return t([].slice.call(this.get(0).elements)).each(function(){i=t(this);var n=i.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=n&&"reset"!=n&&"button"!=n&&("radio"!=n&&"checkbox"!=n||this.checked)&&e.push({name:i.attr("name"),value:i.val()})}),e},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(i){t.push(encodeURIComponent(i.name)+"="+encodeURIComponent(i.value))}),t.join("&")},t.fn.submit=function(i){if(i)this.bind("submit",i);else if(this.length){var e=t.Event("submit");this.eq(0).trigger(e),e.isDefaultPrevented()||this.get(0).submit()}return this}}(n),function(t){"__proto__"in{}||t.extend(t.zepto,{Z:function(i,e){return i=i||[],t.extend(i,t.fn),i.selector=e||"",i.__Z=!0,i},isZ:function(i){return"array"===t.type(i)&&"__Z"in i}});try{getComputedStyle(void 0)}catch(i){var e=getComputedStyle;window.getComputedStyle=function(t){try{return e(t)}catch(i){return null}}}}(n),e("zepto",function(){}),function(){function t(t){var e=!1;return function(){if(e)throw new Error("Callback was already called.");e=!0,t.apply(i,arguments)}}var i,n,s={};i=this,null!=i&&(n=i.async),s.noConflict=function(){return i.async=n,s};var o=Object.prototype.toString,r=Array.isArray||function(t){return"[object Array]"===o.call(t)},a=function(t,i){if(t.forEach)return t.forEach(i);for(var e=0;e<t.length;e+=1)i(t[e],e,t)},h=function(t,i){if(t.map)return t.map(i);var e=[];return a(t,function(t,n,s){e.push(i(t,n,s))}),e},u=function(t,i,e){return t.reduce?t.reduce(i,e):(a(t,function(t,n,s){e=i(e,t,n,s)}),e)},l=function(t){if(Object.keys)return Object.keys(t);var i=[];for(var e in t)t.hasOwnProperty(e)&&i.push(e);return i};"undefined"!=typeof process&&process.nextTick?(s.nextTick=process.nextTick,s.setImmediate="undefined"!=typeof setImmediate?function(t){setImmediate(t)}:s.nextTick):"function"==typeof setImmediate?(s.nextTick=function(t){setImmediate(t)},s.setImmediate=s.nextTick):(s.nextTick=function(t){setTimeout(t,0)},s.setImmediate=s.nextTick),s.each=function(i,e,n){function s(t){t?(n(t),n=function(){}):(o+=1,o>=i.length&&n())}if(n=n||function(){},!i.length)return n();var o=0;a(i,function(i){e(i,t(s))})},s.forEach=s.each,s.eachSeries=function(t,i,e){if(e=e||function(){},!t.length)return e();var n=0,s=function(){i(t[n],function(i){i?(e(i),e=function(){}):(n+=1,n>=t.length?e():s())})};s()},s.forEachSeries=s.eachSeries,s.eachLimit=function(t,i,e,n){var s=c(i);s.apply(null,[t,e,n])},s.forEachLimit=s.eachLimit;var c=function(t){return function(i,e,n){if(n=n||function(){},!i.length||0>=t)return n();var s=0,o=0,r=0;!function a(){if(s>=i.length)return n();for(;t>r&&o<i.length;)o+=1,r+=1,e(i[o-1],function(t){t?(n(t),n=function(){}):(s+=1,r-=1,s>=i.length?n():a())})}()}},p=function(t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,[s.each].concat(i))}},d=function(t,i){return function(){var e=Array.prototype.slice.call(arguments);return i.apply(null,[c(t)].concat(e))}},f=function(t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,[s.eachSeries].concat(i))}},m=function(t,i,e,n){var s=[];i=h(i,function(t,i){return{index:i,value:t}}),t(i,function(t,i){e(t.value,function(e,n){s[t.index]=n,i(e)})},function(t){n(t,s)})};s.map=p(m),s.mapSeries=f(m),s.mapLimit=function(t,i,e,n){return g(i)(t,e,n)};var g=function(t){return d(t,m)};s.reduce=function(t,i,e,n){s.eachSeries(t,function(t,n){e(i,t,function(t,e){i=e,n(t)})},function(t){n(t,i)})},s.inject=s.reduce,s.foldl=s.reduce,s.reduceRight=function(t,i,e,n){var o=h(t,function(t){return t}).reverse();s.reduce(o,i,e,n)},s.foldr=s.reduceRight;var v=function(t,i,e,n){var s=[];i=h(i,function(t,i){return{index:i,value:t}}),t(i,function(t,i){e(t.value,function(e){e&&s.push(t),i()})},function(){n(h(s.sort(function(t,i){return t.index-i.index}),function(t){return t.value}))})};s.filter=p(v),s.filterSeries=f(v),s.select=s.filter,s.selectSeries=s.filterSeries;var y=function(t,i,e,n){var s=[];i=h(i,function(t,i){return{index:i,value:t}}),t(i,function(t,i){e(t.value,function(e){e||s.push(t),i()})},function(){n(h(s.sort(function(t,i){return t.index-i.index}),function(t){return t.value}))})};s.reject=p(y),s.rejectSeries=f(y);var _=function(t,i,e,n){t(i,function(t,i){e(t,function(e){e?(n(t),n=function(){}):i()})},function(){n()})};s.detect=p(_),s.detectSeries=f(_),s.some=function(t,i,e){s.each(t,function(t,n){i(t,function(t){t&&(e(!0),e=function(){}),n()})},function(){e(!1)})},s.any=s.some,s.every=function(t,i,e){s.each(t,function(t,n){i(t,function(t){t||(e(!1),e=function(){}),n()})},function(){e(!0)})},s.all=s.every,s.sortBy=function(t,i,e){s.map(t,function(t,e){i(t,function(i,n){i?e(i):e(null,{value:t,criteria:n})})},function(t,i){if(t)return e(t);var n=function(t,i){var e=t.criteria,n=i.criteria;return n>e?-1:e>n?1:0};e(null,h(i.sort(n),function(t){return t.value}))})},s.auto=function(t,i){i=i||function(){};var e=l(t),n=e.length;if(!n)return i();var o={},h=[],c=function(t){h.unshift(t)},p=function(t){for(var i=0;i<h.length;i+=1)if(h[i]===t)return void h.splice(i,1)},d=function(){n--,a(h.slice(0),function(t){t()})};c(function(){if(!n){var t=i;i=function(){},t(null,o)}}),a(e,function(e){var n=r(t[e])?t[e]:[t[e]],h=function(t){var n=Array.prototype.slice.call(arguments,1);if(n.length<=1&&(n=n[0]),t){var r={};a(l(o),function(t){r[t]=o[t]}),r[e]=n,i(t,r),i=function(){}}else o[e]=n,s.setImmediate(d)},f=n.slice(0,Math.abs(n.length-1))||[],m=function(){return u(f,function(t,i){return t&&o.hasOwnProperty(i)},!0)&&!o.hasOwnProperty(e)};if(m())n[n.length-1](h,o);else{var g=function(){m()&&(p(g),n[n.length-1](h,o))};c(g)}})},s.retry=function(t,i,e){var n=5,o=[];"function"==typeof t&&(e=i,i=t,t=n),t=parseInt(t,10)||n;
var r=function(n,r){for(var a=function(t,i){return function(e){t(function(t,n){e(!t||i,{err:t,result:n})},r)}};t;)o.push(a(i,!(t-=1)));s.series(o,function(t,i){i=i[i.length-1],(n||e)(i.err,i.result)})};return e?r():r},s.waterfall=function(t,i){if(i=i||function(){},!r(t)){var e=new Error("First argument to waterfall must be an array of functions");return i(e)}if(!t.length)return i();var n=function(t){return function(e){if(e)i.apply(null,arguments),i=function(){};else{var o=Array.prototype.slice.call(arguments,1),r=t.next();o.push(r?n(r):i),s.setImmediate(function(){t.apply(null,o)})}}};n(s.iterator(t))()};var w=function(t,i,e){if(e=e||function(){},r(i))t.map(i,function(t,i){t&&t(function(t){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),i.call(null,t,e)})},e);else{var n={};t.each(l(i),function(t,e){i[t](function(i){var s=Array.prototype.slice.call(arguments,1);s.length<=1&&(s=s[0]),n[t]=s,e(i)})},function(t){e(t,n)})}};s.parallel=function(t,i){w({map:s.map,each:s.each},t,i)},s.parallelLimit=function(t,i,e){w({map:g(i),each:c(i)},t,e)},s.series=function(t,i){if(i=i||function(){},r(t))s.mapSeries(t,function(t,i){t&&t(function(t){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),i.call(null,t,e)})},i);else{var e={};s.eachSeries(l(t),function(i,n){t[i](function(t){var s=Array.prototype.slice.call(arguments,1);s.length<=1&&(s=s[0]),e[i]=s,n(t)})},function(t){i(t,e)})}},s.iterator=function(t){var i=function(e){var n=function(){return t.length&&t[e].apply(null,arguments),n.next()};return n.next=function(){return e<t.length-1?i(e+1):null},n};return i(0)},s.apply=function(t){var i=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,i.concat(Array.prototype.slice.call(arguments)))}};var S=function(t,i,e,n){var s=[];t(i,function(t,i){e(t,function(t,e){s=s.concat(e||[]),i(t)})},function(t){n(t,s)})};s.concat=p(S),s.concatSeries=f(S),s.whilst=function(t,i,e){t()?i(function(n){return n?e(n):void s.whilst(t,i,e)}):e()},s.doWhilst=function(t,i,e){t(function(n){if(n)return e(n);var o=Array.prototype.slice.call(arguments,1);i.apply(null,o)?s.doWhilst(t,i,e):e()})},s.until=function(t,i,e){t()?e():i(function(n){return n?e(n):void s.until(t,i,e)})},s.doUntil=function(t,i,e){t(function(n){if(n)return e(n);var o=Array.prototype.slice.call(arguments,1);i.apply(null,o)?e():s.doUntil(t,i,e)})},s.queue=function(i,e){function n(t,i,e,n){return t.started||(t.started=!0),r(i)||(i=[i]),0==i.length?s.setImmediate(function(){t.drain&&t.drain()}):void a(i,function(i){var o={data:i,callback:"function"==typeof n?n:null};e?t.tasks.unshift(o):t.tasks.push(o),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),s.setImmediate(t.process)})}void 0===e&&(e=1);var o=0,h={tasks:[],concurrency:e,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(t,i){n(h,t,!1,i)},kill:function(){h.drain=null,h.tasks=[]},unshift:function(t,i){n(h,t,!0,i)},process:function(){if(!h.paused&&o<h.concurrency&&h.tasks.length){var e=h.tasks.shift();h.empty&&0===h.tasks.length&&h.empty(),o+=1;var n=function(){o-=1,e.callback&&e.callback.apply(e,arguments),h.drain&&h.tasks.length+o===0&&h.drain(),h.process()},s=t(n);i(e.data,s)}},length:function(){return h.tasks.length},running:function(){return o},idle:function(){return h.tasks.length+o===0},pause:function(){h.paused!==!0&&(h.paused=!0,h.process())},resume:function(){h.paused!==!1&&(h.paused=!1,h.process())}};return h},s.cargo=function(t,i){var e=!1,n=[],o={tasks:n,payload:i,saturated:null,empty:null,drain:null,drained:!0,push:function(t,e){r(t)||(t=[t]),a(t,function(t){n.push({data:t,callback:"function"==typeof e?e:null}),o.drained=!1,o.saturated&&n.length===i&&o.saturated()}),s.setImmediate(o.process)},process:function u(){if(!e){if(0===n.length)return o.drain&&!o.drained&&o.drain(),void(o.drained=!0);var s="number"==typeof i?n.splice(0,i):n.splice(0,n.length),r=h(s,function(t){return t.data});o.empty&&o.empty(),e=!0,t(r,function(){e=!1;var t=arguments;a(s,function(i){i.callback&&i.callback.apply(null,t)}),u()})}},length:function(){return n.length},running:function(){return e}};return o};var b=function(t){return function(i){var e=Array.prototype.slice.call(arguments,1);i.apply(null,e.concat([function(i){var e=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(i?console.error&&console.error(i):console[t]&&a(e,function(i){console[t](i)}))}]))}};s.log=b("log"),s.dir=b("dir"),s.memoize=function(t,i){var e={},n={};i=i||function(t){return t};var o=function(){var o=Array.prototype.slice.call(arguments),r=o.pop(),a=i.apply(null,o);a in e?s.nextTick(function(){r.apply(null,e[a])}):a in n?n[a].push(r):(n[a]=[r],t.apply(null,o.concat([function(){e[a]=arguments;var t=n[a];delete n[a];for(var i=0,s=t.length;s>i;i++)t[i].apply(null,arguments)}])))};return o.memo=e,o.unmemoized=t,o},s.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},s.times=function(t,i,e){for(var n=[],o=0;t>o;o++)n.push(o);return s.map(n,i,e)},s.timesSeries=function(t,i,e){for(var n=[],o=0;t>o;o++)n.push(o);return s.mapSeries(n,i,e)},s.seq=function(){var t=arguments;return function(){var i=this,e=Array.prototype.slice.call(arguments),n=e.pop();s.reduce(t,e,function(t,e,n){e.apply(i,t.concat([function(){var t=arguments[0],i=Array.prototype.slice.call(arguments,1);n(t,i)}]))},function(t,e){n.apply(i,[t].concat(e))})}},s.compose=function(){return s.seq.apply(null,Array.prototype.reverse.call(arguments))};var x=function(t,i){var e=function(){var e=this,n=Array.prototype.slice.call(arguments),s=n.pop();return t(i,function(t,i){t.apply(e,n.concat([i]))},s)};if(arguments.length>2){var n=Array.prototype.slice.call(arguments,2);return e.apply(this,n)}return e};s.applyEach=p(x),s.applyEachSeries=f(x),s.forever=function(t,i){function e(n){if(n){if(i)return i(n);throw n}t(e)}e()},"undefined"!=typeof module&&module.exports?module.exports=s:"undefined"!=typeof e&&e.amd?e("async",[],function(){return s}):i.async=s}(),e("famous/core/Entity",["require","exports","module"],function(t,i,e){function n(t){return a[t]}function s(t,i){a[t]=i}function o(t){var i=a.length;return s(i,t),i}function r(t){s(t,null)}var a=[];e.exports={register:o,unregister:r,get:n,set:s}}),e("famous/core/Transform",["require","exports","module"],function(t,i,e){function n(t){return 2===t.length?t[0]*t[0]+t[1]*t[1]:t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}function s(t){return Math.sqrt(n(t))}function o(t){return 0>t?-1:1}var r={};r.precision=1e-6,r.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.multiply4x4=function(t,i){return[t[0]*i[0]+t[4]*i[1]+t[8]*i[2]+t[12]*i[3],t[1]*i[0]+t[5]*i[1]+t[9]*i[2]+t[13]*i[3],t[2]*i[0]+t[6]*i[1]+t[10]*i[2]+t[14]*i[3],t[3]*i[0]+t[7]*i[1]+t[11]*i[2]+t[15]*i[3],t[0]*i[4]+t[4]*i[5]+t[8]*i[6]+t[12]*i[7],t[1]*i[4]+t[5]*i[5]+t[9]*i[6]+t[13]*i[7],t[2]*i[4]+t[6]*i[5]+t[10]*i[6]+t[14]*i[7],t[3]*i[4]+t[7]*i[5]+t[11]*i[6]+t[15]*i[7],t[0]*i[8]+t[4]*i[9]+t[8]*i[10]+t[12]*i[11],t[1]*i[8]+t[5]*i[9]+t[9]*i[10]+t[13]*i[11],t[2]*i[8]+t[6]*i[9]+t[10]*i[10]+t[14]*i[11],t[3]*i[8]+t[7]*i[9]+t[11]*i[10]+t[15]*i[11],t[0]*i[12]+t[4]*i[13]+t[8]*i[14]+t[12]*i[15],t[1]*i[12]+t[5]*i[13]+t[9]*i[14]+t[13]*i[15],t[2]*i[12]+t[6]*i[13]+t[10]*i[14]+t[14]*i[15],t[3]*i[12]+t[7]*i[13]+t[11]*i[14]+t[15]*i[15]]},r.multiply=function(t,i){return[t[0]*i[0]+t[4]*i[1]+t[8]*i[2],t[1]*i[0]+t[5]*i[1]+t[9]*i[2],t[2]*i[0]+t[6]*i[1]+t[10]*i[2],0,t[0]*i[4]+t[4]*i[5]+t[8]*i[6],t[1]*i[4]+t[5]*i[5]+t[9]*i[6],t[2]*i[4]+t[6]*i[5]+t[10]*i[6],0,t[0]*i[8]+t[4]*i[9]+t[8]*i[10],t[1]*i[8]+t[5]*i[9]+t[9]*i[10],t[2]*i[8]+t[6]*i[9]+t[10]*i[10],0,t[0]*i[12]+t[4]*i[13]+t[8]*i[14]+t[12],t[1]*i[12]+t[5]*i[13]+t[9]*i[14]+t[13],t[2]*i[12]+t[6]*i[13]+t[10]*i[14]+t[14],1]},r.thenMove=function(t,i){return i[2]||(i[2]=0),[t[0],t[1],t[2],0,t[4],t[5],t[6],0,t[8],t[9],t[10],0,t[12]+i[0],t[13]+i[1],t[14]+i[2],1]},r.moveThen=function(t,i){t[2]||(t[2]=0);var e=t[0]*i[0]+t[1]*i[4]+t[2]*i[8],n=t[0]*i[1]+t[1]*i[5]+t[2]*i[9],s=t[0]*i[2]+t[1]*i[6]+t[2]*i[10];return r.thenMove(i,[e,n,s])},r.translate=function(t,i,e){return void 0===e&&(e=0),[1,0,0,0,0,1,0,0,0,0,1,0,t,i,e,1]},r.thenScale=function(t,i){return[i[0]*t[0],i[1]*t[1],i[2]*t[2],0,i[0]*t[4],i[1]*t[5],i[2]*t[6],0,i[0]*t[8],i[1]*t[9],i[2]*t[10],0,i[0]*t[12],i[1]*t[13],i[2]*t[14],1]},r.scale=function(t,i,e){return void 0===e&&(e=1),[t,0,0,0,0,i,0,0,0,0,e,0,0,0,0,1]},r.rotateX=function(t){var i=Math.cos(t),e=Math.sin(t);return[1,0,0,0,0,i,e,0,0,-e,i,0,0,0,0,1]},r.rotateY=function(t){var i=Math.cos(t),e=Math.sin(t);return[i,0,-e,0,0,1,0,0,e,0,i,0,0,0,0,1]},r.rotateZ=function(t){var i=Math.cos(t),e=Math.sin(t);return[i,e,0,0,-e,i,0,0,0,0,1,0,0,0,0,1]},r.rotate=function(t,i,e){var n=Math.cos(t),s=Math.sin(t),o=Math.cos(i),r=Math.sin(i),a=Math.cos(e),h=Math.sin(e),u=[o*a,n*h+s*r*a,s*h-n*r*a,0,-o*h,n*a-s*r*h,s*a+n*r*h,0,r,-s*o,n*o,0,0,0,0,1];return u},r.rotateAxis=function(t,i){var e=Math.sin(i),n=Math.cos(i),s=1-n,o=t[0]*t[0]*s,r=t[0]*t[1]*s,a=t[0]*t[2]*s,h=t[1]*t[1]*s,u=t[1]*t[2]*s,l=t[2]*t[2]*s,c=t[0]*e,p=t[1]*e,d=t[2]*e,f=[o+n,r+d,a-p,0,r-d,h+n,u+c,0,a+p,u-c,l+n,0,0,0,0,1];return f},r.aboutOrigin=function(t,i){var e=t[0]-(t[0]*i[0]+t[1]*i[4]+t[2]*i[8]),n=t[1]-(t[0]*i[1]+t[1]*i[5]+t[2]*i[9]),s=t[2]-(t[0]*i[2]+t[1]*i[6]+t[2]*i[10]);return r.thenMove(i,[e,n,s])},r.skew=function(t,i,e){return[1,0,0,0,Math.tan(e),1,0,0,Math.tan(i),Math.tan(t),1,0,0,0,0,1]},r.perspective=function(t){return[1,0,0,0,0,1,0,0,0,0,1,-1/t,0,0,0,1]},r.getTranslate=function(t){return[t[12],t[13],t[14]]},r.inverse=function(t){var i=t[5]*t[10]-t[6]*t[9],e=t[4]*t[10]-t[6]*t[8],n=t[4]*t[9]-t[5]*t[8],s=t[1]*t[10]-t[2]*t[9],o=t[0]*t[10]-t[2]*t[8],r=t[0]*t[9]-t[1]*t[8],a=t[1]*t[6]-t[2]*t[5],h=t[0]*t[6]-t[2]*t[4],u=t[0]*t[5]-t[1]*t[4],l=t[0]*i-t[1]*e+t[2]*n,c=1/l,p=[c*i,-c*s,c*a,0,-c*e,c*o,-c*h,0,c*n,-c*r,c*u,0,0,0,0,1];return p[12]=-t[12]*p[0]-t[13]*p[4]-t[14]*p[8],p[13]=-t[12]*p[1]-t[13]*p[5]-t[14]*p[9],p[14]=-t[12]*p[2]-t[13]*p[6]-t[14]*p[10],p},r.transpose=function(t){return[t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]]},r.interpret=function(t){var i=[t[0],t[1],t[2]],e=o(i[0]),a=s(i),h=[i[0]+e*a,i[1],i[2]],u=2/n(h);if(u>=1/0)return{translate:r.getTranslate(t),rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]};var l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];l[0]=1-u*h[0]*h[0],l[5]=1-u*h[1]*h[1],l[10]=1-u*h[2]*h[2],l[1]=-u*h[0]*h[1],l[2]=-u*h[0]*h[2],l[6]=-u*h[1]*h[2],l[4]=l[1],l[8]=l[2],l[9]=l[6];var c=r.multiply(l,t),p=[c[5],c[6]],d=o(p[0]),f=s(p),m=[p[0]+d*f,p[1]],g=2/n(m),v=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];v[5]=1-g*m[0]*m[0],v[10]=1-g*m[1]*m[1],v[6]=-g*m[0]*m[1],v[9]=v[6];var y=r.multiply(v,l),_=r.multiply(y,t),w=r.scale(_[0]<0?-1:1,_[5]<0?-1:1,_[10]<0?-1:1);_=r.multiply(_,w),y=r.multiply(w,y);var S={};return S.translate=r.getTranslate(t),S.rotate=[Math.atan2(-y[6],y[10]),Math.asin(y[2]),Math.atan2(-y[1],y[0])],S.rotate[0]||(S.rotate[0]=0,S.rotate[2]=Math.atan2(y[4],y[5])),S.scale=[_[0],_[5],_[10]],S.skew=[Math.atan2(_[9],S.scale[2]),Math.atan2(_[8],S.scale[2]),Math.atan2(_[4],S.scale[0])],Math.abs(S.rotate[0])+Math.abs(S.rotate[2])>1.5*Math.PI&&(S.rotate[1]=Math.PI-S.rotate[1],S.rotate[1]>Math.PI&&(S.rotate[1]-=2*Math.PI),S.rotate[1]<-Math.PI&&(S.rotate[1]+=2*Math.PI),S.rotate[0]<0?S.rotate[0]+=Math.PI:S.rotate[0]-=Math.PI,S.rotate[2]<0?S.rotate[2]+=Math.PI:S.rotate[2]-=Math.PI),S},r.average=function(t,i,e){e=void 0===e?.5:e;for(var n=r.interpret(t),s=r.interpret(i),o={translate:[0,0,0],rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]},a=0;3>a;a++)o.translate[a]=(1-e)*n.translate[a]+e*s.translate[a],o.rotate[a]=(1-e)*n.rotate[a]+e*s.rotate[a],o.scale[a]=(1-e)*n.scale[a]+e*s.scale[a],o.skew[a]=(1-e)*n.skew[a]+e*s.skew[a];return r.build(o)},r.build=function(t){var i=r.scale(t.scale[0],t.scale[1],t.scale[2]),e=r.skew(t.skew[0],t.skew[1],t.skew[2]),n=r.rotate(t.rotate[0],t.rotate[1],t.rotate[2]);return r.thenMove(r.multiply(r.multiply(n,e),i),t.translate)},r.equals=function(t,i){return!r.notEquals(t,i)},r.notEquals=function(t,i){return t===i?!1:t&&i?!(t&&i)||t[12]!==i[12]||t[13]!==i[13]||t[14]!==i[14]||t[0]!==i[0]||t[1]!==i[1]||t[2]!==i[2]||t[4]!==i[4]||t[5]!==i[5]||t[6]!==i[6]||t[8]!==i[8]||t[9]!==i[9]||t[10]!==i[10]:!0},r.normalizeRotation=function(t){var i=t.slice(0);for((i[0]===.5*Math.PI||i[0]===.5*-Math.PI)&&(i[0]=-i[0],i[1]=Math.PI-i[1],i[2]-=Math.PI),i[0]>.5*Math.PI&&(i[0]=i[0]-Math.PI,i[1]=Math.PI-i[1],i[2]-=Math.PI),i[0]<.5*-Math.PI&&(i[0]=i[0]+Math.PI,i[1]=-Math.PI-i[1],i[2]-=Math.PI);i[1]<-Math.PI;)i[1]+=2*Math.PI;for(;i[1]>=Math.PI;)i[1]-=2*Math.PI;for(;i[2]<-Math.PI;)i[2]+=2*Math.PI;for(;i[2]>=Math.PI;)i[2]-=2*Math.PI;return i},r.inFront=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,.001,1],r.behind=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,-.001,1],e.exports=r}),e("famous/core/SpecParser",["require","exports","module","./Transform"],function(t,i,e){function n(){this.result={}}function s(t,i){return[t[0]*i[0]+t[1]*i[4]+t[2]*i[8],t[0]*i[1]+t[1]*i[5]+t[2]*i[9],t[0]*i[2]+t[1]*i[6]+t[2]*i[10]]}var o=t("./Transform");n._instance=new n,n.parse=function(t,i){return n._instance.parse(t,i)},n.prototype.parse=function(t,i){return this.reset(),this._parseSpec(t,i,o.identity),this.result},n.prototype.reset=function(){this.result={}};var r=[0,0];n.prototype._parseSpec=function(t,i,e){var n,a,h,u,l,c;if("number"==typeof t){if(n=t,h=i.transform,i.size&&i.origin&&(i.origin[0]||i.origin[1])){var p=[i.origin[0]*i.size[0],i.origin[1]*i.size[1],0];h=o.thenMove(h,s(p,e))}this.result[n]={transform:h,opacity:i.opacity,origin:i.origin||r,size:i.size}}else{if(!t)return;if(t instanceof Array)for(var d=0;d<t.length;d++)this._parseSpec(t[d],i,e);else{a=t.target,h=i.transform,u=i.opacity,l=i.origin,c=i.size;var f=e;if(void 0!==t.opacity&&(u=i.opacity*t.opacity),t.transform&&(h=o.multiply(i.transform,t.transform)),t.origin&&(l=t.origin,f=i.transform),t.size){var m=i.size;c=[t.size[0]||m[0],t.size[1]||m[1]],m&&l&&(l[0]||l[1])&&(h=o.thenMove(h,s([l[0]*m[0],l[1]*m[1],0],e)),h=o.moveThen([-l[0]*c[0],-l[1]*c[1],0],h)),f=i.transform,l=null}this._parseSpec(a,{transform:h,opacity:u,origin:l,size:c},f)}}},e.exports=n}),e("famous/core/RenderNode",["require","exports","module","./Entity","./SpecParser"],function(t,i,e){function n(t){this._object=null,this._child=null,this._hasMultipleChildren=!1,this._isRenderable=!1,this._isModifier=!1,this._resultCache={},this._prevResults={},this._childResult=null,t&&this.set(t)}function s(t,i,e){for(var n=r.parse(t,i),a=Object.keys(n),h=0;h<a.length;h++){var u=a[h],l=o.get(u),c=n[u];c.allocator=i.allocator;var p=l.commit(c);p?s(p,i,e):e[u]=c}}var o=t("./Entity"),r=t("./SpecParser");n.prototype.add=function(t){var i=t instanceof n?t:new n(t);return this._child instanceof Array?this._child.push(i):this._child?(this._child=[this._child,i],this._hasMultipleChildren=!0,this._childResult=[]):this._child=i,i},n.prototype.get=function(){return this._object||(this._hasMultipleChildren?null:this._child?this._child.get():null)},n.prototype.set=function(t){return this._childResult=null,this._hasMultipleChildren=!1,this._isRenderable=t.render?!0:!1,this._isModifier=t.modify?!0:!1,this._object=t,this._child=null,t instanceof n?t:this},n.prototype.getSize=function(){var t=null,i=this.get();return i&&i.getSize&&(t=i.getSize()),!t&&this._child&&this._child.getSize&&(t=this._child.getSize()),t},n.prototype.commit=function(t){for(var i=Object.keys(this._prevResults),e=0;e<i.length;e++){var n=i[e];if(void 0===this._resultCache[n]){var r=o.get(n);r.cleanup&&r.cleanup(t.allocator)}}this._prevResults=this._resultCache,this._resultCache={},s(this.render(),t,this._resultCache)},n.prototype.render=function(){if(this._isRenderable)return this._object.render();var t=null;if(this._hasMultipleChildren){t=this._childResult;for(var i=this._child,e=0;e<i.length;e++)t[e]=i[e].render()}else this._child&&(t=this._child.render());return this._isModifier?this._object.modify(t):t},e.exports=n}),e("famous/core/EventEmitter",["require","exports","module"],function(t,i,e){function n(){this.listeners={},this._owner=this}n.prototype.emit=function(t,i){var e=this.listeners[t];if(e)for(var n=0;n<e.length;n++)e[n].call(this._owner,i);return this},n.prototype.on=function(t,i){t in this.listeners||(this.listeners[t]=[]);var e=this.listeners[t].indexOf(i);return 0>e&&this.listeners[t].push(i),this},n.prototype.addListener=n.prototype.on,n.prototype.removeListener=function(t,i){var e=this.listeners[t].indexOf(i);return e>=0&&this.listeners[t].splice(e,1),this},n.prototype.bindThis=function(t){this._owner=t},e.exports=n}),e("famous/core/EventHandler",["require","exports","module","./EventEmitter"],function(t,i,e){function n(){s.apply(this,arguments),this.downstream=[],this.downstreamFn=[],this.upstream=[],this.upstreamListeners={}}var s=t("./EventEmitter");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.setInputHandler=function(t,i){t.trigger=i.trigger.bind(i),i.subscribe&&i.unsubscribe&&(t.subscribe=i.subscribe.bind(i),t.unsubscribe=i.unsubscribe.bind(i))},n.setOutputHandler=function(t,i){i instanceof n&&i.bindThis(t),t.pipe=i.pipe.bind(i),t.unpipe=i.unpipe.bind(i),t.on=i.on.bind(i),t.addListener=i.on,t.removeListener=i.removeListener.bind(i)},n.prototype.emit=function(t,i){s.prototype.emit.apply(this,arguments);var e=0;for(e=0;e<this.downstream.length;e++)this.downstream[e].trigger(t,i);for(e=0;e<this.downstreamFn.length;e++)this.downstreamFn[e](t,i);return this},n.prototype.trigger=n.prototype.emit,n.prototype.pipe=function(t){if(t.subscribe instanceof Function)return t.subscribe(this);var i=t instanceof Function?this.downstreamFn:this.downstream,e=i.indexOf(t);return 0>e&&i.push(t),t instanceof Function?t("pipe",null):t.trigger&&t.trigger("pipe",null),t},n.prototype.unpipe=function(t){if(t.unsubscribe instanceof Function)return t.unsubscribe(this);var i=t instanceof Function?this.downstreamFn:this.downstream,e=i.indexOf(t);return e>=0?(i.splice(e,1),t instanceof Function?t("unpipe",null):t.trigger&&t.trigger("unpipe",null),t):!1},n.prototype.on=function(t){if(s.prototype.on.apply(this,arguments),!(t in this.upstreamListeners)){var i=this.trigger.bind(this,t);this.upstreamListeners[t]=i;for(var e=0;e<this.upstream.length;e++)this.upstream[e].on(t,i)}return this},n.prototype.addListener=n.prototype.on,n.prototype.subscribe=function(t){var i=this.upstream.indexOf(t);if(0>i){this.upstream.push(t);for(var e in this.upstreamListeners)t.on(e,this.upstreamListeners[e])}return this},n.prototype.unsubscribe=function(t){var i=this.upstream.indexOf(t);if(i>=0){this.upstream.splice(i,1);for(var e in this.upstreamListeners)t.removeListener(e,this.upstreamListeners[e])}return this},e.exports=n}),e("famous/core/ElementAllocator",["require","exports","module"],function(t,i,e){function n(t){t||(t=document.createDocumentFragment()),this.container=t,this.detachedNodes={},this.nodeCount=0}n.prototype.migrate=function(t){var i=this.container;if(t!==i){if(i instanceof DocumentFragment)t.appendChild(i);else for(;i.hasChildNodes();)t.appendChild(i.removeChild(i.firstChild));this.container=t}},n.prototype.allocate=function(t){t=t.toLowerCase(),t in this.detachedNodes||(this.detachedNodes[t]=[]);var i,e=this.detachedNodes[t];return e.length>0?i=e.pop():(i=document.createElement(t),this.container.appendChild(i)),this.nodeCount++,i},n.prototype.deallocate=function(t){var i=t.nodeName.toLowerCase(),e=this.detachedNodes[i];e.push(t),this.nodeCount--},n.prototype.getNodeCount=function(){return this.nodeCount},e.exports=n}),e("famous/utilities/Utility",["require","exports","module"],function(t,i,e){var n={};n.Direction={X:0,Y:1,Z:2},n.after=function(t,i){var e=t;return function(){e--,0===e&&i.apply(this,arguments)}},n.loadURL=function(t,i){var e=new XMLHttpRequest;e.onreadystatechange=function(){4===this.readyState&&i&&i(this.responseText)},e.open("GET",t),e.send()},n.createDocumentFragmentFromHTML=function(t){var i=document.createElement("div");i.innerHTML=t;for(var e=document.createDocumentFragment();i.hasChildNodes();)e.appendChild(i.firstChild);return e},e.exports=n}),e("famous/transitions/MultipleTransition",["require","exports","module","famous/utilities/Utility"],function(t,i,e){function n(t){this.method=t,this._instances=[],this.state=[]}var s=t("famous/utilities/Utility");n.SUPPORTS_MULTIPLE=!0,n.prototype.get=function(){for(var t=0;t<this._instances.length;t++)this.state[t]=this._instances[t].get();return this.state},n.prototype.set=function(t,i,e){for(var n=s.after(t.length,e),o=0;o<t.length;o++)this._instances[o]||(this._instances[o]=new this.method),this._instances[o].set(t[o],i,n)},n.prototype.reset=function(t){for(var i=0;i<t.length;i++)this._instances[i]||(this._instances[i]=new this.method),this._instances[i].reset(t[i])},e.exports=n}),e("famous/transitions/TweenTransition",["require","exports","module"],function(t,i,e){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),t&&this.setOptions(t),this._startTime=0,this._startValue=0,this._updateTime=0,this._endValue=0,this._curve=void 0,this._duration=0,this._active=!1,this._callback=void 0,this.state=0,this.velocity=void 0}function s(t,i,e){return(1-e)*t+e*i}function o(t){return t instanceof Object?t instanceof Array?t.slice(0):Object.create(t):t}function r(t,i){var e={curve:i.curve};return i.duration&&(e.duration=i.duration),i.speed&&(e.speed=i.speed),t instanceof Object&&(void 0!==t.duration&&(e.duration=t.duration),t.curve&&(e.curve=t.curve),t.speed&&(e.speed=t.speed)),"string"==typeof e.curve&&(e.curve=n.getCurve(e.curve)),e}function a(t,i,e,n,s){var o,r=1e-7,a=(e(s)-e(s-r))/r;if(t instanceof Array){o=[];for(var h=0;h<t.length;h++)o[h]=a*(t[h]-i[h])/n}else o=a*(t-i)/n;return o}function h(t,i,e){var n;if(t instanceof Array){n=[];for(var o=0;o<t.length;o++)n[o]=s(t[o],i[o],e)}else n=s(t,i,e);return n}n.Curves={linear:function(t){return t},easeIn:function(t){return t*t},easeOut:function(t){return t*(2-t)},easeInOut:function(t){return.5>=t?2*t*t:-2*t*t+4*t-1},easeOutBounce:function(t){return t*(3-2*t)},spring:function(t){return(1-t)*Math.sin(6*Math.PI*t)+t}},n.SUPPORTS_MULTIPLE=!0,n.DEFAULT_OPTIONS={curve:n.Curves.linear,duration:500,speed:0};var u={};n.registerCurve=function(t,i){return u[t]?!1:(u[t]=i,!0)},n.unregisterCurve=function(t){return u[t]?(delete u[t],!0):!1},n.getCurve=function(t){return u[t]},n.getCurves=function(){return u},n.prototype.setOptions=function(t){void 0!==t.curve&&(this.options.curve=t.curve),void 0!==t.duration&&(this.options.duration=t.duration),void 0!==t.speed&&(this.options.speed=t.speed)},n.prototype.set=function(t,i,e){if(!i)return this.reset(t),void(e&&e());if(this._startValue=o(this.get()),i=r(i,this.options),i.speed){var n=this._startValue;if(n instanceof Object){var s=0;for(var a in n)s+=(t[a]-n[a])*(t[a]-n[a]);i.duration=Math.sqrt(s)/i.speed}else i.duration=Math.abs(t-n)/i.speed}this._startTime=Date.now(),this._endValue=o(t),this._startVelocity=o(i.velocity),this._duration=i.duration,this._curve=i.curve,this._active=!0,this._callback=e},n.prototype.reset=function(t,i){if(this._callback){var e=this._callback;this._callback=void 0,e()}this.state=o(t),this.velocity=o(i),this._startTime=0,this._duration=0,this._updateTime=0,this._startValue=this.state,this._startVelocity=this.velocity,this._endValue=this.state,this._active=!1},n.prototype.getVelocity=function(){return this.velocity},n.prototype.get=function(t){return this.update(t),this.state},n.prototype.update=function(t){if(this._active){if(t||(t=Date.now()),!(this._updateTime>=t)){this._updateTime=t;var i=t-this._startTime;if(i>=this._duration)this.state=this._endValue,this.velocity=a(this.state,this._startValue,this._curve,this._duration,1),this._active=!1;else if(0>i)this.state=this._startValue,this.velocity=this._startVelocity;else{var e=i/this._duration;this.state=h(this._startValue,this._endValue,this._curve(e)),this.velocity=a(this.state,this._startValue,this._curve,this._duration,e)}}}else if(this._callback){var n=this._callback;this._callback=void 0,n()}},n.prototype.isActive=function(){return this._active},n.prototype.halt=function(){this.reset(this.get())},n.registerCurve("linear",n.Curves.linear),n.registerCurve("easeIn",n.Curves.easeIn),n.registerCurve("easeOut",n.Curves.easeOut),n.registerCurve("easeInOut",n.Curves.easeInOut),n.registerCurve("easeOutBounce",n.Curves.easeOutBounce),n.registerCurve("spring",n.Curves.spring),n.customCurve=function(t,i){return t=t||0,i=i||0,function(e){return t*e+(-2*t-i+3)*e*e+(t+i-2)*e*e*e}},e.exports=n}),e("famous/transitions/Transitionable",["require","exports","module","./MultipleTransition","./TweenTransition"],function(t,i,e){function n(t){this.currentAction=null,this.actionQueue=[],this.callbackQueue=[],this.state=0,this.velocity=void 0,this._callback=void 0,this._engineInstance=null,this._currentMethod=null,this.set(t)}function s(){if(this._callback){var t=this._callback;this._callback=void 0,t()}if(this.actionQueue.length<=0)return void this.set(this.get());this.currentAction=this.actionQueue.shift(),this._callback=this.callbackQueue.shift();var i=null,e=this.currentAction[0],n=this.currentAction[1];n instanceof Object&&n.method?(i=n.method,"string"==typeof i&&(i=a[i])):i=r,this._currentMethod!==i&&(this._engineInstance=!(e instanceof Object)||i.SUPPORTS_MULTIPLE===!0||e.length<=i.SUPPORTS_MULTIPLE?new i:new o(i),this._currentMethod=i),this._engineInstance.reset(this.state,this.velocity),void 0!==this.velocity&&(n.velocity=this.velocity),this._engineInstance.set(e,n,s.bind(this))}var o=t("./MultipleTransition"),r=t("./TweenTransition"),a={};n.registerMethod=function(t,i){return t in a?!1:(a[t]=i,!0)},n.unregisterMethod=function(t){return t in a?(delete a[t],!0):!1},n.prototype.set=function(t,i,e){if(!i)return this.reset(t),e&&e(),this;var n=[t,i];return this.actionQueue.push(n),this.callbackQueue.push(e),this.currentAction||s.call(this),this},n.prototype.reset=function(t,i){this._currentMethod=null,this._engineInstance=null,this.state=t,this.velocity=i,this.currentAction=null,this.actionQueue=[],this.callbackQueue=[]},n.prototype.delay=function(t,i){this.set(this._engineInstance.get(),{duration:t,curve:function(){return 0}},i)},n.prototype.get=function(t){return this._engineInstance&&(this._engineInstance.getVelocity&&(this.velocity=this._engineInstance.getVelocity()),this.state=this._engineInstance.get(t)),this.state},n.prototype.isActive=function(){return!!this.currentAction},n.prototype.halt=function(){this.set(this.get())},e.exports=n}),e("famous/core/Context",["require","exports","module","./RenderNode","./EventHandler","./ElementAllocator","./Transform","famous/transitions/Transitionable"],function(t,i,e){function n(t){return[t.clientWidth,t.clientHeight]}function s(t){this.container=t,this._allocator=new a(t),this._node=new o,this._eventOutput=new r,this._size=n(this.container),this._perspectiveState=new u(0),this._perspective=void 0,this._nodeContext={allocator:this._allocator,transform:h.identity,opacity:1,origin:l,size:this._size},this._eventOutput.on("resize",function(){this.setSize(n(this.container))}.bind(this))}var o=t("./RenderNode"),r=t("./EventHandler"),a=t("./ElementAllocator"),h=t("./Transform"),u=t("famous/transitions/Transitionable"),l=[0,0];s.prototype.getAllocator=function(){return this._allocator},s.prototype.add=function(t){return this._node.add(t)},s.prototype.migrate=function(t){t!==this.container&&(this.container=t,this._allocator.migrate(t))},s.prototype.getSize=function(){return this._size},s.prototype.setSize=function(t){t||(t=n(this.container)),this._size[0]=t[0],this._size[1]=t[1]},s.prototype.update=function(t){t&&(t.transform&&(this._nodeContext.transform=t.transform),t.opacity&&(this._nodeContext.opacity=t.opacity),t.origin&&(this._nodeContext.origin=t.origin),t.size&&(this._nodeContext.size=t.size));var i=this._perspectiveState.get();i!==this._perspective&&(this.container.style.perspective=i?i.toFixed()+"px":"",this.container.style.webkitPerspective=i?i.toFixed():"",this._perspective=i),this._node.commit(this._nodeContext)},s.prototype.getPerspective=function(){return this._perspectiveState.get()},s.prototype.setPerspective=function(t,i,e){return this._perspectiveState.set(t,i,e)},s.prototype.emit=function(t,i){return this._eventOutput.emit(t,i)},s.prototype.on=function(t,i){return this._eventOutput.on(t,i)},s.prototype.removeListener=function(t,i){return this._eventOutput.removeListener(t,i)},s.prototype.pipe=function(t){return this._eventOutput.pipe(t)},s.prototype.unpipe=function(t){return this._eventOutput.unpipe(t)},e.exports=s}),e("famous/core/OptionsManager",["require","exports","module","./EventHandler"],function(t,i,e){function n(t){this._value=t,this.eventOutput=null}function s(){this.eventOutput=new o,this.eventOutput.bindThis(this),o.setOutputHandler(this,this.eventOutput)}var o=t("./EventHandler");n.patch=function(t){for(var i=new n(t),e=1;e<arguments.length;e++)i.patch(arguments[e]);return t},n.prototype.patch=function(){for(var t=this._value,i=0;i<arguments.length;i++){var e=arguments[i];for(var n in e)n in t&&e[n]&&e[n].constructor===Object&&t[n]&&t[n].constructor===Object?(t.hasOwnProperty(n)||(t[n]=Object.create(t[n])),this.key(n).patch(e[n]),this.eventOutput&&this.eventOutput.emit("change",{id:n,value:this.key(n).value()})):this.set(n,e[n])}return this},n.prototype.setOptions=n.prototype.patch,n.prototype.key=function(t){var i=new n(this._value[t]);return(!(i._value instanceof Object)||i._value instanceof Array)&&(i._value={}),i},n.prototype.get=function(t){return this._value[t]},n.prototype.getOptions=n.prototype.get,n.prototype.set=function(t,i){var e=this.get(t);return this._value[t]=i,this.eventOutput&&i!==e&&this.eventOutput.emit("change",{id:t,value:i}),this},n.prototype.value=function(){return this._value},n.prototype.on=function(){return s.call(this),this.on.apply(this,arguments)},n.prototype.removeListener=function(){return s.call(this),this.removeListener.apply(this,arguments)},n.prototype.pipe=function(){return s.call(this),this.pipe.apply(this,arguments)},n.prototype.unpipe=function(){return s.call(this),this.unpipe.apply(this,arguments)},e.exports=n}),e("famous/core/Engine",["require","exports","module","./Context","./EventHandler","./OptionsManager"],function(t,i,e){function n(){y.runLoop?(l.step(),requestAnimationFrame(n)):m=!1}function s(t){if(document.activeElement&&"INPUT"===document.activeElement.nodeName)return void document.activeElement.addEventListener("blur",function e(){this.removeEventListener("blur",e),s(t)});window.scrollTo(0,0);for(var i=0;i<c.length;i++)c[i].emit("resize");v.emit("resize")}var o,r,a=t("./Context"),h=t("./EventHandler"),u=t("./OptionsManager"),l={},c=[],p=[],d=[],f=Date.now(),m=!0,g={},v=new h,y={containerType:"div",containerClass:"famous-container",fpsCap:void 0,runLoop:!0},_=new u(y),w=10;l.step=function(){var t=Date.now();if(!(r&&r>t-f)){var i=0;for(o=t-f,f=t,v.emit("prerender"),i=0;i<p.length;i++)p[i].call(this);for(p.splice(0);d.length&&Date.now()-t<w;)d.shift().call(this);for(i=0;i<c.length;i++)c[i].update();v.emit("postrender")}},requestAnimationFrame(n),window.addEventListener("resize",s,!1),s(),window.addEventListener("touchmove",function(t){t.preventDefault()},!0),l.pipe=function(t){return t.subscribe instanceof Function?t.subscribe(l):v.pipe(t)},l.unpipe=function(t){return t.unsubscribe instanceof Function?t.unsubscribe(l):v.unpipe(t)},l.on=function(t,i){return t in g||(g[t]=v.emit.bind(v,t),document.body.addEventListener(t,g[t])),v.on(t,i)},l.emit=function(t,i){return v.emit(t,i)},l.removeListener=function(t,i){return v.removeListener(t,i)},l.getFPS=function(){return 1e3/o},l.setFPSCap=function(t){r=Math.floor(1e3/t)},l.getOptions=function(){return _.getOptions.apply(_,arguments)},l.setOptions=function(){return _.setOptions.apply(_,arguments)},l.createContext=function(t){if(void 0===t)t=document.createElement(y.containerType),t.classList.add(y.containerClass),document.body.appendChild(t);else if(!(t instanceof Element))throw t=document.createElement(y.containerType),new Error("Tried to create context on non-existent element");var i=new a(t);
return l.registerContext(i),i},l.registerContext=function(t){return c.push(t),t},l.nextTick=function(t){p.push(t)},l.defer=function(t){d.push(t)},_.on("change",function(t){"fpsCap"===t.id?l.setFPSCap(t.value):"runLoop"===t.id&&!m&&t.value&&(m=!0,requestAnimationFrame(n))}),e.exports=l}),e("famous/transitions/TransitionableTransform",["require","exports","module","./Transitionable","famous/core/Transform","famous/utilities/Utility"],function(t,i,e){function n(t){this._final=r.identity.slice(),this.translate=new o([0,0,0]),this.rotate=new o([0,0,0]),this.skew=new o([0,0,0]),this.scale=new o([1,1,1]),t&&this.set(t)}function s(){return r.build({translate:this.translate.get(),rotate:this.rotate.get(),skew:this.skew.get(),scale:this.scale.get()})}var o=t("./Transitionable"),r=t("famous/core/Transform"),a=t("famous/utilities/Utility");n.prototype.setTranslate=function(t,i,e){return this.translate.set(t,i,e),this._final=this._final.slice(),this._final[12]=t[0],this._final[13]=t[1],void 0!==t[2]&&(this._final[14]=t[2]),this},n.prototype.setScale=function(t,i,e){return this.scale.set(t,i,e),this._final=this._final.slice(),this._final[0]=t[0],this._final[5]=t[1],void 0!==t[2]&&(this._final[10]=t[2]),this},n.prototype.setRotate=function(t,i,e){return this.rotate.set(t,i,e),this._final=s.call(this),this._final=r.build({translate:this.translate.get(),rotate:t,scale:this.scale.get(),skew:this.skew.get()}),this},n.prototype.setSkew=function(t,i,e){return this.skew.set(t,i,e),this._final=r.build({translate:this.translate.get(),rotate:this.rotate.get(),scale:this.scale.get(),skew:t}),this},n.prototype.set=function(t,i,e){this._final=t;var n=r.interpret(t),s=e?a.after(4,e):null;return this.translate.set(n.translate,i,s),this.rotate.set(n.rotate,i,s),this.skew.set(n.skew,i,s),this.scale.set(n.scale,i,s),this},n.prototype.setDefaultTransition=function(t){this.translate.setDefault(t),this.rotate.setDefault(t),this.skew.setDefault(t),this.scale.setDefault(t)},n.prototype.get=function(){return this.isActive()?s.call(this):this._final},n.prototype.getFinal=function(){return this._final},n.prototype.isActive=function(){return this.translate.isActive()||this.rotate.isActive()||this.scale.isActive()||this.skew.isActive()},n.prototype.halt=function(){this._final=this.get(),this.translate.halt(),this.rotate.halt(),this.skew.halt(),this.scale.halt()},e.exports=n}),e("famous/core/Modifier",["require","exports","module","./Transform","famous/transitions/Transitionable","famous/transitions/TransitionableTransform"],function(t,i,e){function n(t){this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._sizeGetter=null,this._legacyStates={},this._output={transform:o.identity,opacity:1,origin:null,size:null,target:null},t&&(t.transform&&this.transformFrom(t.transform),void 0!==t.opacity&&this.opacityFrom(t.opacity),t.origin&&this.originFrom(t.origin),t.size&&this.sizeFrom(t.size))}function s(){this._transformGetter&&(this._output.transform=this._transformGetter()),this._opacityGetter&&(this._output.opacity=this._opacityGetter()),this._originGetter&&(this._output.origin=this._originGetter()),this._sizeGetter&&(this._output.size=this._sizeGetter())}var o=t("./Transform"),r=t("famous/transitions/Transitionable"),a=t("famous/transitions/TransitionableTransform");n.prototype.transformFrom=function(t){return t instanceof Function?this._transformGetter=t:t instanceof Object&&t.get?this._transformGetter=t.get.bind(t):(this._transformGetter=null,this._output.transform=t),this},n.prototype.opacityFrom=function(t){return t instanceof Function?this._opacityGetter=t:t instanceof Object&&t.get?this._opacityGetter=t.get.bind(t):(this._opacityGetter=null,this._output.opacity=t),this},n.prototype.originFrom=function(t){return t instanceof Function?this._originGetter=t:t instanceof Object&&t.get?this._originGetter=t.get.bind(t):(this._originGetter=null,this._output.origin=t),this},n.prototype.sizeFrom=function(t){return t instanceof Function?this._sizeGetter=t:t instanceof Object&&t.get?this._sizeGetter=t.get.bind(t):(this._sizeGetter=null,this._output.size=t),this},n.prototype.setTransform=function(t,i,e){return i||this._legacyStates.transform?(this._legacyStates.transform||(this._legacyStates.transform=new a(this._output.transform)),this._transformGetter||this.transformFrom(this._legacyStates.transform),this._legacyStates.transform.set(t,i,e),this):this.transformFrom(t)},n.prototype.setOpacity=function(t,i,e){return i||this._legacyStates.opacity?(this._legacyStates.opacity||(this._legacyStates.opacity=new r(this._output.opacity)),this._opacityGetter||this.opacityFrom(this._legacyStates.opacity),this._legacyStates.opacity.set(t,i,e)):this.opacityFrom(t)},n.prototype.setOrigin=function(t,i,e){return i||this._legacyStates.origin?(this._legacyStates.origin||(this._legacyStates.origin=new r(this._output.origin||[0,0])),this._originGetter||this.originFrom(this._legacyStates.origin),this._legacyStates.origin.set(t,i,e),this):this.originFrom(t)},n.prototype.setSize=function(t,i,e){return t&&(i||this._legacyStates.size)?(this._legacyStates.size||(this._legacyStates.size=new r(this._output.size||[0,0])),this._sizeGetter||this.sizeFrom(this._legacyStates.size),this._legacyStates.size.set(t,i,e),this):this.sizeFrom(t)},n.prototype.halt=function(){this._legacyStates.transform&&this._legacyStates.transform.halt(),this._legacyStates.opacity&&this._legacyStates.opacity.halt(),this._legacyStates.origin&&this._legacyStates.origin.halt(),this._legacyStates.size&&this._legacyStates.size.halt(),this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._sizeGetter=null},n.prototype.getTransform=function(){return this._transformGetter()},n.prototype.getFinalTransform=function(){return this._legacyStates.transform?this._legacyStates.transform.getFinal():this._output.transform},n.prototype.getOpacity=function(){return this._opacityGetter()},n.prototype.getOrigin=function(){return this._originGetter()},n.prototype.getSize=function(){return this._sizeGetter?this._sizeGetter():this._output.size},n.prototype.modify=function(t){return s.call(this),this._output.target=t,this._output},e.exports=n}),e("famous/core/View",["require","exports","module","./EventHandler","./OptionsManager","./RenderNode"],function(t,i,e){function n(t){this._node=new r,this._eventInput=new s,this._eventOutput=new s,s.setInputHandler(this,this._eventInput),s.setOutputHandler(this,this._eventOutput),this.options=Object.create(this.constructor.DEFAULT_OPTIONS||n.DEFAULT_OPTIONS),this._optionsManager=new o(this.options),t&&this.setOptions(t)}var s=t("./EventHandler"),o=t("./OptionsManager"),r=t("./RenderNode");n.DEFAULT_OPTIONS={},n.prototype.getOptions=function(){return this._optionsManager.value()},n.prototype.setOptions=function(t){this._optionsManager.patch(t)},n.prototype.add=function(){return this._node.add.apply(this._node,arguments)},n.prototype._add=n.prototype.add,n.prototype.render=function(){return this._node.render()},n.prototype.getSize=function(){return this._node&&this._node.getSize?this._node.getSize.apply(this._node,arguments)||this.options.size:this.options.size},e.exports=n}),e("famous/views/RenderController",["require","exports","module","famous/core/Modifier","famous/core/RenderNode","famous/core/Transform","famous/transitions/Transitionable","famous/core/View"],function(t,i,e){function n(){u.apply(this,arguments),this._showing=-1,this._outgoingRenderables=[],this._nextRenderable=null,this._renderables=[],this._nodes=[],this._modifiers=[],this._states=[],this.inTransformMap=n.DefaultMap.transform,this.inOpacityMap=n.DefaultMap.opacity,this.inOriginMap=n.DefaultMap.origin,this.outTransformMap=n.DefaultMap.transform,this.outOpacityMap=n.DefaultMap.opacity,this.outOriginMap=n.DefaultMap.origin,this._output=[]}function s(t,i){return t(i.get())}var o=t("famous/core/Modifier"),r=t("famous/core/RenderNode"),a=t("famous/core/Transform"),h=t("famous/transitions/Transitionable"),u=t("famous/core/View");n.prototype=Object.create(u.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={inTransition:!0,outTransition:!0,overlap:!0},n.DefaultMap={transform:function(){return a.identity},opacity:function(t){return t},origin:null},n.prototype.inTransformFrom=function(t){if(t instanceof Function)this.inTransformMap=t;else{if(!t||!t.get)throw new Error("inTransformFrom takes only function or getter object");this.inTransformMap=t.get.bind(t)}return this},n.prototype.inOpacityFrom=function(t){if(t instanceof Function)this.inOpacityMap=t;else{if(!t||!t.get)throw new Error("inOpacityFrom takes only function or getter object");this.inOpacityMap=t.get.bind(t)}return this},n.prototype.inOriginFrom=function(t){if(t instanceof Function)this.inOriginMap=t;else{if(!t||!t.get)throw new Error("inOriginFrom takes only function or getter object");this.inOriginMap=t.get.bind(t)}return this},n.prototype.outTransformFrom=function(t){if(t instanceof Function)this.outTransformMap=t;else{if(!t||!t.get)throw new Error("inTransformFrom takes only function or getter object");this.outTransformMap=t.get.bind(t)}return this},n.prototype.outOpacityFrom=function(t){if(t instanceof Function)this.outOpacityMap=t;else{if(!t||!t.get)throw new Error("inOpacityFrom takes only function or getter object");this.outOpacityMap=t.get.bind(t)}return this},n.prototype.outOriginFrom=function(t){if(t instanceof Function)this.outOriginMap=t;else{if(!t||!t.get)throw new Error("inOriginFrom takes only function or getter object");this.outOriginMap=t.get.bind(t)}return this},n.prototype.show=function(t,i,e){if(!t)return this.hide(e);if(i instanceof Function&&(e=i,i=null),this._showing>=0){if(!this.options.overlap)return void(this._nextRenderable?this._nextRenderable=t:(this._nextRenderable=t,this.hide(function(){this._nextRenderable===t&&this.show(this._nextRenderable,e),this._nextRenderable=null})));this.hide(e)}var n=null,a=this._renderables.indexOf(t);if(a>=0){this._showing=a,n=this._states[a],n.halt();var u=this._outgoingRenderables.indexOf(t);u>=0&&this._outgoingRenderables.splice(u,1)}else{n=new h(0);var l=new o({transform:this.inTransformMap?s.bind(this,this.inTransformMap,n):null,opacity:this.inOpacityMap?s.bind(this,this.inOpacityMap,n):null,origin:this.inOriginMap?s.bind(this,this.inOriginMap,n):null}),c=new r;c.add(l).add(t),this._showing=this._nodes.length,this._nodes.push(c),this._modifiers.push(l),this._states.push(n),this._renderables.push(t)}i||(i=this.options.inTransition),n.set(1,i,e)},n.prototype.hide=function(t,i){if(!(this._showing<0)){var e=this._showing;this._showing=-1,t instanceof Function&&(i=t,t=void 0);var n=this._nodes[e],o=this._modifiers[e],r=this._states[e],a=this._renderables[e];o.transformFrom(this.outTransformMap?s.bind(this,this.outTransformMap,r):null),o.opacityFrom(this.outOpacityMap?s.bind(this,this.outOpacityMap,r):null),o.originFrom(this.outOriginMap?s.bind(this,this.outOriginMap,r):null),this._outgoingRenderables.indexOf(a)<0&&this._outgoingRenderables.push(a),t||(t=this.options.outTransition),r.halt(),r.set(0,t,function(t,e,n,s){if(this._outgoingRenderables.indexOf(s)>=0){var o=this._nodes.indexOf(t);this._nodes.splice(o,1),this._modifiers.splice(o,1),this._states.splice(o,1),this._renderables.splice(o,1),this._outgoingRenderables.splice(this._outgoingRenderables.indexOf(s),1),this._showing>=o&&this._showing--}i&&i.call(this)}.bind(this,n,o,r,a))}},n.prototype.render=function(){var t=this._output;t.length>this._nodes.length&&t.splice(this._nodes.length);for(var i=0;i<this._nodes.length;i++)t[i]=this._nodes[i].render();return t},e.exports=n}),e("famous/math/Utilities",["require","exports","module"],function(t,i,e){var n={};n.clamp=function(t,i){return Math.max(Math.min(t,i[1]),i[0])},n.length=function(t){for(var i=0,e=0;e<t.length;e++)i+=t[e]*t[e];return Math.sqrt(i)},e.exports=n}),e("utils/inkabinkaUtils",["require","exports","module","famous/core/Transform","famous/math/Utilities"],function(t,i,e){function n(t,i,e,n,s,o){var r=(t-i)/(e-i)*(s-n)+n;return o===!0&&(r=I.clamp(r,[n,s])),r}function s(){return Object.hasOwnProperty.call(window,"ActiveXObject")&&!window.ActiveXObject}function o(){return"Microsoft Internet Explorer"===navigator.appName||s()}function r(){var t=537;return a()>=t}function a(){var t=0,i=/AppleWebKit\/[\d,\.]+/i.exec(navigator.userAgent);if(null!=i)try{t=parseInt(i[0].split("/")[1].split(".")[0])}catch(e){t=0}return t}function h(){var t=10,i=navigator.userAgent.toLowerCase();return-1!==i.indexOf("msie")?parseInt(i.split("msie")[1])<t:!1}function u(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+t+"=([^&#]*)"),e=i.exec(location.search);return null==e?"":decodeURIComponent(e[1].replace(/\+/g," "))}function l(t,i,e){try{var n=new Date;n.setTime(n.getTime()+24*e*60*60*1e3);var s="expires="+n.toGMTString();document.cookie=t+"="+i+"; "+s}catch(o){}}function c(t){try{for(var i=t+"=",e=document.cookie.split(";"),n=0;n<e.length;n++){var s=e[n].trim();if(0===s.indexOf(i))return s.substring(i.length,s.length)}}catch(o){}return""}function p(){var t=c("previousLogin");return"true"===t}function d(t){return Math.round(t.getTransform()[12])}function f(t){return Math.round(t.getTransform()[13])}function m(t){return Math.round(t.getTransform()[14])}function g(t){var i=t.getTransform();return new x.scale(i[0],i[5],i[10])}function v(t,i,e,s,o,r,a,h,u){for(var l=t.length,c=2*l,p=n(e,292,760,a,h,!0),d=p*c,f=e-d,m=Math.floor(f/l),g="",v=null,w=0;l>w;w++)v=t[w],v.text.length>g.length&&(g=v.text);var S=y(i,m,g,s,o,r,u),b=[];f=0;for(var x=0;l>x;x++){v=t[x];var I=_(i,v.text,S,s,1e3,r,u);f+=I,b[x]=I}return d=e-f,p=Math.floor(d/c),{fontSize:S,bulletHeights:b,eachSpacerHeight:p}}function y(t,i,e,s,o,r,a){var h=0,u=2,l=s+h,c=l*r,p=document.createElement("div");p.style.width=t+"px",p.style.height=i+"px",p.style.overflow="hidden",p.style.padding="0px",p.style.position="absolute",p.className+=a,document.body.appendChild(p),p.innerHTML=e;for(var d=l;o>=d&&(p.style.fontSize=d+"px",c=d*r,p.style.lineHeight=c+"px",!(p.scrollHeight>p.clientHeight));d+=1){var f=Math.round(n(d,s,o,h,u,!0));l=d-f}return p.parentNode.removeChild(p),l}function _(t,i,e,s,o,r,a){var h=!1,u=0,l=20,c=s+u,p=e*r,d=document.createElement("div");d.style.width=t+"px",d.style.overflow="hidden",d.style.padding="0px",d.style.position="absolute",d.style.fontSize=e+"px",d.style.lineHeight=p+"px",d.className+=a,document.body.appendChild(d),d.innerHTML=i;for(var f=c;o>=f;f+=4)if(d.style.height=f+"px",d.scrollHeight<=d.clientHeight){var m=Math.round(n(f,s,o,u,l,!0));c=f+m,h=!0;break}return h===!1&&(c=s),d.parentNode.removeChild(d),c}function w(t,i,e,n){var s=!1,o=300,r=document.createElement("div");r.style.width=t+"px",r.style.overflow="hidden",r.style.padding="0px",r.style.position="absolute",document.body.appendChild(r),r.innerHTML=i;for(var a=o;n>=a;a+=32)if(r.style.height=a+"px",r.scrollHeight<=r.clientHeight){o=a,s=!0;break}return s===!1&&(o=0),r.parentNode.removeChild(r),o+=e}function S(){if(/iP(hone|od|ad)/.test(navigator.platform)){var t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3]||0,10)]}return null}function b(t){var i=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;return i.test(t)}var x=t("famous/core/Transform"),I=t("famous/math/Utilities");e.exports={isIE11:s,isIE:o,isUnsupportedIE:h,getParameterByName:u,setCookie:l,getCookie:c,hasPreviousLogin:p,getModifierX:d,getModifierY:f,getModifierZ:m,getModifierScaleTransform:g,getBulletSizing:v,getMaxFontSize:y,getDivHeight:_,getContentDivHeight:w,iOSversion:S,isValidWebKitVersion:r,map:n,isGuid:b}}),e("utils/auth",["require","exports","module"],function(t,i,e){function n(){return"undefined"!=typeof gigya&&"undefined"!=typeof gigya.socialize}function s(t,i){n()===!0&&gigya.socialize.addEventHandlers({onLogin:function(i){t(i)},onLogout:function(t){i(t)}})}function o(t){n()===!0?gigya.socialize.getUserInfo({callback:t}):t&&t()}function r(){"undefined"!=typeof gigya&&gigya.socialize.logout()}e.exports={isGigyaLoaded:n,authEventHandlers:s,getUserInfo:o,logout:r}}),e("famous/modifiers/StateModifier",["require","exports","module","famous/core/Modifier","famous/core/Transform","famous/transitions/Transitionable","famous/transitions/TransitionableTransform"],function(t,i,e){function n(t){this._transformState=new a(o.identity),this._opacityState=new r(1),this._originState=new r([0,0]),this._sizeState=new r([0,0]),this._modifier=new s({transform:this._transformState,opacity:this._opacityState,origin:null,size:null}),this._hasOrigin=!1,this._hasSize=!1,t&&(t.transform&&this.setTransform(t.transform),t.opacity&&this.setOpacity(t.opacity),t.origin&&this.setOrigin(t.origin),t.size&&this.setSize(t.size))}var s=t("famous/core/Modifier"),o=t("famous/core/Transform"),r=t("famous/transitions/Transitionable"),a=t("famous/transitions/TransitionableTransform");n.prototype.setTransform=function(t,i,e){return this._transformState.set(t,i,e),this},n.prototype.setOpacity=function(t,i,e){return this._opacityState.set(t,i,e),this},n.prototype.setOrigin=function(t,i,e){return null===t?(this._hasOrigin&&(this._modifier.originFrom(null),this._hasOrigin=!1),this):(this._hasOrigin||(this._hasOrigin=!0,this._modifier.originFrom(this._originState)),this._originState.set(t,i,e),this)},n.prototype.setSize=function(t,i,e){return null===t?(this._hasSize&&(this._modifier.sizeFrom(null),this._hasSize=!1),this):(this._hasSize||(this._hasSize=!0,this._modifier.sizeFrom(this._sizeState)),this._sizeState.set(t,i,e),this)},n.prototype.halt=function(){this._transformState.halt(),this._opacityState.halt(),this._originState.halt(),this._sizeState.halt()},n.prototype.getTransform=function(){return this._transformState.get()},n.prototype.getFinalTransform=function(){return this._transformState.getFinal()},n.prototype.getOpacity=function(){return this._opacityState.get()},n.prototype.getOrigin=function(){return this._hasOrigin?this._originState.get():null},n.prototype.getSize=function(){return this._hasSize?this._sizeState.get():null},n.prototype.modify=function(t){return this._modifier.modify(t)},e.exports=n}),e("famous/core/Surface",["require","exports","module","./Entity","./EventHandler","./Transform"],function(t,i,e){function n(t){this.options={},this.properties={},this.content="",this.classList=[],this.size=null,this._classesDirty=!0,this._stylesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._dirtyClasses=[],this._matrix=null,this._opacity=1,this._origin=null,this._size=null,this.eventForwarder=function(t){this.emit(t.type,t)}.bind(this),this.eventHandler=new d,this.eventHandler.bindThis(this),this.id=p.register(this),t&&this.setOptions(t),this._currTarget=null}function s(t){for(var i in this.eventHandler.listeners)t.addEventListener(i,this.eventForwarder)}function o(t){for(var i in this.eventHandler.listeners)t.removeEventListener(i,this.eventForwarder)}function r(t){for(var i=0;i<this._dirtyClasses.length;i++)t.classList.remove(this._dirtyClasses[i]);this._dirtyClasses=[]}function a(t){for(var i in this.properties)t.style[i]=this.properties[i]}function h(t){for(var i in this.properties)t.style[i]=""}function u(t){for(var i="matrix3d(",e=0;15>e;e++)i+=t[e]<1e-6&&t[e]>-1e-6?"0,":t[e]+",";return i+=t[15]+")"}function l(t){return(100*t[0]).toFixed(6)+"% "+(100*t[1]).toFixed(6)+"%"}function c(t,i){return t&&i?t[0]!==i[0]||t[1]!==i[1]:t!==i}var p=t("./Entity"),d=t("./EventHandler"),f=t("./Transform"),m=void 0!==document.body.style.webkitTransform;n.prototype.elementType="div",n.prototype.elementClass="famous-surface",n.prototype.on=function(t,i){this._currTarget&&this._currTarget.addEventListener(t,this.eventForwarder),this.eventHandler.on(t,i)},n.prototype.removeListener=function(t,i){this.eventHandler.removeListener(t,i)},n.prototype.emit=function(t,i){i&&!i.origin&&(i.origin=this);var e=this.eventHandler.emit(t,i);return e&&i.stopPropagation&&i.stopPropagation(),e},n.prototype.pipe=function(t){return this.eventHandler.pipe(t)},n.prototype.unpipe=function(t){return this.eventHandler.unpipe(t)},n.prototype.render=function(){return this.id},n.prototype.setProperties=function(t){for(var i in t)this.properties[i]=t[i];this._stylesDirty=!0},n.prototype.getProperties=function(){return this.properties},n.prototype.addClass=function(t){this.classList.indexOf(t)<0&&(this.classList.push(t),this._classesDirty=!0)},n.prototype.removeClass=function(t){var i=this.classList.indexOf(t);i>=0&&(this._dirtyClasses.push(this.classList.splice(i,1)[0]),this._classesDirty=!0)},n.prototype.setClasses=function(t){var i=0,e=[];for(i=0;i<this.classList.length;i++)t.indexOf(this.classList[i])<0&&e.push(this.classList[i]);for(i=0;i<e.length;i++)this.removeClass(e[i]);for(i=0;i<t.length;i++)this.addClass(t[i])},n.prototype.getClassList=function(){return this.classList},n.prototype.setContent=function(t){this.content!==t&&(this.content=t,this._contentDirty=!0)},n.prototype.getContent=function(){return this.content},n.prototype.setOptions=function(t){t.size&&this.setSize(t.size),t.classes&&this.setClasses(t.classes),t.properties&&this.setProperties(t.properties),t.content&&this.setContent(t.content)};var g=m?function(t,i){t.style.webkitTransform=u(i)}:function(t,i){t.style.transform=u(i)},v=m?function(t,i){t.style.webkitTransformOrigin=l(i)}:function(t,i){t.style.transformOrigin=l(i)},y=m?function(t){t.style.webkitTransform="scale3d(0.0001,0.0001,1)",t.style.opacity=0}:function(t){t.style.transform="scale3d(0.0001,0.0001,1)",t.style.opacity=0};n.prototype.setup=function(t){var i=t.allocate(this.elementType);if(this.elementClass)if(this.elementClass instanceof Array)for(var e=0;e<this.elementClass.length;e++)i.classList.add(this.elementClass[e]);else i.classList.add(this.elementClass);i.style.display="",s.call(this,i),v(i,[0,0]),this._currTarget=i,this._stylesDirty=!0,this._classesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._matrix=null,this._opacity=void 0,this._origin=null,this._size=null},n.prototype.commit=function(t){this._currTarget||this.setup(t.allocator);var i=this._currTarget,e=t.transform,n=t.opacity,s=t.origin,o=t.size;if(this.size){var h=o;o=[this.size[0],this.size[1]],void 0===o[0]&&h[0]&&(o[0]=h[0]),void 0===o[1]&&h[1]&&(o[1]=h[1])}if(c(this._size,o)&&(this._size=[o[0],o[1]],this._sizeDirty=!0),!e&&this._matrix)return this._matrix=null,this._opacity=0,void y(i);if(this._opacity!==n&&(this._opacity=n,i.style.opacity=n>=1?"0.999999":n),c(this._origin,s)||f.notEquals(this._matrix,e)){e||(e=f.identity),this._matrix=e;var u=e;s&&(this._origin||(this._origin=[0,0]),this._origin[0]=s[0],this._origin[1]=s[1],u=f.moveThen([-this._size[0]*s[0],-this._size[1]*s[1],0],e)),g(i,u)}if(this._classesDirty||this._stylesDirty||this._sizeDirty||this._contentDirty){if(this._classesDirty){r.call(this,i);for(var l=this.getClassList(),p=0;p<l.length;p++)i.classList.add(l[p]);this._classesDirty=!1}this._stylesDirty&&(a.call(this,i),this._stylesDirty=!1),this._sizeDirty&&(this._size&&(i.style.width=this._size[0]!==!0?this._size[0]+"px":"",i.style.height=this._size[1]!==!0?this._size[1]+"px":""),this._sizeDirty=!1),this._contentDirty&&(this.deploy(i),this.eventHandler.emit("deploy"),this._contentDirty=!1)}},n.prototype.cleanup=function(t){var i=0,e=this._currTarget;this.eventHandler.emit("recall"),this.recall(e),e.style.display="none",e.style.width="",e.style.height="",this._size=null,h.call(this,e);var n=this.getClassList();for(r.call(this,e),i=0;i<n.length;i++)e.classList.remove(n[i]);if(this.elementClass)if(this.elementClass instanceof Array)for(i=0;i<this.elementClass.length;i++)e.classList.remove(this.elementClass[i]);else e.classList.remove(this.elementClass);o.call(this,e),this._currTarget=null,t.deallocate(e),y(e)},n.prototype.deploy=function(t){var i=this.getContent();if(i instanceof Node){for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(i)}else t.innerHTML=i},n.prototype.recall=function(t){for(var i=document.createDocumentFragment();t.hasChildNodes();)i.appendChild(t.firstChild);this.setContent(i)},n.prototype.getSize=function(t){return t?this._size:this.size||this._size},n.prototype.setSize=function(t){this.size=t?[t[0],t[1]]:null,this._sizeDirty=!0},e.exports=n}),e("famous/transitions/Easing",["require","exports","module"],function(t,i,e){var n={inQuad:function(t){return t*t},outQuad:function(t){return-(t-=1)*t+1},inOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},inCubic:function(t){return t*t*t},outCubic:function(t){return--t*t*t+1},inOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},inQuart:function(t){return t*t*t*t},outQuart:function(t){return-(--t*t*t*t-1)},inOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},inQuint:function(t){return t*t*t*t*t},outQuint:function(t){return--t*t*t*t*t+1},inOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},inSine:function(t){return-1*Math.cos(t*(Math.PI/2))+1},outSine:function(t){return Math.sin(t*(Math.PI/2))},inOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},inExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},outExpo:function(t){return 1===t?1:-Math.pow(2,-10*t)+1},inOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},inCirc:function(t){return-(Math.sqrt(1-t*t)-1)},outCirc:function(t){return Math.sqrt(1- --t*t)},inOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},inElastic:function(t){var i=1.70158,e=0,n=1;return 0===t?0:1===t?1:(e||(e=.3),i=e/(2*Math.PI)*Math.asin(1/n),-(n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-i)*Math.PI/e)))},outElastic:function(t){var i=1.70158,e=0,n=1;return 0===t?0:1===t?1:(e||(e=.3),i=e/(2*Math.PI)*Math.asin(1/n),n*Math.pow(2,-10*t)*Math.sin(2*(t-i)*Math.PI/e)+1)},inOutElastic:function(t){var i=1.70158,e=0,n=1;return 0===t?0:2===(t/=.5)?1:(e||(e=.3*1.5),i=e/(2*Math.PI)*Math.asin(1/n),1>t?-.5*n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-i)*Math.PI/e):n*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-i)*Math.PI/e)*.5+1)},inBack:function(t,i){return void 0===i&&(i=1.70158),t*t*((i+1)*t-i)},outBack:function(t,i){return void 0===i&&(i=1.70158),--t*t*((i+1)*t+i)+1},inOutBack:function(t,i){return void 0===i&&(i=1.70158),(t/=.5)<1?.5*t*t*(((i*=1.525)+1)*t-i):.5*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)},inBounce:function(t){return 1-n.outBounce(1-t)},outBounce:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},inOutBounce:function(t){return.5>t?.5*n.inBounce(2*t):.5*n.outBounce(2*t-1)+.5}};e.exports=n}),e("splash/splashView",["require","exports","module","famous/modifiers/StateModifier","famous/core/Surface","famous/core/View","famous/core/EventHandler","famous/core/Transform","famous/transitions/Easing","utils/inkabinkaUtils"],function(t,i,e){function n(){r.apply(this),this.outputEvents=new a,a.setOutputHandler(this,this.outputEvents),this.viewportWidth=window.innerWidth,this.viewportHeight=window.innerHeight,this.logoSize=40,this.logoMultiplier=.4,this.logoSize=Math.round(this.viewportHeight>this.viewportWidth?this.viewportWidth*this.logoMultiplier:this.viewportHeight*this.logoMultiplier),this.easings={ball:{duration:1e3,curve:u.outCubic}},this.logo=new o({size:[this.logoSize,this.logoSize],content:'<img src="content/images/logo.png" width="'+this.logoSize+'" height="'+this.logoSize+'" />'}),this.logoMod=new s({origin:[.5,.5]}),this.loadingFontSize=l.map(this.logoSize,128,310,16,40,!1),this.loading=new o({size:[this.viewportWidth,void 0],content:'<span style="font-size: '+this.loadingFontSize+'px;">Loading</span>',classes:["loading"]}),this.loadingY=Math.round(this.viewportHeight/2)+Math.round(this.logoSize/2)+6,this.loadingMod=new s({transform:h.translate(0,this.loadingY,0)}),this.ballSize=10,this.ballStartX=Math.round(this.viewportWidth/2)-Math.round(this.logoSize/2),this.ballEndX=Math.round(this.viewportWidth/2)+Math.round(this.logoSize/2)-this.ballSize,this.ballY=this.loadingY+this.loadingFontSize+8,this.ballPosition="start",this.ball=new o({size:[this.ballSize,this.ballSize],classes:["loadingBall"],properties:{borderRadius:Math.round(this.ballSize/2)+"px"}}),this.ballMod=new s({transform:h.translate(this.ballStartX,this.ballY,0)}),this._node.add(this.logoMod).add(this.logo),this._node.add(this.loadingMod).add(this.loading),this._node.add(this.ballMod).add(this.ball),this.toggleBall=function(){"start"===this.ballPosition?(this.ballPosition="end",this.ballMod.setTransform(h.translate(this.ballEndX,this.ballY,0),this.easings.ball,function(){this.toggleBall()}.bind(this))):(this.ballPosition="start",this.ballMod.setTransform(h.translate(this.ballStartX,this.ballY,0),this.easings.ball,function(){this.toggleBall()}.bind(this)))},this.toggleBall()}var s=t("famous/modifiers/StateModifier"),o=t("famous/core/Surface"),r=t("famous/core/View"),a=t("famous/core/EventHandler"),h=t("famous/core/Transform"),u=t("famous/transitions/Easing"),l=t("utils/inkabinkaUtils");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n}),e("famous/physics/PhysicsEngine",["require","exports","module","famous/core/EventHandler"],function(t,i,e){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),t&&this.setOptions(t),this._particles=[],this._bodies=[],this._agents={},this._forces=[],this._constraints=[],this._buffer=0,this._timestamp=17,this._minTimeStep=1e3/120,this._maxTimestep=17,this._prevTime=w(),this._isSleeping=!1,this._eventHandler=null,this._currAgentId=0,this._hasBodies=!1}function s(t){return t.applyForce?this._forces:t.applyConstraint?this._constraints:void 0}function o(t,i,e){return void 0===i&&(i=this.getParticlesAndBodies()),i instanceof Array||(i=[i]),this._agents[this._currAgentId]={agent:t,targets:i,source:e},s.call(this,t).push(this._currAgentId),this._currAgentId++}function r(t){return this._agents[t]}function a(t){var i=r.call(this,this._forces[t]);i.agent.applyForce(i.targets,i.source)}function h(){for(var t=this._forces.length-1;t>-1;t--)a.call(this,t)}function u(t,i){var e=this._agents[this._constraints[t]];return e.agent.applyConstraint(e.targets,e.source,i)}function l(t){for(var i=0;i<this.options.constraintSteps;){for(var e=this._constraints.length-1;e>-1;e--)u.call(this,e,t);i++}}function c(t,i){t.integrateVelocity(i)}function p(t,i){t.integrateAngularMomentum(i),t.updateAngularVelocity()}function d(t,i){t.integrateOrientation(i)}function f(t,i){t.integratePosition(i),t.emit("update",t)}function m(t){h.call(this,t),this.forEach(c,t),this.forEachBody(p,t),l.call(this,t),this.forEachBody(d,t),this.forEach(f,t)}function g(){var t=0,i=0;return this.forEach(function(e){i=e.getEnergy(),t+=i,i<e.sleepTolerance&&e.sleep()}),t}function v(){for(var t=0,i=this._forces.length-1;i>-1;i--)t+=this._forces[i].getEnergy()||0;return t}function y(){for(var t=0,i=this._constraints.length-1;i>-1;i--)t+=this._constraints[i].getEnergy()||0;return t}var _=t("famous/core/EventHandler");n.DEFAULT_OPTIONS={constraintSteps:1,sleepTolerance:1e-7};var w=function(){return Date.now}();n.prototype.setOptions=function(t){for(var i in t)this.options[i]&&(this.options[i]=t[i])},n.prototype.addBody=function(t){return t._engine=this,t.isBody?(this._bodies.push(t),this._hasBodies=!0):this._particles.push(t),t},n.prototype.removeBody=function(t){var i=t.isBody?this._bodies:this._particles,e=i.indexOf(t);if(e>-1){for(var n=0;n<Object.keys(this._agents);n++)this.detachFrom(n,t);i.splice(e,1)}0===this.getBodies().length&&(this._hasBodies=!1)},n.prototype.attach=function(t,i,e){if(t instanceof Array){for(var n=[],s=0;s<t.length;s++)n[s]=o.call(this,t[s],i,e);return n}return o.call(this,t,i,e)},n.prototype.attachTo=function(t,i){r.call(this,t).targets.push(i)},n.prototype.detach=function(t){var i=this.getAgent(t),e=s.call(this,i),n=e.indexOf(t);e.splice(n,1),delete this._agents[t]},n.prototype.detachFrom=function(t,i){var e=r.call(this,t);if(e.source===i)this.detach(t);else{var n=e.targets,s=n.indexOf(i);
s>-1&&n.splice(s,1)}},n.prototype.detachAll=function(){this._agents={},this._forces=[],this._constraints=[],this._currAgentId=0},n.prototype.getAgent=function(t){return r.call(this,t).agent},n.prototype.getParticles=function(){return this._particles},n.prototype.getBodies=function(){return this._bodies},n.prototype.getParticlesAndBodies=function(){return this.getParticles().concat(this.getBodies())},n.prototype.forEachParticle=function(t,i){for(var e=this.getParticles(),n=0,s=e.length;s>n;n++)t.call(this,e[n],i)},n.prototype.forEachBody=function(t,i){if(this._hasBodies)for(var e=this.getBodies(),n=0,s=e.length;s>n;n++)t.call(this,e[n],i)},n.prototype.forEach=function(t,i){this.forEachParticle(t,i),this.forEachBody(t,i)},n.prototype.getEnergy=function(){return g.call(this)+v.call(this)+y.call(this)},n.prototype.step=function(){var t=w(),i=t-this._prevTime;this._prevTime=t,i<this._minTimeStep||(i>this._maxTimeStep&&(i=this._maxTimestep),m.call(this,this._timestamp))},n.prototype.isSleeping=function(){return this._isSleeping},n.prototype.sleep=function(){this.emit("end",this),this._isSleeping=!0},n.prototype.wake=function(){this._prevTime=w(),this.emit("start",this),this._isSleeping=!1},n.prototype.emit=function(t,i){null!==this._eventHandler&&this._eventHandler.emit(t,i)},n.prototype.on=function(t,i){null===this._eventHandler&&(this._eventHandler=new _),this._eventHandler.on(t,i)},e.exports=n}),e("famous/math/Vector",["require","exports","module"],function(t,i,e){function n(t,i,e){return 1===arguments.length?this.set(t):(this.x=t||0,this.y=i||0,this.z=e||0),this}function s(t,i,e){return this.x=t,this.y=i,this.z=e,this}function o(t){return s.call(this,t[0],t[1],t[2]||0)}function r(t){return s.call(this,t.x,t.y,t.z)}function a(t){return s.call(this,t,0,0)}var h=new n(0,0,0);n.prototype.add=function(t){return s.call(h,this.x+t.x,this.y+t.y,this.z+t.z)},n.prototype.sub=function(t){return s.call(h,this.x-t.x,this.y-t.y,this.z-t.z)},n.prototype.mult=function(t){return s.call(h,t*this.x,t*this.y,t*this.z)},n.prototype.div=function(t){return this.mult(1/t)},n.prototype.cross=function(t){var i=this.x,e=this.y,n=this.z,o=t.x,r=t.y,a=t.z;return s.call(h,n*r-e*a,i*a-n*o,e*o-i*r)},n.prototype.equals=function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},n.prototype.rotateX=function(t){var i=this.x,e=this.y,n=this.z,o=Math.cos(t),r=Math.sin(t);return s.call(h,i,e*o-n*r,e*r+n*o)},n.prototype.rotateY=function(t){var i=this.x,e=this.y,n=this.z,o=Math.cos(t),r=Math.sin(t);return s.call(h,n*r+i*o,e,n*o-i*r)},n.prototype.rotateZ=function(t){var i=this.x,e=this.y,n=this.z,o=Math.cos(t),r=Math.sin(t);return s.call(h,i*o-e*r,i*r+e*o,n)},n.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},n.prototype.normSquared=function(){return this.dot(this)},n.prototype.norm=function(){return Math.sqrt(this.normSquared())},n.prototype.normalize=function(t){0===arguments.length&&(t=1);var i=this.norm();return i>1e-7?r.call(h,this.mult(t/i)):s.call(h,t,0,0)},n.prototype.clone=function(){return new n(this)},n.prototype.isZero=function(){return!(this.x||this.y||this.z)},n.prototype.set=function(t){return t instanceof Array?o.call(this,t):t instanceof n?r.call(this,t):"number"==typeof t?a.call(this,t):void 0},n.prototype.setXYZ=function(){return s.apply(this,arguments)},n.prototype.set1D=function(t){return a.call(this,t)},n.prototype.put=function(t){r.call(t,h)},n.prototype.clear=function(){return s.call(this,0,0,0)},n.prototype.cap=function u(u){if(1/0===u)return r.call(h,this);var t=this.norm();return t>u?r.call(h,this.mult(u/t)):r.call(h,this)},n.prototype.project=function(t){return t.mult(this.dot(t))},n.prototype.reflectAcross=function(t){return t.normalize().put(t),r(h,this.sub(this.project(t).mult(2)))},n.prototype.get=function(){return[this.x,this.y,this.z]},n.prototype.get1D=function(){return this.x},e.exports=n}),e("famous/physics/integrators/SymplecticEuler",["require","exports","module","famous/core/OptionsManager"],function(t,i,e){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),this._optionsManager=new s(this.options),t&&this.setOptions(t)}var s=t("famous/core/OptionsManager");n.DEFAULT_OPTIONS={velocityCap:void 0,angularVelocityCap:void 0},n.prototype.setOptions=function(t){this._optionsManager.patch(t)},n.prototype.getOptions=function(){return this._optionsManager.value()},n.prototype.integrateVelocity=function(t,i){var e=t.velocity,n=t.inverseMass,s=t.force;s.isZero()||(e.add(s.mult(i*n)).put(e),s.clear())},n.prototype.integratePosition=function(t,i){var e=t.position,n=t.velocity;this.options.velocityCap&&n.cap(this.options.velocityCap).put(n),e.add(n.mult(i)).put(e)},n.prototype.integrateAngularMomentum=function(t,i){var e=t.angularMomentum,n=t.torque;n.isZero()||(this.options.angularVelocityCap&&n.cap(this.options.angularVelocityCap).put(n),e.add(n.mult(i)).put(e),n.clear())},n.prototype.integrateOrientation=function(t,i){var e=t.orientation,n=t.angularVelocity;n.isZero()||e.add(e.multiply(n).scalarMultiply(.5*i)).put(e)},e.exports=n}),e("famous/physics/bodies/Particle",["require","exports","module","famous/math/Vector","famous/core/Transform","famous/core/EventHandler","../integrators/SymplecticEuler"],function(t,i,e){function n(t){t=t||{},this.position=new o,this.velocity=new o,this.force=new o;var i=n.DEFAULT_OPTIONS;this.setPosition(t.position||i.position),this.setVelocity(t.velocity||i.velocity),this.force.set(t.force||[0,0,0]),this.mass=void 0!==t.mass?t.mass:i.mass,this.axis=void 0!==t.axis?t.axis:i.axis,this.inverseMass=1/this.mass,this._isSleeping=!1,this._engine=null,this._eventOutput=null,this._positionGetter=null,this.transform=r.identity.slice(),this._spec={transform:this.transform,target:null}}function s(){this._eventOutput=new a,this._eventOutput.bindThis(this),a.setOutputHandler(this,this._eventOutput)}var o=t("famous/math/Vector"),r=t("famous/core/Transform"),a=t("famous/core/EventHandler"),h=t("../integrators/SymplecticEuler");n.DEFAULT_OPTIONS={position:[0,0,0],velocity:[0,0,0],mass:1,axis:void 0},n.SLEEP_TOLERANCE=1e-7,n.AXES={X:0,Y:1,Z:2},n.INTEGRATOR=new h;var u={start:"start",update:"update",end:"end"},l=function(){return Date.now}();n.prototype.sleep=function(){this._isSleeping||(this.emit(u.end,this),this._isSleeping=!0)},n.prototype.wake=function(){this._isSleeping&&(this.emit(u.start,this),this._isSleeping=!1,this._prevTime=l())},n.prototype.isBody=!1,n.prototype.setPosition=function(t){this.position.set(t)},n.prototype.setPosition1D=function(t){this.position.x=t},n.prototype.getPosition=function(){return this._positionGetter instanceof Function&&this.setPosition(this._positionGetter()),this._engine.step(),this.position.get()},n.prototype.getPosition1D=function(){return this._engine.step(),this.position.x},n.prototype.positionFrom=function(t){this._positionGetter=t},n.prototype.setVelocity=function(t){this.velocity.set(t),this.wake()},n.prototype.setVelocity1D=function(t){this.velocity.x=t,this.wake()},n.prototype.getVelocity=function(){return this.velocity.get()},n.prototype.getVelocity1D=function(){return this.velocity.x},n.prototype.setMass=function(t){this.mass=t,this.inverseMass=1/t},n.prototype.getMass=function(){return this.mass},n.prototype.reset=function(t,i){this.setPosition(t||[0,0,0]),this.setVelocity(i||[0,0,0])},n.prototype.applyForce=function(t){t.isZero()||(this.force.add(t).put(this.force),this.wake())},n.prototype.applyImpulse=function(t){if(!t.isZero()){var i=this.velocity;i.add(t.mult(this.inverseMass)).put(i)}},n.prototype.integrateVelocity=function(t){n.INTEGRATOR.integrateVelocity(this,t)},n.prototype.integratePosition=function(t){n.INTEGRATOR.integratePosition(this,t)},n.prototype._integrate=function(t){this.integrateVelocity(t),this.integratePosition(t)},n.prototype.getEnergy=function(){return.5*this.mass*this.velocity.normSquared()},n.prototype.getTransform=function(){this._engine.step();var t=this.position,i=this.axis,e=this.transform;return void 0!==i&&(i&~n.AXES.X&&(t.x=0),i&~n.AXES.Y&&(t.y=0),i&~n.AXES.Z&&(t.z=0)),e[12]=t.x,e[13]=t.y,e[14]=t.z,e},n.prototype.modify=function(t){var i=this._spec;return i.transform=this.getTransform(),i.target=t,i},n.prototype.emit=function(t,i){this._eventOutput&&this._eventOutput.emit(t,i)},n.prototype.on=function(){return s.call(this),this.on.apply(this,arguments)},n.prototype.removeListener=function(){return s.call(this),this.removeListener.apply(this,arguments)},n.prototype.pipe=function(){return s.call(this),this.pipe.apply(this,arguments)},n.prototype.unpipe=function(){return s.call(this),this.unpipe.apply(this,arguments)},e.exports=n}),e("famous/physics/forces/Force",["require","exports","module","famous/math/Vector","famous/core/EventHandler"],function(t,i,e){function n(t){this.force=new o(t),this._energy=0,this._eventOutput=null}function s(){this._eventOutput=new r,this._eventOutput.bindThis(this),r.setOutputHandler(this,this._eventOutput)}var o=t("famous/math/Vector"),r=t("famous/core/EventHandler");n.prototype.setOptions=function(t){for(var i in t)this.options[i]=t[i]},n.prototype.applyForce=function(t){t.applyForce(this.force)},n.prototype.getEnergy=function(){return this._energy},n.prototype.setEnergy=function(t){this._energy=t},n.prototype.on=function(){return s.call(this),this.on.apply(this,arguments)},n.prototype.addListener=function(){return s.call(this),this.addListener.apply(this,arguments)},n.prototype.pipe=function(){return s.call(this),this.pipe.apply(this,arguments)},n.prototype.removeListener=function(){return this.removeListener.apply(this,arguments)},n.prototype.unpipe=function(){return this.unpipe.apply(this,arguments)},e.exports=n}),e("famous/physics/forces/Drag",["require","exports","module","./Force"],function(t,i,e){function n(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),s.call(this)}var s=t("./Force");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.FORCE_FUNCTIONS={LINEAR:function(t){return t},QUADRATIC:function(t){return t.mult(t.norm())}},n.DEFAULT_OPTIONS={strength:.01,forceFunction:n.FORCE_FUNCTIONS.LINEAR},n.prototype.applyForce=function(t){for(var i=this.options.strength,e=this.options.forceFunction,n=this.force,s=0;s<t.length;s++){var o=t[s];e(o.velocity).mult(-i).put(n),o.applyForce(n)}},n.prototype.setOptions=function(t){for(var i in t)this.options[i]=t[i]},e.exports=n}),e("famous/physics/forces/Spring",["require","exports","module","./Force","famous/math/Vector"],function(t,i,e){function n(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),this.disp=new l(0,0,0),h.call(this),u.call(this)}function s(t){this.forceFunction=t}function o(){var t=this.options;t.stiffness=Math.pow(2*c/t.period,2)}function r(){var t=this.options;t.damping=4*c*t.dampingRatio/t.period}function a(t,i){return.5*t*i*i}function h(){s.call(this,this.options.forceFunction),o.call(this),r.call(this)}var u=t("./Force"),l=t("famous/math/Vector");n.prototype=Object.create(u.prototype),n.prototype.constructor=n;var c=Math.PI;n.FORCE_FUNCTIONS={FENE:function(t,i){var e=.99*i,n=Math.max(Math.min(t,e),-e);return n/(1-n*n/(i*i))},HOOK:function(t){return t}},n.DEFAULT_OPTIONS={period:300,dampingRatio:.1,length:0,maxLength:1/0,anchor:void 0,forceFunction:n.FORCE_FUNCTIONS.HOOK},n.prototype.setOptions=function(t){void 0!==t.anchor&&(t.anchor.position instanceof l&&(this.options.anchor=t.anchor.position),t.anchor instanceof l&&(this.options.anchor=t.anchor),t.anchor instanceof Array&&(this.options.anchor=new l(t.anchor))),void 0!==t.period&&(this.options.period=t.period),void 0!==t.dampingRatio&&(this.options.dampingRatio=t.dampingRatio),void 0!==t.length&&(this.options.length=t.length),void 0!==t.forceFunction&&(this.options.forceFunction=t.forceFunction),void 0!==t.maxLength&&(this.options.maxLength=t.maxLength),h.call(this)},n.prototype.applyForce=function(t,i){for(var e=this.force,n=this.disp,s=this.options,o=s.stiffness,r=s.damping,h=s.length,u=s.maxLength,l=s.anchor||i.position,c=0;c<t.length;c++){var p=t[c],d=p.position,f=p.velocity;l.sub(d).put(n);var m=n.norm()-h;if(0===m)return;var g=p.mass;o*=g,r*=g,n.normalize(o*this.forceFunction(m,u)).put(e),r&&(i?e.add(f.sub(i.velocity).mult(-r)).put(e):e.add(f.mult(-r)).put(e)),p.applyForce(e),i&&i.applyForce(e.mult(-1)),this.setEnergy(a(o,m))}},n.prototype.getEnergy=function(t){var i=this.options,e=i.length,n=i.anchor,s=i.stiffness,o=n.sub(t.position).norm()-e;return.5*s*o*o},n.prototype.setAnchor=function(t){this.options.anchor||(this.options.anchor=new l),this.options.anchor.set(t)},e.exports=n}),e("famous/inputs/TouchTracker",["require","exports","module","famous/core/EventHandler"],function(t,i,e){function n(t,i,e,n){var s={};for(var o in t)s[o]=t[o];return{touch:s,origin:i,timestamp:Date.now(),count:n,history:e}}function s(t){for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i],s=n(e,t.origin,void 0,t.touches.length);this.eventOutput.emit("trackstart",s),this.selective||this.touchHistory[e.identifier]||this.track(s)}}function o(t){for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i],s=this.touchHistory[e.identifier];if(s){var o=n(e,t.origin,s,t.touches.length);this.touchHistory[e.identifier].push(o),this.eventOutput.emit("trackmove",o)}}}function r(t){for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i],s=this.touchHistory[e.identifier];if(s){var o=n(e,t.origin,s,t.touches.length);this.eventOutput.emit("trackend",o),delete this.touchHistory[e.identifier]}}}function a(){for(var t in this.touchHistory){var i=this.touchHistory[t];this.eventOutput.emit("trackend",{touch:i[i.length-1].touch,timestamp:Date.now(),count:0,history:i}),delete this.touchHistory[t]}}function h(t){this.selective=t,this.touchHistory={},this.eventInput=new u,this.eventOutput=new u,u.setInputHandler(this,this.eventInput),u.setOutputHandler(this,this.eventOutput),this.eventInput.on("touchstart",s.bind(this)),this.eventInput.on("touchmove",o.bind(this)),this.eventInput.on("touchend",r.bind(this)),this.eventInput.on("touchcancel",r.bind(this)),this.eventInput.on("unpipe",a.bind(this))}var u=t("famous/core/EventHandler");h.prototype.track=function(t){this.touchHistory[t.touch.identifier]=[t]},e.exports=h}),e("famous/inputs/TouchSync",["require","exports","module","./TouchTracker","famous/core/EventHandler"],function(t,i,e){function n(t,i){2===arguments.length?(this._legacyPositionGetter=arguments[0],i=arguments[1]):(this._legacyPositionGetter=null,i=arguments[0]),this.output=new u,this.touchTracker=new h,this.options={direction:void 0,rails:!1,scale:1},this._payload={delta:null,position:null,velocity:null,clientX:void 0,clientY:void 0,count:0,touch:void 0},this.setOptions(i?i:this.options),u.setOutputHandler(this,this.output),u.setInputHandler(this,this.touchTracker),this.touchTracker.on("trackstart",o.bind(this)),this.touchTracker.on("trackmove",r.bind(this)),this.touchTracker.on("trackend",a.bind(this))}function s(){var t=this._payload;t.position=null,t.velocity=null,t.clientX=void 0,t.clientY=void 0,t.count=void 0,t.touch=void 0}function o(t){s.call(this);var i=this._payload;i.count=t.count,i.touch=t.identifier,this.output.emit("start",i)}function r(t){var i=t.history,e=i[i.length-2].timestamp,s=i[i.length-1].timestamp,o=i[i.length-2].touch,r=i[i.length-1].touch,a=r.pageX-o.pageX,h=r.pageY-o.pageY;this.options.rails&&(Math.abs(a)>Math.abs(h)?h=0:a=0);var u,l,c,p,d=Math.max(s-e,8),f=a/d,m=h/d,g=this.options.scale;this.options.direction===n.DIRECTION_X?(u=this._legacyPositionGetter?this._legacyPositionGetter():0,p=g*a,l=u+p,c=g*f):this.options.direction===n.DIRECTION_Y?(u=this._legacyPositionGetter?this._legacyPositionGetter():0,p=g*h,l=u+p,c=g*m):(u=this._legacyPositionGetter?this._legacyPositionGetter():[0,0],p=[g*a,g*h],l=[u[0]+p[0],u[1]+p[1]],c=[g*f,g*m]);var v=this._payload;v.delta=p,v.position=l,v.velocity=c,v.clientX=t.touch.clientX,v.clientY=t.touch.clientY,v.count=t.count,v.touch=t.touch.identifier,this.output.emit("update",v)}function a(t){var i=void 0!==this.options.direction?0:[0,0],e=t.history,s=t.count;if(e.length>1){var o=e[e.length-2].timestamp,r=e[e.length-1].timestamp,a=e[e.length-2].touch,h=e[e.length-1].touch,u=h.pageX-a.pageX,l=h.pageY-a.pageY;this.options.rails&&(Math.abs(u)>Math.abs(l)?l=0:u=0);var c=Math.max(r-o,1),p=u/c,d=l/c,f=this.options.scale;i=this.options.direction===n.DIRECTION_X?f*p:this.options.direction===n.DIRECTION_Y?f*d:[f*p,f*d]}var m=this._payload;m.velocity=i,m.clientX=t.clientX,m.clientY=t.clientY,m.count=s,m.touch=t.touch.identifier,this.output.emit("end",m)}var h=t("./TouchTracker"),u=t("famous/core/EventHandler");n.DIRECTION_X=0,n.DIRECTION_Y=1,n.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale)},n.prototype.getOptions=function(){return this.options},e.exports=n}),e("famous/inputs/ScrollSync",["require","exports","module","famous/core/EventHandler","famous/core/Engine"],function(t,i,e){function n(t,i){2===arguments.length?(this._legacyPositionGetter=arguments[0],i=arguments[1]):(this._legacyPositionGetter=null,i=arguments[0]),this.options={direction:void 0,minimumEndSpeed:1/0,rails:!1,scale:1,stallTime:50,lineHeight:40},this.setOptions(i?i:this.options),this._payload={delta:null,position:null,velocity:null,slip:!0},this.input=new r,this.output=new r,r.setInputHandler(this,this.input),r.setOutputHandler(this,this.output),this._prevTime=void 0,this._prevVel=void 0,this.input.on("mousewheel",o.bind(this)),this.input.on("wheel",o.bind(this)),this.inProgress=!1,this._loopBound=!1}function s(){var t=Date.now();if(this.inProgress&&t-this._prevTime>this.options.stallTime){var i=void 0===this.options.direction?this._legacyPositionGetter?this._legacyPositionGetter:[0,0]:this._legacyPositionGetter?this._legacyPositionGetter:0;this.inProgress=!1;var e=0;Math.abs(this._prevVel)>=this.options.minimumEndSpeed&&(e=this._prevVel);var n=this._payload;n.position=i,n.velocity=e,n.slip=!0,this.output.emit("end",n)}}function o(t){t.preventDefault(),this.inProgress||(this.inProgress=!0,this.output.emit("start",{slip:!0}),this._loopBound||(a.on("prerender",s.bind(this)),this._loopBound=!0));var i=this._prevTime||Date.now(),e=void 0!==t.wheelDeltaX?t.wheelDeltaX:-t.deltaX,o=void 0!==t.wheelDeltaY?t.wheelDeltaY:-t.deltaY;1===t.deltaMode&&(e*=this.options.lineHeight,o*=this.options.lineHeight);var r=Date.now();this.options.rails&&(Math.abs(e)>Math.abs(o)?o=0:e=0);var h,u,l,c,p=Math.max(r-i,8),d=e/p,f=o/p,m=this.options.scale;this.options.direction===n.DIRECTION_X?(h=this._legacyPositionGetter?this._legacyPositionGetter():0,c=m*e,u=h+c,l=m*d):this.options.direction===n.DIRECTION_Y?(h=this._legacyPositionGetter?this._legacyPositionGetter():0,c=m*o,u=h+c,l=m*f):(h=this._legacyPositionGetter?this._legacyPositionGetter():[0,0],c=[m*e,m*o],u=[h[0]+c[0],h[1]+c[1]],l=[m*d,m*f]);var g=this._payload;g.delta=c,g.position=u,g.velocity=l,g.slip=!0,this.output.emit("update",g),this._prevTime=r,this._prevVel=l}var r=t("famous/core/EventHandler"),a=t("famous/core/Engine");n.DIRECTION_X=0,n.DIRECTION_Y=1,n.prototype.getOptions=function(){return this.options},n.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.minimumEndSpeed&&(this.options.minimumEndSpeed=t.minimumEndSpeed),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale),void 0!==t.stallTime&&(this.options.stallTime=t.stallTime)},e.exports=n}),e("famous/inputs/GenericSync",["require","exports","module","famous/core/EventHandler","./TouchSync","./ScrollSync"],function(t,i,e){function n(t,i){2===arguments.length?this._legacyPositionGetter=t:(this._legacyPositionGetter=null,i=t),this.eventInput=new o,this.eventOutput=new o,o.setInputHandler(this,this.eventInput),o.setOutputHandler(this,this.eventOutput),this._handlers=void 0,i?(this.options=i,i.syncClasses||(this.options.syncClasses=h),this.setOptions(i)):this.options={syncClasses:h},this._handlers&&s.call(this)}function s(){var t=null,i=0;if(this._handlers)for(i=0;i<this._handlers.length;i++)this.eventInput.unpipe(this._handlers[i]),this._handlers[i].unpipe(this.eventOutput);for(this._handlers=[],i=0;i<this.options.syncClasses.length;i++)t=this.options.syncClasses[i],this._handlers[i]=new t(this._legacyPositionGetter,this._handlerOptions),this.eventInput.pipe(this._handlers[i]),this._handlers[i].pipe(this.eventOutput)}var o=t("famous/core/EventHandler"),r=t("./TouchSync"),a=t("./ScrollSync"),h=[r,a];n.register=function(t){h.indexOf(t)<0&&h.push(t)},n.DIRECTION_X=0,n.DIRECTION_Y=1,n.DIRECTION_Z=2,n.prototype.setOptions=function(t){if(this._handlerOptions=t,t.syncClasses&&(this.options.syncClasses=t.syncClasses,s.call(this)),this._handlers)for(var i=0;i<this._handlers.length;i++)this._handlers[i].setOptions(this._handlerOptions)},e.exports=n}),e("famous/core/ViewSequence",["require","exports","module"],function(t,i,e){function n(t){t||(t=[]),t instanceof Array&&(t={array:t}),this._=null,this.index=t.index||0,t.array?this._=new this.constructor.Backing(t.array):t._&&(this._=t._),this.index===this._.firstIndex&&(this._.firstNode=this),this.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=this),void 0!==t.loop&&(this._.loop=t.loop),this._previousNode=null,this._nextNode=null}n.Backing=function(t){this.array=t,this.firstIndex=0,this.loop=!1,this.firstNode=null,this.lastNode=null},n.Backing.prototype.getValue=function(t){var i=t-this.firstIndex;return 0>i||i>=this.array.length?null:this.array[i]},n.Backing.prototype.setValue=function(t,i){this.array[t-this.firstIndex]=i},n.Backing.prototype.reindex=function(t,i,e){var n=0,s=this.firstIndex,o=e-i,r=this.firstNode;if(t===this.firstIndex){for(var n=0;i>n;n++)this.firstNode=this.firstNode.getNext();this.firstNode.index=this.firstIndex}for(;t-1>s;)r=r.getNext(),s++;var a=r;for(n=0;i>n;n++)r=r.getNext(),r&&(r._previousNode=a);var h=r?r.getNext():null;for(a._nextNode=null,r=a,n=0;e>n;n++)r=r.getNext();if(s+=e,r!==h&&(r._nextNode=h,h&&(h._previousNode=r)),h)for(r=h,s++;r&&s<this.array.length+this.firstIndex;)r._nextNode?r.index+=o:r.index=s,r=r.getNext(),s++},n.prototype.getPrevious=function(){return this.index===this._.firstIndex?this._.loop?(this._previousNode=this._.lastNode||new this.constructor({_:this._,index:this._.firstIndex+this._.array.length-1}),this._previousNode._nextNode=this):this._previousNode=null:this._previousNode||(this._previousNode=new this.constructor({_:this._,index:this.index-1}),this._previousNode._nextNode=this),this._previousNode},n.prototype.getNext=function(){return this.index===this._.firstIndex+this._.array.length-1?this._.loop?(this._nextNode=this._.firstNode||new this.constructor({_:this._,index:this._.firstIndex}),this._nextNode._previousNode=this):this._nextNode=null:this._nextNode||(this._nextNode=new this.constructor({_:this._,index:this.index+1}),this._nextNode._previousNode=this),this._nextNode},n.prototype.getIndex=function(){return this.index},n.prototype.toString=function(){return""+this.index},n.prototype.unshift=function(){this._.array.unshift.apply(this._.array,arguments),this._.firstIndex-=arguments.length},n.prototype.push=function(){this._.array.push.apply(this._.array,arguments)},n.prototype.splice=function(t,i){var e=Array.prototype.slice.call(arguments,2);this._.array.splice.apply(this._.array,[t-this._.firstIndex,i].concat(e)),this._.reindex(t,i,e.length)},n.prototype.swap=function(t){var i=t.get(),e=this.get();this._.setValue(this.index,i),this._.setValue(t.index,e);var n=this._previousNode,s=this._nextNode,o=this.index,r=t._previousNode,a=t._nextNode,h=t.index;this.index=h,this._previousNode=r===this?t:r,this._previousNode&&(this._previousNode._nextNode=this),this._nextNode=a===this?t:a,this._nextNode&&(this._nextNode._previousNode=this),t.index=o,t._previousNode=n===t?this:n,t._previousNode&&(t._previousNode._nextNode=t),t._nextNode=s===t?this:s,t._nextNode&&(t._nextNode._previousNode=t),this.index===this._.firstIndex?this._.firstNode=this:this.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=this),t.index===this._.firstIndex?this._.firstNode=t:t.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=t)},n.prototype.get=function(){return this._.getValue(this.index)},n.prototype.getSize=function(){var t=this.get();return t?t.getSize():null},n.prototype.render=function(){var t=this.get();return t?t.render.apply(t,arguments):null},e.exports=n}),e("famous/core/Group",["require","exports","module","./Context","./Transform","./Surface"],function(t,i,e){function n(t){r.call(this,t),this._shouldRecalculateSize=!1,this._container=document.createDocumentFragment(),this.context=new s(this._container),this.setContent(this._container),this._groupSize=[void 0,void 0]}var s=t("./Context"),o=t("./Transform"),r=t("./Surface");n.SIZE_ZERO=[0,0],n.prototype=Object.create(r.prototype),n.prototype.elementType="div",n.prototype.elementClass="famous-group",n.prototype.add=function(){return this.context.add.apply(this.context,arguments)},n.prototype.render=function(){return r.prototype.render.call(this)},n.prototype.deploy=function(t){this.context.migrate(t)},n.prototype.recall=function(){this._container=document.createDocumentFragment(),this.context.migrate(this._container)},n.prototype.commit=function(t){var i=t.transform,e=t.origin,s=t.opacity,a=t.size,h=r.prototype.commit.call(this,{allocator:t.allocator,transform:o.thenMove(i,[-e[0]*a[0],-e[1]*a[1],0]),opacity:s,origin:e,size:n.SIZE_ZERO});return(a[0]!==this._groupSize[0]||a[1]!==this._groupSize[1])&&(this._groupSize[0]=a[0],this._groupSize[1]=a[1],this.context.setSize(a)),this.context.update({transform:o.translate(-e[0]*a[0],-e[1]*a[1],0),origin:e,size:a}),h},e.exports=n}),e("famous/views/Scroller",["require","exports","module","famous/core/Entity","famous/core/Group","famous/core/OptionsManager","famous/core/Transform","famous/utilities/Utility","famous/core/ViewSequence","famous/core/EventHandler"],function(t,i,e){function n(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),this._optionsManager=new c(this.options),t&&this._optionsManager.setOptions(t),this._node=null,this._position=0,this._positionOffset=0,this._positionGetter=null,this._outputFunction=null,this._masterOutputFunction=null,this.outputFrom(),this._onEdge=0,this.group=new l,this.group.add({render:h.bind(this)}),this._entityId=u.register(this),this._size=[void 0,void 0],this._contextSize=[void 0,void 0],this._eventInput=new m,this._eventOutput=new m,m.setInputHandler(this,this._eventInput),m.setOutputHandler(this,this._eventOutput)}function s(t){t||(t=this._contextSize);var i=this.options.direction===d.Direction.X?0:1;return void 0===t[i]?this._contextSize[i]:t[i]}function o(t,i,e){var n=t.getSize?t.getSize():this._contextSize,o=this._outputFunction(i);return e.push({transform:o,target:t.render()}),s.call(this,n)}function r(){return this.options.clipSize?this.options.clipSize:s.call(this,this._contextSize)}function a(){for(var t=s.call(this,this._node.getSize()),i=this._node&&this._node.getNext?this._node.getNext():null;i&&this._position+this._positionOffset>=t;)this._positionOffset-=t,this._node=i,t=s.call(this,this._node.getSize()),i=this._node&&this._node.getNext?this._node.getNext():null;for(var e=this._node&&this._node.getPrevious?this._node.getPrevious():null;e&&this._position+this._positionOffset<0;){var n=s.call(this,e.getSize());this._positionOffset+=n,this._node=e,e=this._node&&this._node.getPrevious?this._node.getPrevious():null}}function h(){var t=null,i=this._position,e=[];this._onEdge=0;for(var n=-this._positionOffset,h=r.call(this),u=this._node;u&&n-i<h+this.options.margin;)n+=o.call(this,u,n,e),u=u.getNext?u.getNext():null;var l=this._node,c=s.call(this,l.getSize());if(h>n){for(;l&&h>c;)l=l.getPrevious(),l&&(c+=s.call(this,l.getSize()));for(l=this._node;l&&h>c;)l=l.getNext(),l&&(c+=s.call(this,l.getSize()))}var p=void 0!==c&&h>c?c:h;for(!u&&p>=n-i?(this._onEdge=1,this._eventOutput.emit("edgeHit",{position:n-p})):!this._node.getPrevious()&&0>=i&&(this._onEdge=-1,this._eventOutput.emit("edgeHit",{position:0})),u=this._node&&this._node.getPrevious?this._node.getPrevious():null,n=-this._positionOffset,u&&(t=u.getSize?u.getSize():this._contextSize,n-=s.call(this,t));u&&n-i>-(r.call(this)+this.options.margin);)o.call(this,u,n,e),u=u.getPrevious?u.getPrevious():null,u&&(t=u.getSize?u.getSize():this._contextSize,n-=s.call(this,t));return a.call(this),e}var u=t("famous/core/Entity"),l=t("famous/core/Group"),c=t("famous/core/OptionsManager"),p=t("famous/core/Transform"),d=t("famous/utilities/Utility"),f=t("famous/core/ViewSequence"),m=t("famous/core/EventHandler");n.DEFAULT_OPTIONS={direction:d.Direction.Y,margin:0,clipSize:void 0},n.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},n.prototype.onEdge=function(){return this._onEdge},n.prototype.outputFrom=function(t,i){t||(t=function(t){return this.options.direction===d.Direction.X?p.translate(t,0):p.translate(0,t)}.bind(this),i||(i=t)),this._outputFunction=t,this._masterOutputFunction=i?i:function(i){return p.inverse(t(-i))}},n.prototype.positionFrom=function(t){t instanceof Function?this._positionGetter=t:t&&t.get?this._positionGetter=t.get.bind(t):(this._positionGetter=null,this._position=t),this._positionGetter&&(this._position=this._positionGetter.call(this))},n.prototype.sequenceFrom=function(t){t instanceof Array&&(t=new f({array:t})),this._node=t,this._positionOffset=0},n.prototype.getSize=function(t){return t?this._contextSize:this._size},n.prototype.render=function(){return this._node?(this._positionGetter&&(this._position=this._positionGetter.call(this)),this._entityId):null},n.prototype.commit=function(t){var i=t.transform,e=t.opacity,n=t.origin,s=t.size;this.options.clipSize||s[0]===this._contextSize[0]&&s[1]===this._contextSize[1]||(this._onEdge=0,this._contextSize=s,this.options.direction===d.Direction.X?(this._size[0]=r.call(this),this._size[1]=void 0):(this._size[0]=void 0,this._size[1]=r.call(this)));var o=this._masterOutputFunction(-this._position);return{transform:p.multiply(i,o),opacity:e,origin:n,target:this.group.render()}},e.exports=n}),e("famous/views/Scrollview",["require","exports","module","famous/utilities/Utility","famous/physics/PhysicsEngine","famous/physics/bodies/Particle","famous/physics/forces/Drag","famous/physics/forces/Spring","famous/inputs/GenericSync","famous/core/EventHandler","famous/core/OptionsManager","famous/core/ViewSequence","famous/views/Scroller"],function(t,i,e){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),this._optionsManager=new x(this.options),this._node=null,this._physicsEngine=new v,this._particle=new y,this._physicsEngine.addBody(this._particle),this.spring=new w({anchor:[0,0,0]}),this.drag=new _({forceFunction:_.FORCE_FUNCTIONS.QUADRATIC}),this.friction=new _({forceFunction:_.FORCE_FUNCTIONS.LINEAR}),this.sync=new S({direction:this.options.direction}),this._eventInput=new b,this._eventOutput=new b,this._eventInput.pipe(this.sync),this.sync.pipe(this._eventInput),b.setInputHandler(this,this._eventInput),b.setOutputHandler(this,this._eventOutput),this._touchCount=0,this._springState=0,this._onEdge=0,this._pageSpringPosition=0,this._edgeSpringPosition=0,this._touchVelocity=void 0,this._earlyEnd=!1,this._needsPaginationCheck=!1,this._scroller=new T,this._scroller.positionFrom(this.getPosition.bind(this)),t&&this.setOptions(t),a.call(this)}function s(t){this._touchCount=t.count,void 0===t.count&&(this._touchCount=1),u.call(this),this.setVelocity(0),this._touchVelocity=0,this._earlyEnd=!1}function o(t){var i=-t.velocity,e=-t.delta;this._onEdge&&t.slip&&(0>i&&this._onEdge<0||i>0&&this._onEdge>0?this._earlyEnd||(r.call(this,t),this._earlyEnd=!0):this._earlyEnd&&Math.abs(i)>Math.abs(this.getVelocity())&&s.call(this,t)),this._earlyEnd||(this._touchVelocity=i,t.slip?this.setVelocity(i):this.setPosition(this.getPosition()+e))
}function r(t){if(this._touchCount=t.count||0,!this._touchCount){u.call(this),this._onEdge&&d.call(this,this._edgeSpringPosition,z.EDGE),h.call(this);var i=-t.velocity,e=this.options.speedLimit;t.slip&&(e*=this.options.edgeGrip),-e>i?i=-e:i>e&&(i=e),this.setVelocity(i),this._touchVelocity=void 0,this._needsPaginationCheck=!0}}function a(){this._eventInput.bindThis(this),this._eventInput.on("start",s),this._eventInput.on("update",o),this._eventInput.on("end",r),this._scroller.on("edgeHit",function(t){this._edgeSpringPosition=t.position}.bind(this))}function h(){this._springState?this._physicsEngine.attach([this.spring],this._particle):this._physicsEngine.attach([this.drag,this.friction],this._particle)}function u(){this._springState=z.NONE,this._physicsEngine.detachAll()}function l(t){var i=this.options.direction,e=(t.getSize()||this._scroller.getSize())[i];return e||(e=this._scroller.getSize()[i]),e}function c(t){!this._onEdge&&t?(this.sync.setOptions({scale:this.options.edgeGrip}),this._touchCount||this._springState===z.EDGE||d.call(this,this._edgeSpringPosition,z.EDGE)):this._onEdge&&!t&&(this.sync.setOptions({scale:1}),this._springState&&Math.abs(this.getVelocity())<.001&&(u.call(this),h.call(this))),this._onEdge=t}function p(){if(this._needsPaginationCheck&&!this._touchCount&&this._springState!==z.EDGE){var t=this.getVelocity();if(!(Math.abs(t)>=this.options.pageStopSpeed)){var i=this.getPosition(),e=Math.abs(t)>this.options.pageSwitchSpeed,n=l.call(this,this._node),s=i>.5*n,o=t>0;s&&!e||e&&o?this.goToNextPage():d.call(this,0,z.PAGE),this._needsPaginationCheck=!1}}}function d(t,i){var e;i===z.EDGE?(this._edgeSpringPosition=t,e={anchor:[this._edgeSpringPosition,0,0],period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}):i===z.PAGE&&(this._pageSpringPosition=t,e={anchor:[this._pageSpringPosition,0,0],period:this.options.pagePeriod,dampingRatio:this.options.pageDamp}),this.spring.setOptions(e),i&&!this._springState&&(u.call(this),this._springState=i,h.call(this)),this._springState=i}function f(){for(var t=this.getPosition(),i=l.call(this,this._node),e=this._node.getNext();t>i+M&&e;)m.call(this,-i),t-=i,this._scroller.sequenceFrom(e),this._node=e,e=this._node.getNext(),i=l.call(this,this._node);for(var n,s=this._node.getPrevious();-M>t&&s;)n=l.call(this,s),this._scroller.sequenceFrom(s),this._node=s,m.call(this,n),t+=n,s=this._node.getPrevious()}function m(t){this._edgeSpringPosition+=t,this._pageSpringPosition+=t,this.setPosition(this.getPosition()+t),this._springState===z.EDGE?this.spring.setOptions({anchor:[this._edgeSpringPosition,0,0]}):this._springState===z.PAGE&&this.spring.setOptions({anchor:[this._pageSpringPosition,0,0]})}var g=t("famous/utilities/Utility"),v=t("famous/physics/PhysicsEngine"),y=t("famous/physics/bodies/Particle"),_=t("famous/physics/forces/Drag"),w=t("famous/physics/forces/Spring"),S=t("famous/inputs/GenericSync"),b=t("famous/core/EventHandler"),x=t("famous/core/OptionsManager"),I=t("famous/core/ViewSequence"),T=t("famous/views/Scroller"),M=.5;n.DEFAULT_OPTIONS={direction:g.Direction.Y,rails:!0,friction:.001,drag:1e-4,edgeGrip:.5,edgePeriod:300,edgeDamp:1,paginated:!1,pagePeriod:500,pageDamp:.8,pageStopSpeed:10,pageSwitchSpeed:.5,speedLimit:10};var z={NONE:0,EDGE:1,PAGE:2};n.prototype.outputFrom=function(){return this._scroller.outputFrom.apply(this._scroller,arguments)},n.prototype.getPosition=function(){return this._particle.getPosition1D()},n.prototype.setPosition=function(t){this._particle.setPosition1D(t)},n.prototype.getVelocity=function(){return this._touchCount?this._touchVelocity:this._particle.getVelocity1D()},n.prototype.setVelocity=function(t){this._particle.setVelocity1D(t)},n.prototype.setOptions=function(t){void 0!==t.direction&&("x"===t.direction?t.direction=g.Direction.X:"y"===t.direction&&(t.direction=g.Direction.Y)),this._scroller.setOptions(t),this._optionsManager.setOptions(t),void 0===this.options.margin&&(this.options.margin=1e3),this.drag.setOptions({strength:this.options.drag}),this.friction.setOptions({strength:this.options.friction}),this.spring.setOptions({period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}),this.sync.setOptions({rails:this.options.rails,direction:this.options.direction===g.Direction.X?S.DIRECTION_X:S.DIRECTION_Y})},n.prototype.goToPreviousPage=function(){if(!this._node)return null;var t=this._node.getPrevious();if(t){var i=this.getPosition(),e=l.call(this,t);this._scroller.sequenceFrom(t),this._node=t;var n=M>i?-e:0;d.call(this,n,z.PAGE),m.call(this,e)}return this._eventOutput.emit("pageChange",{direction:-1}),t},n.prototype.goToNextPage=function(){if(!this._node)return null;var t=this._node.getNext();if(t){var i=this.getPosition(),e=l.call(this,this._node),n=l.call(this,t);this._scroller.sequenceFrom(t),this._node=t;var s=i>e-M?e+n:e;d.call(this,s,z.PAGE),m.call(this,-e)}return this._eventOutput.emit("pageChange",{direction:1}),t},n.prototype.sequenceFrom=function(t){return t instanceof Array&&(t=new I({array:t})),this._node=t,this._scroller.sequenceFrom(t)},n.prototype.getSize=function(){return this._scroller.getSize.apply(this._scroller,arguments)},n.prototype.render=function(){return this._node?(f.call(this),c.call(this,this._scroller.onEdge()),this.options.paginated&&p.call(this),this._scroller.render()):null},n.prototype.render2=function(){return this._node?(f.call(this),c.call(this,this._scroller.onEdge()),this.options.paginated&&p.call(this),this._scroller.render()):null},e.exports=n}),e("utils/scrollviewCB",["require","exports","module","famous/views/Scrollview","famous/core/EventHandler"],function(t,i,e){function n(){s.apply(this),this.outputEvents=new o,o.setOutputHandler(this,this.outputEvents),this.isLoading=!0,this.position=0,this.setIsLoading=function(t){this.isLoading=t}}var s=t("famous/views/Scrollview"),o=t("famous/core/EventHandler");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.render=function(){if(this.isLoading===!1){var t,i=document.getElementById("ibitem0");i&&(t=Math.round(10*(i.parentNode.parentNode.getBoundingClientRect().top+1e-4))/10),t&&this.position!==t&&(this.position=t,this.outputEvents.emit("positionChange",{newPosition:this.position,isLoading:this.isLoading}))}return this.render2()},e.exports=n}),e("famous/surfaces/ContainerSurface",["require","exports","module","famous/core/Surface","famous/core/Context"],function(t,i,e){function n(t){s.call(this,t),this._container=document.createElement("div"),this._container.classList.add("famous-group"),this._container.classList.add("famous-container-group"),this._shouldRecalculateSize=!1,this.context=new o(this._container),this.setContent(this._container)}var s=t("famous/core/Surface"),o=t("famous/core/Context");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.elementType="div",n.prototype.elementClass="famous-surface",n.prototype.add=function(){return this.context.add.apply(this.context,arguments)},n.prototype.render=function(){return this._sizeDirty&&(this._shouldRecalculateSize=!0),s.prototype.render.apply(this,arguments)},n.prototype.deploy=function(){return this._shouldRecalculateSize=!0,s.prototype.deploy.apply(this,arguments)},n.prototype.commit=function(){var t=this._size?[this._size[0],this._size[1]]:null,i=s.prototype.commit.apply(this,arguments);return(this._shouldRecalculateSize||t&&(this._size[0]!==t[0]||this._size[1]!==t[1]))&&(this.context.setSize(),this._shouldRecalculateSize=!1),this.context.update(),i},e.exports=n}),e("menu/menuImageItem",["require","exports","module","famous/core/Surface","famous/modifiers/StateModifier","famous/core/Transform","famous/core/View","famous/core/EventHandler","famous/surfaces/ContainerSurface"],function(t,i,e){function n(t){a.apply(this),this.outputEvents=new h,h.setOutputHandler(this,this.outputEvents),this.viewportWidth=window.innerWidth,this.viewportHeight=window.innerHeight,this.menuIndex=-1,this.smartTopicID=null,this.topicName="",this.imageUrl="",this.itemHeight=0,this.rotateAmount=0,this.additionalItemWidth=0,this.fullItemWidth=0,this.imageAdjust=0,this.itemSpacing=0,null!=t.menuIndex&&(this.menuIndex=t.menuIndex),null!=t.smartTopicID&&(this.smartTopicID=t.smartTopicID),null!=t.topicName&&(this.topicName=t.topicName),null!=t.imageUrl&&(this.imageUrl=t.imageUrl),null!=t.itemHeight&&(this.itemHeight=t.itemHeight),null!=t.rotateAmount&&(this.rotateAmount=t.rotateAmount),null!=t.additionalItemWidth&&(this.additionalItemWidth=t.additionalItemWidth),null!=t.fullItemWidth&&(this.fullItemWidth=t.fullItemWidth),null!=t.imageAdjust&&(this.imageAdjust=t.imageAdjust),null!=t.itemSpacing&&(this.itemSpacing=t.itemSpacing),this.isScrolling=!1,this.topicFontSize=Math.round(.35*this.itemHeight),this.topicX=this.additionalItemWidth,0===this.rotateAmount&&(this.topicX=10),this.modifiers={item:new o({transform:r.multiply(r.translate(0,0,0),r.rotateZ(this.rotateAmount)),opacity:1,origin:[1,0]}),image:new o({transform:r.multiply(r.rotateZ(-this.rotateAmount),r.translate(0,this.imageAdjust,1)),opacity:1,origin:[1,0]}),gradient:new o({transform:r.translate(0,0,2),opacity:1,origin:[0,0]}),topic:new o({transform:r.translate(this.topicX,0,3),opacity:1})},this.modifiers.item.setSize([this.fullItemWidth,this.itemHeight+this.itemSpacing]),this.itemSurface=new u({size:[this.fullItemWidth,this.itemHeight],classes:["overflow-hidden"]});var i="ibitem"+this.menuIndex;this.imageSurface=new s({size:[this.fullItemWidth,this.itemHeight],content:'<img style="width: '+this.fullItemWidth+'px;" id="'+i+'" src="'+this.imageUrl+'" width="'+this.fullItemWidth+'" />'}),this.gradientSurface=new s({size:[this.fullItemWidth,this.itemHeight],content:'<div style="width: '+this.fullItemWidth+"px; height: "+this.itemHeight+'px;">&nbsp;</div>',classes:["faded"]}),this.topicSurface=new s({size:[this.fullItemWidth,this.itemHeight],classes:["topic"],content:'<span style="font-size: '+this.topicFontSize+'px;">'+this.topicName+"</span>"}),""!==this.imageUrl&&""!==this.topicName&&(this.itemSurface.add(this.modifiers.image).add(this.imageSurface),this.itemSurface.add(this.modifiers.gradient).add(this.gradientSurface)),this.itemSurface.add(this.modifiers.topic).add(this.topicSurface),this._node.add(this.modifiers.item).add(this.itemSurface),this.itemSurface.on("mousedown",function(){this.isScrolling=!1}.bind(this)),this.itemSurface.on("mouseup",function(){this.isScrolling===!1&&this.outputEvents.emit("topic",{smartTopicID:this.smartTopicID})}.bind(this)),this.setIsScrolling=function(t){this.isScrolling=t}}var s=t("famous/core/Surface"),o=t("famous/modifiers/StateModifier"),r=t("famous/core/Transform"),a=t("famous/core/View"),h=t("famous/core/EventHandler"),u=t("famous/surfaces/ContainerSurface");n.prototype=Object.create(a.prototype),n.prototype.constructor=n,e.exports=n}),e("menu/menuView",["require","exports","module","famous/core/Engine","famous/core/Surface","famous/modifiers/StateModifier","famous/core/Transform","famous/transitions/Easing","famous/core/View","famous/core/EventHandler","utils/scrollviewCB","menu/menuImageItem","utils/inkabinkaUtils"],function(t,i,e){function n(){u.apply(this),this.outputEvents=new l,l.setOutputHandler(this,this.outputEvents),this.viewportWidth=window.innerWidth,this.viewportHeight=window.innerHeight,this.totalArea=this.viewportWidth*this.viewportHeight,this.itemHeight=Math.round(d.map(this.totalArea,15e4,75e4,100,240,!0)),this.calculateAdditionalWidth=function(t,i,e){if(0===t)return 0;var n=Math.abs(i/Math.cos(t)-i),s=Math.abs(n/Math.tan(t)),o=s+e;return Math.ceil(Math.abs(Math.tan(t)*o))},this.isInit=!1,this.isAnimateIn=!1,this.isAnimateTopicsIn=!1,this.itemSpacing=8,this.additionalItemSpacing=Math.round(d.map(this.totalArea,15e4,75e4,0,10,!0)),this.itemSpacing+=this.additionalItemSpacing,this.headerHeight=Math.round(d.map(this.viewportHeight,568,1024,50,80,!0)),this.rotateAmount=-.2,this.scrollviewOffset=Math.round(d.map(this.viewportWidth,320,1200,30,-85,!0)),d.isValidWebKitVersion()===!1&&(this.rotateAmount=0,this.scrollviewOffset=this.headerHeight+this.itemSpacing),this.additionalItemWidth=this.calculateAdditionalWidth(this.rotateAmount,this.viewportWidth,this.itemHeight),this.fullItemWidth=this.viewportWidth+this.additionalItemWidth,this.imageHeightMultiplier=2,this.topicFontSize=Math.round(d.map(this.itemHeight,100,200,28,48,!0)),this.fullHeight=this.viewportHeight,this.imageAdjust=-30,this.parallaxDivisor=1.2,this.easings={linear:{duration:1e3,curve:h.linear},animate:{duration:1e3,curve:h.outCubic},animateLong:{duration:1e3,curve:h.linear}},this.introTransition=this.easings.animate,this.topics=[],this.scrollview=new c,this.scrollview.on("positionChange",function(t){for(var i=0;i<this.arrItems.length;i++)this.arrItems[i].setIsScrolling(!0);var e=t.newPosition-this.scrollviewOffset,n=80;if(n>=e)for(var s=e/this.fullHeight,o=this.itemHeight*this.imageHeightMultiplier*s/this.parallaxDivisor,r=0;r<this.topics.length;r++)this.arrItems[r].modifiers.image.setTransform(a.multiply(a.rotateZ(-this.rotateAmount),a.translate(0,this.imageAdjust+o,1)))}.bind(this)),this.scrollviewMod=new r({transform:a.translate(0,this.scrollviewOffset,0),origin:[1,0]});var t=Math.round(this.headerHeight/2);this.header=new o({size:[void 0,this.headerHeight],classes:["header"],content:'<img style="width: '+t+'px;" src="content/images/logo.png" width="'+t+'" />&nbsp;<span style="font-size: '+t+'px;">InkaBinka</span>'}),this.headerMod=new r({transform:a.translate(0,0,10)}),this._node.add(this.headerMod).add(this.header),this._node.add(this.scrollviewMod).add(this.scrollview),this.arrItems=[],this.init=function(t,i){if(this.isInit===!1){this.topics=t,this.imageHeightMultiplier=d.map(this.topics.length,7,4,1.2,2,!0);for(var e=0;e<t.length;e++){var n=t[e],s="";this.viewportWidth<=512?""!==n.smallMenuImageID&&(s=SiteConfig.cdnURL+n.smallMenuImageID+"-p_ng.jpeg"):""!==n.smallMenuImageID&&(s=SiteConfig.cdnURL+n.largeMenuImageID+"-p_ng.jpeg");var o=new p({menuIndex:e,smartTopicID:n.smartTopicID,topicName:n.topicName,imageUrl:s,itemHeight:this.itemHeight,rotateAmount:this.rotateAmount,additionalItemWidth:this.additionalItemWidth,fullItemWidth:this.fullItemWidth,imageAdjust:this.imageAdjust,itemSpacing:this.itemSpacing});o.on("topic",function(t){this.outputEvents.emit("topic",{smartTopicID:t.smartTopicID})}.bind(this)),this.arrItems.push(o)}var r=new p({menuIndex:e,smartTopicID:null,topicName:"",imageUrl:"",itemHeight:this.itemHeight,rotateAmount:this.rotateAmount,additionalItemWidth:this.additionalItemWidth,fullItemWidth:this.fullItemWidth,imageAdjust:this.imageAdjust,itemSpacing:this.itemSpacing});this.arrItems.push(r),this.fullHeight=this.arrItems.length*this.itemHeight,this.scrollview.sequenceFrom(this.arrItems),this.isInit=!0,this.isAnimateIn=!1,this.isAnimateTopicsIn=!1,i&&i()}else i&&i()},this.reset=function(t){s.pipe(this.scrollview),this.scrollview.setIsLoading(!0),this.isAnimateIn=!1,this.isAnimateTopicsIn=!1;for(var i=0,e=0,n=0;n<this.arrItems.length;n++)i=n%2===1?0-this.fullItemWidth:this.fullItemWidth,e=Math.tan(this.rotateAmount)*i,this.arrItems[n].modifiers.gradient.setOpacity(0),this.arrItems[n].modifiers.topic.setOpacity(0),n===this.arrItems.length-1&&null!=t?this.arrItems[n].modifiers.item.setTransform(a.multiply(a.translate(i,e,0),a.rotateZ(this.rotateAmount)),null,t):this.arrItems[n].modifiers.item.setTransform(a.multiply(a.translate(i,e,0),a.rotateZ(this.rotateAmount)))},this.animateIn=function(t){if(this.isAnimateIn===!1){this.isAnimateIn=!0;for(var i=0;i<this.arrItems.length;i++)i===this.arrItems.length-1&&null!=t?this.arrItems[i].modifiers.item.setTransform(a.multiply(a.translate(0,0,0),a.rotateZ(this.rotateAmount)),this.introTransition,t):this.arrItems[i].modifiers.item.setTransform(a.multiply(a.translate(0,0,0),a.rotateZ(this.rotateAmount)),this.introTransition)}},this.animateTopicsIn=function(t){if(this.isAnimateTopicsIn===!1){this.isAnimateTopicsIn=!0;for(var i=0;i<this.arrItems.length;i++)this.arrItems[i].modifiers.gradient.setOpacity(1,this.introTransition),i===this.arrItems.length-1&&null!=t?this.arrItems[i].modifiers.topic.setOpacity(1,this.introTransition,t):this.arrItems[i].modifiers.topic.setOpacity(1,this.introTransition);this.scrollview.setIsLoading(!1)}}}var s=t("famous/core/Engine"),o=t("famous/core/Surface"),r=t("famous/modifiers/StateModifier"),a=t("famous/core/Transform"),h=t("famous/transitions/Easing"),u=t("famous/core/View"),l=t("famous/core/EventHandler"),c=t("utils/scrollviewCB"),p=t("menu/menuImageItem"),d=t("utils/inkabinkaUtils");n.prototype=Object.create(u.prototype),n.prototype.constructor=n,e.exports=n}),e("famous/inputs/MouseSync",["require","exports","module","famous/core/EventHandler"],function(t,i,e){function n(t,i){2===arguments.length?(this._legacyPositionGetter=arguments[0],i=arguments[1]):(this._legacyPositionGetter=null,i=arguments[0]),this.options={direction:void 0,rails:!1,scale:1,stallTime:50,propogate:!0},this._payload={delta:null,position:null,velocity:null,clientX:void 0,clientY:void 0,offsetX:void 0,offsetY:void 0},this.setOptions(i?i:this.options),this.input=new u,this.output=new u,u.setInputHandler(this,this.input),u.setOutputHandler(this,this.output),this._prevCoord=void 0,this._prevTime=void 0,this._prevVel=void 0,this.input.on("mousedown",o.bind(this)),this.input.on("mousemove",r.bind(this)),this.input.on("mouseup",a.bind(this)),this.options.propogate?this.input.on("mouseleave",h.bind(this)):this.input.on("mouseleave",a.bind(this))}function s(){var t=this._payload;t.delta=null,t.position=null,t.velocity=null,t.clientX=void 0,t.clientY=void 0,t.offsetX=void 0,t.offsetY=void 0}function o(t){t.preventDefault(),s.call(this);var i=t.clientX,e=t.clientY;this._prevCoord=[i,e],this._prevTime=Date.now(),this._prevVel=void 0!==this.options.direction?0:[0,0];var n=this._payload;n.clientX=i,n.clientY=e,n.offsetX=t.offsetX,n.offsetY=t.offsetY,this.output.emit("start",n)}function r(t){if(this._prevCoord){var i=this._prevCoord,e=this._prevTime,s=t.clientX,o=t.clientY,r=[s,o],a=Date.now(),h=r[0]-i[0],u=r[1]-i[1];this.options.rails&&(Math.abs(h)>Math.abs(u)?u=0:h=0);var l,c,p,d,f=Math.max(a-e,8),m=h/f,g=u/f,v=this.options.scale;this.options.direction===n.DIRECTION_X?(l=this._legacyPositionGetter?this._legacyPositionGetter():0,d=v*h,c=l+d,p=v*m):this.options.direction===n.DIRECTION_Y?(l=this._legacyPositionGetter?this._legacyPositionGetter():0,d=v*u,c=l+d,p=v*g):(l=this._legacyPositionGetter?this._legacyPositionGetter():[0,0],d=[v*h,v*u],c=[l[0]+d[0],l[1]+d[1]],p=[v*m,v*g]);var y=this._payload;y.delta=d,y.position=c,y.velocity=p,y.clientX=s,y.clientY=o,y.offsetX=t.offsetX,y.offsetY=t.offsetY,this.output.emit("update",y),this._prevCoord=r,this._prevTime=a,this._prevVel=p}}function a(t){if(this._prevCoord){var i=this._prevTime,e=Date.now();e-i>this.options.stallTime&&(this._prevVel=void 0===this.options.direction?[0,0]:0);var n=this._payload;n.velocity=this._prevVel,n.clientX=t.clientX,n.clientY=t.clientY,n.offsetX=t.offsetX,n.offsetY=t.offsetY,this.output.emit("end",n),this._prevCoord=void 0,this._prevTime=void 0,this._prevVel=void 0}}function h(){if(this._prevCoord){var t=r.bind(this),i=function(e){a.call(this,e),document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",i)}.bind(this);document.addEventListener("mousemove",t),document.addEventListener("mouseup",i)}}var u=t("famous/core/EventHandler");n.DIRECTION_X=0,n.DIRECTION_Y=1,n.prototype.getOptions=function(){return this.options},n.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale),void 0!==t.stallTime&&(this.options.stallTime=t.stallTime),void 0!==t.propogate&&(this.options.propogate=t.propogate)},e.exports=n}),e("utils/smartScroller",["require","exports","module","famous/core/Surface","famous/modifiers/StateModifier","famous/core/Transform","famous/transitions/Easing","famous/core/View","famous/core/EventHandler","famous/surfaces/ContainerSurface","famous/inputs/TouchSync","famous/inputs/GenericSync","famous/inputs/MouseSync","utils/inkabinkaUtils"],function(t,i,e){function n(t){h.apply(this),this.outputEvents=new u,u.setOutputHandler(this,this.outputEvents),this.itemWidth=window.innerWidth,this.itemHeight=Math.ceil(window.innerHeight/2),this.orientation="landscape",null!=t.itemWidth&&(this.itemWidth=t.itemWidth),null!=t.itemHeight&&(this.itemHeight=t.itemHeight),null!=t.orientation&&(this.orientation=t.orientation),this.iconHeight=Math.round(.12*this.itemWidth),this.items=[],this.itemSpacing=Math.round(.01*this.itemWidth),this.webMode=!1,this.changePositionThreshold=.1,"portrait"===this.orientation&&(this.changePositionThreshold=.2),this.changeVelocityThreshold=2.5,this.minDuration=800,this.maxDuration=100,this.parallaxEnabled=!0,this.concealRatio=.2,this.revealRatio=.6,this.edgeMaxPosition=.2,this.isAnimating=!1,this.canStartNewAnimation=!0,this.ignoreEnd=!1,this.position=0,this.currentArticleIndex=0,this.currentTravelAmount=0,this.itemModifiers=[],this.easings={linear:{duration:500,curve:a.linear},spring:{duration:800,curve:a.outExpo}},this.sync=new p(function(){return this.position}.bind(this),{direction:c.DIRECTION_X,syncClasses:[d,c]}),this.container=new l({size:[this.itemWidth,this.itemHeight],classes:["overflow-hidden"]}),this.container.pipe(this.sync),this.init=function(t,i,e){this.items=t,this.webMode=i,this.currentArticleIndex=e,this.position=0,this.currentTravelAmount=0,this.itemModifiers=[];for(var n=0;n<this.items.length;n++){var a=this.items[n],h=new o({transform:r.translate((n-this.currentArticleIndex)*this.itemWidth+(n-this.currentArticleIndex)*this.itemSpacing,0,0)});this.itemModifiers.push(h),a.resetImages(),this.container.add(h).add(a)}this.webMode===!0&&(this.prev=new s({size:[this.iconHeight,this.iconHeight],content:'<img src="content/images/prev.png" width="'+this.iconHeight+'" height="'+this.iconHeight+'" />',classes:["closeToTop"],properties:{cursor:"pointer"}}),this.prevMod=new o({transform:r.translate(10,this.itemHeight/2-this.iconHeight/2,0),opacity:0}),this.next=new s({size:[this.iconHeight,this.iconHeight],content:'<img src="content/images/next.png" width="'+this.iconHeight+'" height="'+this.iconHeight+'" />',classes:["closeToTop"],properties:{cursor:"pointer"}}),this.nextMod=new o({transform:r.translate(this.itemWidth-this.iconHeight-10,this.itemHeight/2-this.iconHeight/2,0),opacity:0}),this.prev.on("click",function(){if(console.log("prev clicked"),0!==this.currentArticleIndex&&this.canStartNewAnimation===!0&&this.isAnimating===!1){if(this.parallaxEnabled===!0){var t=Math.round(this.itemWidth/2),i=-1,e=-1,n=-1;this.items[this.currentArticleIndex-1].translateImages(t,i,e,n,null)}this.handleChange(this.changeVelocityThreshold,1600,.01)}}.bind(this)),this.next.on("click",function(){if(console.log("next clicked"),this.currentArticleIndex!==this.items.length-1&&this.canStartNewAnimation===!0&&this.isAnimating===!1){if(this.parallaxEnabled===!0){var t=0-Math.round(this.itemWidth/2),i=-1,e=-1,n=-1;this.items[this.currentArticleIndex+1].translateImages(t,i,e,n,null)}this.handleChange(this.changeVelocityThreshold,1600,-.01)}}.bind(this)),this.add(this.prevMod).add(this.prev),this.add(this.nextMod).add(this.next)),this.configurePrevNext(this.currentArticleIndex),this.items[this.currentArticleIndex].currentIndex=-1},this.add(this.container),this.sync.on("start",function(){if(this.canStartNewAnimation&&this.isAnimating===!1){this.currentTravelAmount=0,this.ignoreEnd=!1;for(var t=0;t<this.itemModifiers.length;t++){var i=1;t===this.currentArticleIndex&&(i=0),this.itemModifiers[t].setTransform(r.translate(f.getModifierX(this.itemModifiers[t]),0,i))}}this.isAnimating===!0&&(this.ignoreEnd=!0)}.bind(this)),this.sync.on("update",function(t){if(this.isAnimating===!1&&this.ignoreEnd===!1){this.canStartNewAnimation=!1;var i=!1;if(0===this.currentArticleIndex&&this.currentTravelAmount>0&&(i=!0),this.currentArticleIndex===this.items.length-1&&this.currentTravelAmount<0&&(i=!0),i===!1||Math.abs(this.currentTravelAmount)<=this.itemWidth*this.edgeMaxPosition){this.currentTravelAmount=this.getTravelAmount();for(var e=Math.abs(this.currentTravelAmount/this.itemWidth),n=e*this.itemWidth*this.concealRatio,s=0-e*(this.itemWidth*this.revealRatio/1),o=0-e*(this.itemWidth*this.revealRatio/2),a=0-this.itemWidth*this.revealRatio-this.itemWidth*this.revealRatio*(0-e),h=-1,u=-1,l=-1,c=-1,p=0;p<this.itemModifiers.length;p++)this.parallaxEnabled===!0&&(h=-1,u=-1,l=-1,c=-1,p===this.currentArticleIndex?this.currentTravelAmount>0?(h=0-n,u=0-s,l=0-o):(h=n,u=s,l=o):p<this.currentArticleIndex?(h=0-a,u=0-a):(h=a,u=a),this.items[p].translateImages(h,u,l,c,null)),this.itemModifiers[p].setTransform(r.translate(f.getModifierX(this.itemModifiers[p])+t.position,0,f.getModifierZ(this.itemModifiers[p])))}}}.bind(this)),this.sync.on("end",function(t){this.handleChange(t.velocity,null,null)}.bind(this)),this.handleChange=function(t,i,e){if(this.isAnimating===!1&&this.ignoreEnd===!1){this.isAnimating=!0;var n=this.easings.spring,s=this.getTravelAmount();if(null!=e&&(s=e),Math.abs(s)>=this.itemWidth*this.changePositionThreshold||Math.abs(t)>=this.changeVelocityThreshold){var o=-1,a=-1,h=-1,u=-1,l=this.minDuration;l=null!=i?i:f.map(Math.abs(t),0,5,this.minDuration,this.maxDuration,!0),n.duration=l;var c=null;if(0>s)if(this.currentArticleIndex===this.itemModifiers.length-1)this.returnToBase();else{this.configurePrevNext(this.currentArticleIndex+1);for(var p=0;p<this.itemModifiers.length;p++){c=this.itemWidth+s;var d=function(){};this.itemModifiers[p].setTransform(r.translate(f.getModifierX(this.itemModifiers[p])-c-this.itemSpacing,0,f.getModifierZ(this.itemModifiers[p])),n,d()),this.parallaxEnabled===!0&&(o=-1,a=-1,h=-1,u=-1,p!==this.currentArticleIndex?(o=0,a=0,h=0,u=1):u=1,p===this.currentArticleIndex&&null!=i&&(o=50,a=-250,h=-150),this.items[p].translateImages(o,a,h,u,n))}setTimeout(function(){this.isAnimating=!1,this.canStartNewAnimation=!0,this.currentArticleIndex+=1,this.fixPositions("next",!0)}.bind(this),n.duration)}else if(0===this.currentArticleIndex)this.returnToBase();else{this.configurePrevNext(this.currentArticleIndex-1);for(var m=0;m<this.itemModifiers.length;m++){c=this.itemWidth-s;var d=function(){};this.itemModifiers[m].setTransform(r.translate(f.getModifierX(this.itemModifiers[m])+c+this.itemSpacing,0,f.getModifierZ(this.itemModifiers[m])),n,d()),this.parallaxEnabled===!0&&(o=-1,a=-1,h=-1,u=-1,m!==this.currentArticleIndex?(o=0,a=0,h=0,u=1):u=1,m===this.currentArticleIndex&&null!=i&&(o=-50,a=250,h=150),this.items[m].translateImages(o,a,h,u,n))}setTimeout(function(){this.isAnimating=!1,this.canStartNewAnimation=!0,this.currentArticleIndex-=1,this.fixPositions("previous",!0)}.bind(this),n.duration)}}else this.returnToBase()}},this.getTravelAmount=function(){return f.getModifierX(this.itemModifiers[this.currentArticleIndex])},this.returnToBase=function(){var t=this.easings.spring;t.duration=this.minDuration;for(var i=0-this.getTravelAmount(),e=-1,n=-1,s=-1,o=-1,a=0;a<this.itemModifiers.length;a++){var h=1;a===this.currentArticleIndex&&(e=-1,n=-1,s=-1,o=-1,h=0,this.parallaxEnabled===!0&&(e=0,n=0,s=0,o=-1,this.items[a].translateImages(e,n,s,o,t)));var u=function(){};this.itemModifiers[a].setTransform(r.translate(f.getModifierX(this.itemModifiers[a])+i,0,h),t,u())}setTimeout(function(){this.isAnimating=!1,this.canStartNewAnimation=!0,this.fixPositions("",!1)}.bind(this),t.duration)},this.fixPositions=function(t,i){var e=-1,n=0,s=-1,o=-1,a=-1,h=-1;if("next"===t?(e=this.currentArticleIndex-1,n=(e-this.currentArticleIndex)*this.itemWidth-Math.abs(e-this.currentArticleIndex)*this.itemSpacing):"previous"===t&&(e=this.currentArticleIndex+1,n=(e-this.currentArticleIndex)*this.itemWidth+Math.abs(e-this.currentArticleIndex)*this.itemSpacing),-1!==e&&(this.itemModifiers[e].setOpacity(0),this.itemModifiers[e].setTransform(r.translate(n,0,0)),this.itemModifiers[e].setOpacity(1)),this.parallaxEnabled===!0)for(var u=0;u<this.items.length;u++)s=-1,o=-1,a=-1,h=-1,u!==this.currentArticleIndex&&(s=0,o=0,a=0),this.items[u].translateImages(s,o,a,h,null);i===!0&&this.outputEvents.emit("articleChange",{articleIndex:this.currentArticleIndex})},this.reportPositions=function(){for(var t=0;t<this.itemModifiers.length;t++)console.log(t+": "+f.getModifierX(this.itemModifiers[t]))},this.configurePrevNext=function(t){var i=.8;this.webMode===!0&&(0===t?(this.prevMod.setOpacity(0,this.easings.linear),t<this.itemModifiers.length-1&&this.nextMod.setOpacity(i,this.easings.linear)):t===this.itemModifiers.length-1?(this.nextMod.setOpacity(0,this.easings.linear),t>0&&this.prevMod.setOpacity(i,this.easings.linear)):(this.prevMod.setOpacity(i,this.easings.linear),this.nextMod.setOpacity(i,this.easings.linear)))},this.goToIndex=function(t){this.currentArticleIndex=t;for(var i=0;i<this.itemModifiers.length;i++)this.itemModifiers[i].setTransform(r.translate((i-this.currentArticleIndex)*this.itemWidth+(i-this.currentArticleIndex)*this.itemSpacing,0,0))}}var s=t("famous/core/Surface"),o=t("famous/modifiers/StateModifier"),r=t("famous/core/Transform"),a=t("famous/transitions/Easing"),h=t("famous/core/View"),u=t("famous/core/EventHandler"),l=t("famous/surfaces/ContainerSurface"),c=t("famous/inputs/TouchSync"),p=t("famous/inputs/GenericSync"),d=t("famous/inputs/MouseSync"),f=t("utils/inkabinkaUtils");n.prototype=Object.create(h.prototype),n.prototype.constructor=n,e.exports=n}),e("famous/views/SequentialLayout",["require","exports","module","famous/core/OptionsManager","famous/core/Transform","famous/core/ViewSequence","famous/utilities/Utility"],function(t,i,e){function n(t){this._items=null,this._size=null,this._outputFunction=n.DEFAULT_OUTPUT_FUNCTION,this.options=Object.create(this.constructor.DEFAULT_OPTIONS),this.optionsManager=new s(this.options),this.itemSpacing=0,t&&this.setOptions(t)}var s=t("famous/core/OptionsManager"),o=t("famous/core/Transform"),r=t("famous/core/ViewSequence"),a=t("famous/utilities/Utility");n.DEFAULT_OPTIONS={direction:a.Direction.Y,defaultItemSize:[50,50]},n.DEFAULT_OUTPUT_FUNCTION=function(t,i){var e=this.options.direction===a.Direction.X?o.translate(i,0):o.translate(0,i);return{transform:e,target:t.render()}},n.prototype.getSize=function(){return this._size||this.render(),this._size},n.prototype.sequenceFrom=function(t){return t instanceof Array&&(t=new r(t)),this._items=t,this},n.prototype.setOptions=function(){return this.optionsManager.setOptions.apply(this.optionsManager,arguments),this},n.prototype.setItemSpacing=function(t){this.itemSpacing=t},n.prototype.setOutputFunction=function(t){return this._outputFunction=t,this},n.prototype.render=function(){for(var t=0,i=0,e=this.options.direction===a.Direction.X?0:1,n=this.options.direction===a.Direction.X?1:0,s=this._items,o=[];s;){var r,h=s.get();h&&h.getSize&&(r=h.getSize()),r||(r=this.options.defaultItemSize),r[n]!==!0&&(i=Math.max(i,r[n]));var u=this._outputFunction.call(this,h,t,o.length);o.push(u),r[e]&&r[e]!==!0&&(t+=r[e]+this.itemSpacing),s=s.getNext()}return i||(i=void 0),this._size||(this._size=[0,0]),this._size[e]=t,this._size[n]=i,{size:this.getSize(),target:o}},e.exports=n}),e("famous/utilities/Timer",["require","exports","module","famous/core/Engine"],function(t,i,e){function n(t){return l.on(c,t),t}function s(t,i){var e=p(),s=function(){var n=p();n-e>=i&&(t.apply(this,arguments),l.removeListener(c,s))};return n(s)}function o(t,i){var e=p(),s=function(){var n=p();n-e>=i&&(t.apply(this,arguments),e=p())};return n(s)}function r(t,i){if(void 0===i)return void 0;var e=function(){i--,0>=i&&(t.apply(this,arguments),h(e))};return n(e)}function a(t,i){i=i||1;var e=i,s=function(){i--,0>=i&&(t.apply(this,arguments),i=e)};return n(s)}function h(t){l.removeListener(c,t)}function u(t,i){var e,n,o,r,a;return function(){n=this,a=arguments,o=p();var h=function(){var u=p-o;i>u?e=s(h,i-u):(e=null,r=t.apply(n,a))};return e||(e=s(h,i)),r}}var l=t("famous/core/Engine"),c="prerender",p=window.performance?function(){return window.performance.now()
}:function(){return Date.now()};e.exports={setTimeout:s,setInterval:o,debounce:u,after:r,every:a,clear:h}}),e("utils/ArticleIndicator",["require","exports","module","famous/core/Surface","famous/core/RenderNode","famous/modifiers/StateModifier","famous/core/Transform","famous/core/View","famous/utilities/Timer","famous/transitions/Transitionable"],function(t,i,e){function n(){u.apply(this,arguments),s.call(this),o.call(this)}function s(){this.visible=this.options.visible,this.sliderPosition=new l(0),this.backgroundSurface=new r({size:[this.options.width,1],classes:["closeToTop"],properties:{border:"1px solid rgba(128,128,128,.8)"}}),this.sliderSurface=new r({size:[2*this.options.dotRadius,2*this.options.dotRadius],classes:["onTop"],properties:{borderRadius:"7px",border:"1px solid rgba(200,200,200,1)",backgroundColor:"rgba(128,128,128,1)"}}),this.backgroundSurfaceModifier=new a({size:[this.options.width,1],origin:[0,.5]}),this.sliderModifer=new a({origin:[0,.5],size:[2*this.options.dotRadius,2*this.options.dotRadius]}),this.add(this.backgroundSurfaceModifier).add(this.backgroundSurface),this.add(this.sliderModifer).add(this.sliderSurface)}function o(){}var r=t("famous/core/Surface"),a=(t("famous/core/RenderNode"),t("famous/modifiers/StateModifier")),h=t("famous/core/Transform"),u=t("famous/core/View"),l=(t("famous/utilities/Timer"),t("famous/transitions/Transitionable"));n.prototype=Object.create(u.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={visible:!0,width:500,numItems:10,dotRadius:7},n.prototype.setIndex=function(t){var i=Math.round(this.options.width/(this.options.numItems-1)*t)-this.options.dotRadius;this.sliderPosition.set(i,{duration:300,curve:"easeOutBounce"})},n.prototype.setSize=function(t){this.options.width=t,this.backgroundSurface.setSize([t,1]),this.backgroundSurfaceModifier.setSize([t,1])},n.prototype.render=function(){return this.sliderModifer.setTransform(h.translate(this.sliderPosition.get(),0,0)),this.visible?this._node.render():void 0},e.exports=n}),e("utils/topControlsView",["require","exports","module","famous/core/Surface","famous/modifiers/StateModifier","famous/core/Transform","famous/transitions/Easing","famous/core/View","famous/core/EventHandler","famous/views/SequentialLayout","famous/utilities/Utility","./ArticleIndicator"],function(t,i,e){function n(){u.apply(this,arguments),s.call(this)}function s(){this.visible=this.options.visible,this.logoURL=this.options.hasBackButton?"content/images/back.png":"content/images/menu.png",this.size=this.options.size,this.zIndex=this.options.zIndex,this.hasGigya=this.options.hasGigya,this.isStoryline=this.options.isStoryline,this.controlsZ=this.zIndex+1,this.indicatorsZ=this.controlsZ+1,this.topicName="",this.webMode=!1,this.articleIndex=0,this.articleCount=0,this.indicatorSurfaces=[],this.myHeight=0,this.topPadding=0,this.bulletPadding=0,this.modifiers={logo:new r({opacity:0,transform:a.translate(0,0,this.controlsZ)}),share:new r({opacity:0,transform:a.translate(0,0,this.controlsZ)}),topic:new r({opacity:0,transform:a.translate(0,0,this.zIndex)}),indicators:new r({opacity:0,transform:a.translate(0,0,this.indicatorsZ)})},this.easings={opacity:{duration:1e3,curve:h.linear},animateIn:{duration:1e3,curve:h.inOutBack},ease:{duration:1e3,curve:h.outCubic},linearIn:{duration:1e3,curve:h.linear},linearOut:{duration:1e3,curve:h.linear}},this.logoSurface=new o({size:[void 0,void 0],classes:["onTop"]}),this.shareSurface=new o({size:[void 0,void 0],classes:["onTop"]}),this.topicSurface=new o({size:this.size,content:"",classes:["smartTopic","centered","nearTop"]}),this.indicators=new l,this.add(this.modifiers.logo).add(this.logoSurface),this.hasGigya===!0&&this.add(this.modifiers.share).add(this.shareSurface),this.add(this.modifiers.topic).add(this.topicSurface),this.add(this.modifiers.indicators).add(this.indicators)}var o=t("famous/core/Surface"),r=t("famous/modifiers/StateModifier"),a=t("famous/core/Transform"),h=t("famous/transitions/Easing"),u=t("famous/core/View"),l=(t("famous/core/EventHandler"),t("famous/views/SequentialLayout"),t("famous/utilities/Utility"),t("./ArticleIndicator"));n.prototype=Object.create(u.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={visible:!0,size:[void 0,void 0],zIndex:0,hasGigya:!1,hasBackButton:!1,isStoryline:!1},n.prototype.setupControls=function(){var t=this.myHeight-Math.round(2*this.topPadding),i=Math.round(.15*this.myHeight)+1,e=t-i-2,n=this.bulletPadding,s=this.topPadding;this.logoSurface.setSize([t,t]),this.logoSurface.setContent('<img style="cursor: pointer;" src="'+this.logoURL+'" height="'+t+'" />'),this.modifiers.logo.setTransform(a.translate(n,s,this.controlsZ)),this.modifiers.logo.setOpacity(1,this.easings.opacity),this.logoSurface.on("click",function(){this._eventOutput.emit("logo",null)}.bind(this));var o=this.size[0]-this.bulletPadding-t,r=this.topPadding;this.shareSurface.setSize([t,t]),this.shareSurface.setContent('<img style="cursor: pointer;" src="content/images/share.png" width="'+t+'" height="'+t+'" />'),this.modifiers.share.setTransform(a.translate(o,r,this.controlsZ)),this.modifiers.share.setOpacity(1,this.easings.opacity),this.shareSurface.on("click",function(){this._eventOutput.emit("share",null)}.bind(this));var h=0,u=0,l=this.topicName;this.isStoryline&&(l="<span class='icon-inkaBinka-clock-o vertical-middle'></span><span class='vertical-middle'> "+l+"</span>"),this.topicSurface.setContent(l),this.topicSurface.setProperties({fontSize:e+"px",paddingTop:this.topPadding-.2*e+"px"}),this.modifiers.topic.setTransform(a.translate(h,u,this.zIndex)),this.modifiers.topic.setOpacity(1,this.easings.opacity);var c=.8*this.size[0]/2,p=this.size[0]/2-c/2,d=this.myHeight-this.topPadding-i;this.indicators.setOptions({numItems:this.articleCount,dotRadius:i}),this.indicators.setSize(c),this.modifiers.indicators.setSize([c,2*i]),this.modifiers.indicators.setTransform(a.translate(p,d,this.indicatorsZ)),this.modifiers.indicators.setOpacity(1,this.easings.opacity)},n.prototype.setTopicName=function(t,i){this.topicName=t,this.isStoryline=i;var e=this.topicName;this.isStoryline===!0&&(e="<span class='icon-inkaBinka-clock-o vertical-middle'></span><span class='vertical-middle'> "+t+"</span>"),this.topicSurface.setContent(e)},n.prototype.setActiveIndicator=function(t){this.articleIndex=t,this.indicators.setIndex(t)},n.prototype.init=function(t,i,e,n,s,o){this.articleCount=t,this.topicName=i,this.webMode=e,this.topPadding=n,this.myHeight=s,this.bulletPadding=o,this.webMode===!0&&(this.logoURL=this.options.hasBackButton?"content/images/back.png":"content/images/logo.png"),this.setupControls(),this.setActiveIndicator(0)},n.prototype.render=function(){return this.visible?this._node.render():void 0},e.exports=n}),e("utils/bottomControlsView",["require","exports","module","famous/core/Engine","famous/core/Surface","famous/modifiers/StateModifier","famous/core/Transform","famous/transitions/Easing","famous/core/View","famous/core/EventHandler","utils/inkabinkaUtils","famous/inputs/GenericSync","famous/inputs/MouseSync","famous/inputs/TouchSync"],function(t,i,e){function n(){p.apply(this,arguments),s.call(this)}function s(){this.visible=this.options.visible,this.orientation=this.options.orientation,this.size=this.options.size,this.zIndex=this.options.zIndex,this.bulletAreaHeight=this.options.bulletAreaHeight,this.bulletAreaWidth=this.options.bulletAreaWidth,this.hasGigya=this.options.hasGigya,this.isStorylineView=this.options.isStorylineView,this.isUserLoggedIn=!1,this.defaultAvatarImageURL="content/images/avatar_login.png",this.avatarImageURL=this.defaultAvatarImageURL,this.isUserPanelVisible=!1,this.webMode=!1,this.controlsZ=this.zIndex+1,this.myHeight=0,this.minFontSize=11,this.maxFontSize=48,this.bulletPadding=0,this.topPadding=0,this.iconHeight=0,this.avatarX=0,this.avatarY=0,this.logoutWidth=60,this.logoutY=0,this.logoutFontSize=14,this.modifiers={date:new u({opacity:0,transform:l.translate(0,0,this.zIndex)}),datePrevious:new u({opacity:0,transform:l.translate(0,0,this.controlsZ)}),dateNext:new u({opacity:0,transform:l.translate(0,0,this.controlsZ)}),reader:new u({opacity:0,transform:l.translate(0,0,this.controlsZ)}),avatar:new u({opacity:0,transform:l.translate(0,0,this.controlsZ)}),logout:new u({opacity:0,transform:l.translate(0,0,this.controlsZ)})},this.easings={opacity:{duration:1e3,curve:c.linear},animateIn:{duration:1e3,curve:c.inOutBack},ease:{duration:1e3,curve:c.outCubic},linearIn:{duration:1e3,curve:c.linear},linearOut:{duration:1e3,curve:c.linear}},this.readerSurface=new h({size:[void 0,void 0],properties:{cursor:"pointer"},classes:["onTop"]}),this.dateSurface=new h({size:this.size,classes:["smartDate","centered","vertical-middle"]}),this.dateFontSize=Math.round(d.map(this.bulletAreaWidth,320,512,15,20,!0)),this.dateFontSize<this.minFontSize&&(this.dateFontSize=this.minFontSize),this.chevronFontSize=this.dateFontSize+8,this.previousSurface=new h({size:[this.chevronFontSize,this.chevronFontSize],content:'<span class="icon-inkaBinka-chevron-left dateChangeChevron" style="font-size: '+this.chevronFontSize+"px; line-height: "+this.chevronFontSize+'px;"></span>',classes:["onTop"]}),this.previousSurface.on("click",function(){this.canChangeDateBack===!0&&a.emit("changeDate",-1)}.bind(this)),this.nextSurface=new h({size:[this.chevronFontSize,this.chevronFontSize],content:'<span class="icon-inkaBinka-chevron-right dateChangeChevron" style="font-size: '+this.chevronFontSize+"px; line-height: "+this.chevronFontSize+'px;"></span>',classes:["onTop"]}),this.nextSurface.on("click",function(){this.canChangeDateForward===!0&&a.emit("changeDate",1)}.bind(this)),this.syncPos=0,this.sync=new f(function(){return this.syncPos}.bind(this),{syncClasses:[m,g]}),o.call(this),this.dateSurface.pipe(this.sync),this.avatarSurface=new h({size:[void 0,void 0],properties:{cursor:"pointer"},classes:["closeToTop"]}),this.logoutSurface=new h({size:[this.logoutWidth,void 0],content:"Logout",properties:{color:"#444",fontSize:this.logoutFontSize+"px",fontWeight:"bold",cursor:"pointer"},classes:["closeToTop"]}),this.logoutSurface.on("click",function(){this._eventOutput.emit("logout",null)}.bind(this)),this.add(this.modifiers.date).add(this.dateSurface),this.add(this.modifiers.datePrevious).add(this.previousSurface),this.add(this.modifiers.dateNext).add(this.nextSurface),this.add(this.modifiers.reader).add(this.readerSurface),this.hasGigya===!0&&(this.add(this.modifiers.avatar).add(this.avatarSurface),this.add(this.modifiers.logout).add(this.logoutSurface))}function o(){this.sync.on("update",r.bind(this))}function r(t){this.syncPos+=t.delta[0];var i=Math.round(this.syncPos);if(console.log(i),Math.abs(i)>12&&!this.changingDate){var e=-i/Math.abs(i);if(!this.canChangeDateBack&&-1==e)return;if(!this.canChangeDateForward&&1==e)return;this.changingDate=!0,this.syncPos=0,a.emit("changeDate",e)}}var a=t("famous/core/Engine"),h=t("famous/core/Surface"),u=t("famous/modifiers/StateModifier"),l=t("famous/core/Transform"),c=t("famous/transitions/Easing"),p=t("famous/core/View"),d=(t("famous/core/EventHandler"),t("utils/inkabinkaUtils")),f=t("famous/inputs/GenericSync"),m=t("famous/inputs/MouseSync"),g=t("famous/inputs/TouchSync");n.prototype=Object.create(p.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={visible:!0,orientation:"",size:[void 0,void 0],zIndex:0,bulletAreaHeight:0,bulletAreaWidth:0,hasGigya:!1,isStorylineView:!1},n.prototype.setupControls=function(){this.avatarX=this.bulletPadding;var t=this.size[0]-this.bulletPadding-this.iconHeight;"landscape"===this.orientation&&(this.avatarX=3*this.bulletPadding,t=this.size[0]-3*this.bulletPadding-this.iconHeight);var i=0;this.readerSurface.setSize([this.iconHeight,this.iconHeight]),this.readerSurface.setContent('<div style="background-image: url(content/images/full_story.png); background-repeat: no-repeat; background-size: cover; width: '+this.iconHeight+"px; height: "+this.iconHeight+"px; border-radius: "+Math.round(this.iconHeight/2)+'px;">&nbsp;</div>'),this.modifiers.reader.setTransform(l.translate(t,i,this.controlsZ)),this.modifiers.reader.setOpacity(1,this.easings.opacity),this.readerSurface.on("click",function(){this._eventOutput.emit("reader",null)}.bind(this)),this.avatarY=0,this.avatarSurface.setSize([this.iconHeight,this.iconHeight]),this.setAvatarContent(),this.modifiers.avatar.setTransform(l.translate(this.avatarX,this.avatarY,this.controlsZ)),this.modifiers.avatar.setOpacity(1,this.easings.opacity),this.avatarSurface.on("click",function(){this.isUserLoggedIn===!1?this._eventOutput.emit("avatar",null):this.toggleUserPanel()}.bind(this)),this.logoutSurface.setSize([this.logoutWidth,this.iconHeight])},n.prototype.setAvatarContent=function(){this.avatarSurface.setContent('<div style="background-image: url('+this.avatarImageURL+"); background-repeat: no-repeat; background-size: cover; width: "+this.iconHeight+"px; height: "+this.iconHeight+"px; border-radius: "+Math.round(this.iconHeight/2)+'px;">&nbsp;</div>')},n.prototype.init=function(t){this.webMode=t.webMode,this.myHeight=t.height,this.topPadding=t.topPadding,this.bulletPadding=t.bulletPadding,this.iconHeight=this.myHeight-this.topPadding,this.logoutY=Math.round(this.iconHeight/2)-Math.round(this.logoutFontSize/2),this.modifiers.logout.setTransform(l.translate(this.avatarX-this.logoutWidth,this.logoutY,this.controlsZ)),this.setAvatar(t.avatarImageURL),this.setupControls()},n.prototype.setAvatar=function(t){null!=t&&""!==t?(this.avatarImageURL=t,this.isUserLoggedIn=!0):(this.avatarImageURL=this.defaultAvatarImageURL,this.isUserLoggedIn=!1),this.setAvatarContent(),this.closeUserPanel()},n.prototype.openUserPanel=function(){this.modifiers.avatar.setTransform(l.translate(this.avatarX+this.logoutWidth,this.avatarY,this.controlsZ),this.easings.ease),this.modifiers.logout.setTransform(l.translate(this.avatarX,this.logoutY,this.controlsZ),this.easings.ease),this.modifiers.logout.setOpacity(1,this.easings.ease),this.isUserPanelVisible=!0},n.prototype.closeUserPanel=function(){this.modifiers.avatar.setTransform(l.translate(this.avatarX,this.avatarY,this.controlsZ),this.easings.ease),this.modifiers.logout.setTransform(l.translate(this.avatarX-this.logoutWidth,this.logoutY,this.controlsZ),this.easings.ease),this.modifiers.logout.setOpacity(0,this.easings.ease),this.isUserPanelVisible=!1},n.prototype.toggleUserPanel=function(){this.isUserPanelVisible===!0?this.closeUserPanel():this.openUserPanel()},n.prototype.setDate=function(t){var i=Math.round(d.map(this.bulletAreaWidth,320,512,15,20,!0));i<this.minFontSize&&(i=this.minFontSize);var e=0,n=Math.round(d.map(i,12,20,0,18,!0)),s="style='cursor: pointer; font-size: @FONTSIZEpx; line-height: @FONTSIZEpx;'".replace(/@FONTSIZE/g,i),o=new Date,r=new Date(parseInt(d.getParameterByName("y"))||parseInt(o.getFullYear()),parseInt(d.getParameterByName("m"))-1||parseInt(o.getMonth()),parseInt(d.getParameterByName("d"))||parseInt(o.getDate())),a=new Date(parseInt(o.getFullYear()),parseInt(o.getMonth()),parseInt(o.getDate())),h=new Date(2014,3,1);this.canChangeDateBack=r>=h&&this.isStorylineView===!1,this.canChangeDateForward=r.toString()!=a.toString()&&this.isStorylineView===!1;var u="<span @STYLE>@DATE</span>".replace("@STYLE",s).replace("@DATE",t);this.dateSurface.setContent(u),this.modifiers.date.setTransform(l.translate(e,n,this.zIndex)),this.modifiers.date.setOpacity(1,this.easings.opacity);var c=Math.round(11*i/2),p=this.bulletAreaWidth,f=Math.round(this.chevronFontSize/2);this.modifiers.datePrevious.setTransform(l.translate(Math.round(p/2)-c-f,n,this.zIndex)),this.modifiers.dateNext.setTransform(l.translate(Math.round(p/2)+c-this.chevronFontSize,n,this.zIndex)),this.modifiers.datePrevious.setOpacity(this.canChangeDateBack===!0?1:0),this.modifiers.dateNext.setOpacity(this.canChangeDateForward===!0?1:0)},n.prototype.render=function(){return this.visible?this._node.render():void 0},e.exports=n}),e("articles/heroView",["require","exports","module","famous/core/Surface","famous/modifiers/StateModifier","famous/core/Transform","famous/transitions/Easing","famous/core/View","famous/core/EventHandler","famous/surfaces/ContainerSurface","utils/inkabinkaUtils"],function(t,i,e){function n(){u.apply(this,arguments),s.call(this)}function s(){this.visible=this.options.visible,this.smartArticle=this.options.smartArticle,this.orientation=this.options.orientation,this.smartArticle=this.options.smartArticle,this.size=this.options.size,this.isIE=this.options.isIE,this.itemIndex=this.options.itemIndex,this.images=[],this.headlineFontSizeFactor=.1,this.headlineFontSize=0,this.headlineLineHeightMultiplier=1.1,this.currentIndex=-1,this.doImageScaling=!0,this.orientationMoniker="portrait"===this.orientation?"-p":"-l",this.easings={opacity:{duration:2e3,curve:h.linear},scaleOut:{duration:2e3,curve:h.easeOut},scaleIn:{duration:2e3,curve:h.easeIn},pushIn:{duration:8e3,curve:h.easeInOut}},this.container=new l({properties:{overflow:"hidden",backgroundColor:"#AAA"},size:this.size});for(var t=0;t<this.smartArticle.smartBullets.length;t++){var i=this.smartArticle.smartBullets[t];if(i.imageID){var e="";e=0===t?'<img id="heroContainer'+this.itemIndex+'" src="'+SiteConfig.cdnURL+i.imageID+this.orientationMoniker+'.jpeg" width="'+this.size[0]+'" height="'+this.size[1]+'"/>':'<img src="'+SiteConfig.cdnURL+i.imageID+this.orientationMoniker+'.jpeg" width="'+this.size[0]+'" height="'+this.size[1]+'"/>';var n="portrait"===this.orientation?"supplementalRight":"supplementalCenter",s=t;if("supplemental"===i.imageType){var u=this.size[0],c=this.size[1];e='<div class="'+n+'" style="width: '+u+"px; height: "+c+'px;"><img src="'+SiteConfig.cdnURL+i.imageID+this.orientationMoniker+'.jpeg" class="smartSupplementalImage" /></div>',s+=10}var p=new o({size:this.size,content:e}),d=new r({transform:a.multiply(a.translate(0,0,s),a.scale(1,1,1)),opacity:0,origin:[.5,.5]}),f={bulletIndex:t,surface:p,modifier:d,imageType:i.imageType};this.images.push(f),this.container.add(d).add(p)}}this.headlineFontSize=this.getHeadlineFontSize(),this.headlineSurface=new o({size:[void 0,void 0],content:'<span style="font-size: '+this.headlineFontSize+"px; line-height: "+Math.round(this.headlineFontSize*this.headlineLineHeightMultiplier)+'px;">'+this.smartArticle.headline+"</span>",classes:["smartHeadline"]}),this.headlineMod=new r({transform:a.translate(0,0,20)}),this.containerMod=new r({transform:a.translate(0,0,0)}),this.container.add(this.headlineMod).add(this.headlineSurface),this._node.add(this.containerMod).add(this.container),this.loadImage(0,!0)}var o=t("famous/core/Surface"),r=t("famous/modifiers/StateModifier"),a=t("famous/core/Transform"),h=t("famous/transitions/Easing"),u=t("famous/core/View"),l=(t("famous/core/EventHandler"),t("famous/surfaces/ContainerSurface")),c=t("utils/inkabinkaUtils");n.prototype=Object.create(u.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={orientation:"",smartArticle:null,size:[void 0,void 0],isIE:!1,itemIndex:-1,storyline:null,visible:!1},n.prototype.getHeadlineFontSize=function(){return Math.round(this.size[0]>this.size[1]?this.size[1]*this.headlineFontSizeFactor:this.size[0]*this.headlineFontSizeFactor)},n.prototype.loadImage=function(t,i){for(var e=null,n=i,s=0;s<this.images.length;s++)if(this.images[s].bulletIndex===t){this.currentIndex!==s&&(n=!0),this.currentIndex=s,e=this.images[s];break}if(null!=e&&n===!0)if(e.modifier.setTransform(a.multiply(a.translate(c.getModifierX(e.modifier),0,c.getModifierZ(e.modifier)),a.scale(1,1))),i===!0)e.modifier.setOpacity(1);else if(e.modifier.setOpacity(1,this.easings.opacity),this.doImageScaling===!0&&this.isIE===!1&&"full"===e.imageType&&n===!0){var o=this.easings.pushIn;t>0&&(o.duration=12e3),e.modifier.setTransform(a.scale(1.15,1.15),o)}},n.prototype.translateImages=function(t,i,e,n,s){for(var o=0;o<this.images.length;o++){var r=this.images[o].modifier,h=this.images[o].imageType;"full"===h&&-1!==t?-1===n?r.setTransform(a.multiply(a.translate(t,0,c.getModifierZ(r)),c.getModifierScaleTransform(r)),s):r.setTransform(a.multiply(a.translate(t,0,c.getModifierZ(r)),a.scale(n,n)),s):"supplemental"===h&&-1!==i&&r.setTransform(a.translate(i,0,c.getModifierZ(r)),s)}-1!==e&&this.headlineMod.setTransform(a.translate(e,0,20),s)},n.prototype.resetImages=function(){this.currentIndex=-1;for(var t=0;t<this.images.length;t++)this.images[t].modifier.setOpacity(0===t?1:0),this.images[t].modifier.setTransform(a.scale(1,1))},n.prototype.show=function(){this.visible=!0},n.prototype.hide=function(){this.visible=!1},n.prototype.render=function(){return this.visible?this._node.render():void 0},e.exports=n}),e("articles/bulletsView",["require","exports","module","famous/core/Surface","famous/modifiers/StateModifier","famous/core/Transform","famous/transitions/Easing","famous/core/View","famous/core/EventHandler","utils/inkabinkaUtils"],function(t,i,e){function n(t){h.apply(this),this.outputEvents=new u,u.setOutputHandler(this,this.outputEvents),this.orientation="",this.size=[void 0,void 0],this.zIndex=0,this.bulletPadding=0,null!=t.orientation&&(this.orientation=t.orientation),null!=t.size&&(this.size=t.size),null!=t.zIndex&&(this.zIndex=t.zIndex),null!=t.bulletPadding&&(this.bulletPadding=t.bulletPadding),this.minFontSize=8,this.maxFontSize=28,this.fontSize=10,this.lineHeight=10,this.lineHeightMultiplier=1.2,this.minSpacerHeight=2,this.maxSpacerHeight=10,this.displayInterval=2e3,this.timer=null,this.bullets=[],this.bulletSurfaces=[],this.bulletModifiers=[],this.spacerSurfaces=[],this.spacerModifiers=[],this.bulletHeights=[],this.bulletClass="smartBullet",this.eachSpacerHeight=1,this.nextBulletPosition=0,this.easings={opacity:{duration:1e3,curve:a.linear},animateIn:{duration:1e3,curve:a.inOutBack},ease:{duration:1e3,curve:a.outCubic},linearIn:{duration:1e3,curve:a.linear},linearOut:{duration:1e3,curve:a.linear}},this.bullet1Surface=new s({content:"",size:[void 0,void 0],classes:[this.bulletClass]}),this.bullet2Surface=new s({content:"",size:[void 0,void 0],classes:[this.bulletClass]}),this.bullet3Surface=new s({content:"",size:[void 0,void 0],classes:[this.bulletClass]}),this.bullet4Surface=new s({content:"",size:[void 0,void 0],classes:[this.bulletClass]}),this.bulletSurfaces.push(this.bullet1Surface),this.bulletSurfaces.push(this.bullet2Surface),this.bulletSurfaces.push(this.bullet3Surface),this.bulletSurfaces.push(this.bullet4Surface),this.bullet1Modifier=new o({opacity:0}),this.bullet2Modifier=new o({opacity:0}),this.bullet3Modifier=new o({opacity:0}),this.bullet4Modifier=new o({opacity:0}),this.bulletModifiers.push(this.bullet1Modifier),this.bulletModifiers.push(this.bullet2Modifier),this.bulletModifiers.push(this.bullet3Modifier),this.bulletModifiers.push(this.bullet4Modifier),this._node.add(this.bullet1Modifier).add(this.bullet1Surface),this._node.add(this.bullet2Modifier).add(this.bullet2Surface),this._node.add(this.bullet3Modifier).add(this.bullet3Surface),this._node.add(this.bullet4Modifier).add(this.bullet4Surface),this.spacer1Surface=new s({content:"&nbsp;",size:[void 0,1],classes:["smartSpacer"]}),this.spacer2Surface=new s({content:"&nbsp;",size:[void 0,1],classes:["smartSpacer"]}),this.spacer3Surface=new s({content:"&nbsp;",size:[void 0,1],classes:["smartSpacer"]}),this.spacerSurfaces.push(this.spacer1Surface),this.spacerSurfaces.push(this.spacer2Surface),this.spacerSurfaces.push(this.spacer3Surface),this.spacer1Modifier=new o({opacity:0}),this.spacer2Modifier=new o({opacity:0}),this.spacer3Modifier=new o({opacity:0}),this.spacerModifiers.push(this.spacer1Modifier),this.spacerModifiers.push(this.spacer2Modifier),this.spacerModifiers.push(this.spacer3Modifier),this._node.add(this.spacer1Modifier).add(this.spacer1Surface),this._node.add(this.spacer2Modifier).add(this.spacer2Surface),this._node.add(this.spacer3Modifier).add(this.spacer3Surface),this.setBulletAttributes=function(t){this.nextBulletPosition=0;var i=this.size[0]-2*this.bulletPadding,e=l.getBulletSizing(this.bullets,i,this.size[1],this.minFontSize,this.maxFontSize,this.lineHeightMultiplier,this.minSpacerHeight,this.maxSpacerHeight,this.bulletClass);this.fontSize=e.fontSize,this.lineHeight=parseInt(this.fontSize*this.lineHeightMultiplier),this.eachSpacerHeight=e.eachSpacerHeight,this.bulletHeights=e.bulletHeights;for(var n=0;n<this.bulletSurfaces.length;n++)this.bulletSurfaces[n].setSize([this.size[0]-2*this.bulletPadding,e.bulletHeights[n]]);for(var s=0;s<this.spacerSurfaces.length;s++)this.spacerSurfaces[s].setSize([this.size[0]-2*this.bulletPadding,1]);t&&t()},this.drawBullet=function(t){if(0===t)this.nextBulletPosition+=this.eachSpacerHeight;else{var i=2,e=this.nextBulletPosition+this.eachSpacerHeight;this.spacerModifiers[t-1].setOpacity(0),this.spacerModifiers[t-1].setTransform(r.translate(this.bulletPadding,e,this.zIndex)),this.spacerModifiers[t-1].setOpacity(1,this.easings.linearIn),this.nextBulletPosition+=this.eachSpacerHeight*i}var n=this.nextBulletPosition,s=n+this.bulletHeights[t];this.bulletModifiers[t].setOpacity(0),this.bulletModifiers[t].setTransform(r.translate(this.bulletPadding,s,this.zIndex)),this.bulletModifiers[t].setOpacity(1,this.easings.linearIn),this.bulletModifiers[t].setTransform(r.translate(this.bulletPadding,n,this.zIndex),this.easings.ease,function(){this.outputEvents.emit("bulletChange",{index:t})}.bind(this)),t<this.bullets.length-1&&(this.nextBulletPosition+=this.bulletHeights[t],this.timer=setTimeout(function(){this.drawBullet(t+1)}.bind(this),this.displayInterval))},this.drawBullets=function(){this.drawBullet(0)},this.haltAll=function(){this.timer&&clearTimeout(this.timer);for(var t=0;t<this.bulletModifiers.length;t++)this.bulletModifiers[t].halt();for(var i=0;i<this.spacerModifiers.length;i++)this.spacerModifiers[i].halt()},this.removeAllBullets=function(t,i){this.haltAll();var e=this.easings.linearOut;null!=t&&(e.duration=t);for(var n=0;n<this.bulletModifiers.length;n++)n<this.bulletModifiers.length-1?this.bulletModifiers[n].setOpacity(0,e):this.bulletModifiers[n].setOpacity(0,e,function(){i&&i()});for(var s=0;s<this.spacerModifiers.length;s++)this.spacerModifiers[s].setOpacity(0,e)},this.loadBullets=function(t,i){this.bullets=t,this.articleIndex=i,this.setBulletAttributes(function(){this.removeAllBullets(null,function(){for(var t=0;t<this.bulletSurfaces.length;t++)this.bullets[t]&&this.bulletSurfaces[t].setContent('<div style="font-size: '+this.fontSize+"px; line-height: "+this.lineHeight+'px;">'+this.bullets[t].text+"</div>")}.bind(this))}.bind(this))}}var s=t("famous/core/Surface"),o=t("famous/modifiers/StateModifier"),r=t("famous/core/Transform"),a=t("famous/transitions/Easing"),h=t("famous/core/View"),u=t("famous/core/EventHandler"),l=t("utils/inkabinkaUtils");n.prototype=Object.create(h.prototype),n.prototype.constructor=n,e.exports=n}),e("dock/DockToggleButton",["require","exports","module","famous/core/Surface","famous/core/RenderNode","famous/core/Modifier","famous/core/Transform","famous/core/View","famous/transitions/Transitionable"],function(t,i,e){function n(){u.apply(this,arguments),s.call(this),o.call(this)}function s(){this.visible=this.options.visible,this.state=this.options.state,this.rotation=new l(0),this.surface=new r({size:[!1,!1],content:"<div class='icon-inkaBinka-clock-o'></div>",classes:["dockToggleButton","onTop"]}),this.modifier=new a({size:[50*this.options.scale,50*this.options.scale],origin:[.5,.5]}),this.surface.pipe(this._eventOutput),this.add(this.modifier).add(this.surface)}function o(){}var r=t("famous/core/Surface"),a=(t("famous/core/RenderNode"),t("famous/core/Modifier")),h=t("famous/core/Transform"),u=t("famous/core/View"),l=t("famous/transitions/Transitionable");n.prototype=Object.create(u.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={visible:!0,state:1,scale:1},n.prototype.rotate=function(){},n.prototype.render=function(){return this.modifier.setTransform(h.rotateZ(this.rotation.get())),this.visible?this._node.render():void 0},e.exports=n}),e("dock/InkaBinkaScroll",["require","exports","module","famous/core/Engine","famous/core/Surface","famous/core/RenderNode","famous/core/Modifier","famous/core/Transform","famous/core/View","famous/utilities/Timer","famous/surfaces/ContainerSurface","famous/inputs/GenericSync","famous/inputs/MouseSync","famous/inputs/TouchSync","famous/transitions/Transitionable","famous/math/Utilities"],function(t,i,e){function n(){S.apply(this,arguments),s.call(this),u.call(this)}function s(){this.visible=this.options.visible,this.scale=1,this.horizontal=window.innerWidth>window.innerHeight,this.isDragging=!1,this.itemRotation=new M(0),this.loadingX=new M(0),this.loadingY=new M(0),this.pos=new M(0),this.position=function(){return this.horizontal?[0,this.pos.get()]:[this.pos.get(),0]},this.sync=new x(function(){return this.position()}.bind(this),{syncClasses:[I,T]});var t=this.horizontal?100:300;this.itemSpacing=t*this.options.scale}function o(){this.sync.on("start",r.bind(this)),this.sync.on("update",a.bind(this)),this.sync.on("end",h.bind(this))}function r(){this.isDragging=!0}function a(t){var i=this.horizontal?t.delta[0]:t.delta[1],e=this.horizontal?t.delta[0]:t.delta[1],n=this.pos.get()+e;Math.abs(i)>1?(this.pos.set(n),this.velocity=i):this.velocity=0}function h(){this.isDragging=!1,Math.abs(this.velocity)>1&&(this.pos.halt(),this.pos.set(this.pos.get()+.1*Math.pow(this.velocity,3),{duration:700,curve:"easeOut"}),this.velocity=0)}function u(){o.call(this)}function l(t){this.itemSelected=t.index;var i=1400;this.itemRotation.set(Math.PI,{duration:i},function(){this._eventOutput.emit("itemSelected",t),this.itemSelected=null,t.setBackSide=!1}.bind(this));var e=this.horizontal?1400*this.scale:-300*this.scale,n=this.horizontal?300*this.scale:-1024*this.scale;this.loadingX.set(e,{duration:i}),this.loadingY.set(n,{duration:i})}function c(){var t=(this.dataset.length,3);this.pos.halt(),this.pos.set(t*this.itemSpacing,{duration:100,curve:"easeOut"})}function p(){var t=this.dataset.length,i=4;this.pos.halt(),2==t&&(i=3.8),this.pos.set(this.itemSpacing*(i-t),{duration:100,curve:"easeOut"})}function d(){this.pos.halt(),this.pos.set(0,{duration:100,curve:"easeOut"})}function f(t){this.pos.halt(),console.log(t),this.pos.set(t,{duration:100,curve:"easeOut"})}function m(){for(var t=this.dataset.length,i=0;t>i;i++){var e=this.dataset[i],n=i*this.itemSpacing+this.pos.get();n+=Math.pow(z.clamp(n,[0,3e3]),2)/90;var s=400*this.options.scale;n>s&&0==i&&!this.isDragging&&c.call(this),s>=n&&i==this.dataset.length-1&&!this.isDragging&&p.call(this);var o=this.horizontal?10*this.scale:10*this.scale,r=o+170*Math.sin(Math.PI+n/500),a=1,h=800*this.options.scale;Math.abs(n)>h&&(a=1/((n-h)/10));var u=z.clamp((250+.5*n)/400,[.2,1.6]),l=w.multiply(w.translate(n,r,1),w.scale(u,u,1));this.itemSelected==i&&(l=v.call(this,e,n,r,u,!1)),e.modifier.setTransform(l),e.modifier.setOpacity(a)}}function g(){for(var t=this.dataset.length,i=70,e=0;t>e;e++){var n=this.dataset[t-1-e],s=i+e*this.itemSpacing+this.pos.get();s-=Math.pow(z.clamp(s,[0,3e3])/3,2)/600;var o=i;if(s>o&&0==e&&!this.isDragging&&d.call(this),o>=s&&e==t-1&&!this.isDragging){var r=-e*this.itemSpacing;f.call(this,r)}var a=window.innerHeight<1024?0:80,h=-a*this.options.scale+200*Math.sin(-.1*Math.PI+s/1024),u=1,l=window.innerHeight;(s>l||i>s)&&(u=1/((i-s)/3));var c,p=z.clamp(1-(s-i)/(2048*this.scale),[.6,1.3]);c=this.itemSelected==t-e-1?v.call(this,n,h,s,p,!0):w.multiply(w.translate(h,s,1),w.scale(p,p,1)),n.modifier.setTransform(c),n.modifier.setOpacity(u)}}function v(t,i,e,n,s){var o=this.itemRotation.get(),r=e+this.loadingY.get(),a=i-this.loadingX.get(),h=n+Math.pow(o,4),u=w.multiply(w.translate(a,r,100),w.scale(h,h,100));o>Math.PI/2&&!t.setBackSide&&(t.setBackSide=!0,t.setProperties({backgroundColor:"white",backgroundImage:"inherit"}),t.setContent(""),t.addClass("onTop"));var l=s?0:o,c=s?-o:0,p=w.rotate(l,c,0);return w.multiply(u,p)}var y=(t("famous/core/Engine"),t("famous/core/Surface"),t("famous/core/RenderNode")),_=t("famous/core/Modifier"),w=t("famous/core/Transform"),S=t("famous/core/View"),b=(t("famous/utilities/Timer"),t("famous/surfaces/ContainerSurface")),x=t("famous/inputs/GenericSync"),I=t("famous/inputs/MouseSync"),T=t("famous/inputs/TouchSync"),M=t("famous/transitions/Transitionable"),z=t("famous/math/Utilities");
n.prototype=Object.create(S.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={visible:!0,scale:1},n.prototype.sequenceFrom=function(t){this.dataset=t,this._node=new y;var i=this.horizontal?[2048*this.scale,700*this.scale]:[700*this.scale,2048*this.scale];this.container=new b({size:i}),this.container.pipe(this.sync),this.add(new _({origin:[0,0]})).add(this.container);for(var e=0;e<this.dataset.length;e++){var n=this.dataset[e];n.modifier=new _({origin:[0,0],size:[!1,!1]}),n.index=e,this.container.add(n.modifier).add(n),n.on("click",function(t){l.call(this,t)}.bind(this,n))}this.horizontal?p.call(this):d.call(this)},n.prototype.render=function(){return this.dataset&&(this.horizontal?m.call(this):g.call(this)),this.visible?this._node.render():void 0},e.exports=n}),e("dock/Timeline",["require","exports","module","famous/core/Surface","famous/core/RenderNode","famous/core/Modifier","famous/core/Transform","famous/core/View","famous/utilities/Timer","./InkaBinkaScroll","famous/surfaces/ContainerSurface","famous/math/Utilities","famous/core/ViewSequence","famous/core/Engine"],function(t,i,e){function n(){c.apply(this,arguments),s.call(this)}function s(){this.visible=this.options.visible,this.scale=this.options.scale,this.horizontal="horizontal"==this.options.orientation;var t=this.horizontal?[2048*this.scale,300*this.scale]:[300*this.scale,2048*this.scale];this.container=new d({size:t}),this.items=[],this.inkaScrollView=new p({direction:this.horizontal?0:1,scale:this.scale});var i=this.horizontal?[0,50*this.scale,0]:[50*this.scale,0,0];this.container.add(new u({size:t,transform:l.translate(i[0],i[1],0)})).add(this.inkaScrollView),this.add(this.container),this.container.pipe(this.inkaScrollView),this.container.pipe(this._eventOutput)}function o(t){var i=t.stories;this.items=[];for(var e=0;e<i.length;e++){var n=null,s=[520*this.scale,320*this.scale],o=i[e];n=new h({content:"<label class='date'>"+o.dateName+"</label><label class='headline'>"+o.headline+"</label>",classes:["timeline",this.options.orientation],size:s,properties:{backgroundImage:"url("+o.imageURL+")",fontSize:a(this.scale)}}),n.storylineID=t.id,n.storyID=o.smartArticleID,this.items.push(n)}this.inkaScrollView.sequenceFrom(this.items),this.inkaScrollView.on("itemSelected",r)}function r(t){f.emit("loadStoryline",{storylineID:t.storylineID,storyID:t.storyID})}function a(t){return Math.ceil(16-(1-t)/1.5)+"px"}var h=t("famous/core/Surface"),u=(t("famous/core/RenderNode"),t("famous/core/Modifier")),l=t("famous/core/Transform"),c=t("famous/core/View"),p=(t("famous/utilities/Timer"),t("./InkaBinkaScroll")),d=t("famous/surfaces/ContainerSurface"),f=(t("famous/math/Utilities"),t("famous/core/ViewSequence"),t("famous/core/Engine"));n.prototype=Object.create(c.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={visible:!0,scale:1,orientation:"horizontal"},n.prototype.setStoryline=function(t){o.call(this,t)},n.prototype.render=function(){return this.visible?this._node.render():void 0},e.exports=n}),e("dock/Dock",["require","exports","module","famous/core/Surface","famous/core/Engine","famous/surfaces/ContainerSurface","famous/core/RenderNode","famous/modifiers/StateModifier","famous/core/Modifier","famous/core/Transform","famous/core/View","famous/utilities/Timer","famous/inputs/GenericSync","famous/inputs/MouseSync","famous/inputs/TouchSync","famous/transitions/Transitionable","famous/math/Utilities","famous/transitions/Easing","./DockToggleButton","./Timeline"],function(t,i,e){function n(){v.apply(this,arguments),this.open=!1,u.call(this)}function s(){this.visible=this.options.visible,this.horizontal="horizontal"==this.options.orientation,this._node=new d,this.scale=this.options.size/2048,this.scale<.65&&!this.horizontal&&window.innerHeight>=1024&&(this.scale=.65),this.scale<.5&&!this.horizontal&&(this.scale=.5),this.scale<.4&&(this.scale=.4),this.dockHeight=550*this.scale,this.dockPos=new S(this.dockHeight),this.dockPosition=function(){return this.horizontal?[0,this.dockPos.get()]:[this.dockPos.get(),0]};var t=this.horizontal?[2048*this.scale,700*this.scale]:[700*this.scale,2048*this.scale];this.container=new p({size:[!1,!1],classes:["onTop"]});var i=this.horizontal?[.5,1]:[0,0];this.dockModifier=new m({origin:i,size:t}),this.add(this.dockModifier).add(this.container),this.backgroundPositionModifier=new f({origin:[0,0],size:[200*this.scale,200*this.scale]}),this.sync=new y(function(){return this.dockPosition()}.bind(this),{syncClasses:[_,w]}),o.call(this);var e=this.horizontal?[0,-10,20,5]:[-10,0,20,5];e=e.map(function(t){return t*this.scale+"px"}.bind(this)).join(" "),this.background=new l({content:'<svg width="100%" viewBox="0,0,100,100"><circle class="shadow" cx="50" cy="50" r="50"  fill="rgba(2,87,125,1)" /></svg>'}),this.background.pipe(this.sync),this.arrow=new I({scale:this.scale});var n=this.horizontal?[.5,0]:[0,.5];this.arrowModifier=new m({size:[50*this.scale,50*this.scale],origin:n}),this.arrow.pipe(this.sync),this.container.add(this.arrowModifier).add(this.arrow),this.container.add(this.backgroundPositionModifier).add(this.background),this.arrow.on("click",this.toggle.bind(this)),this.background.on("click",this.toggle.bind(this)),this.timeline=new T({scale:this.scale,orientation:this.options.orientation}),this.timelineModifier=new m({origin:[.5,0]}),this.container.add(this.timelineModifier).add(this.timeline),this.storylineLabel=new l({content:"<h2>Storyline</h2>",classes:["storylineLabel"]}),this.storylineTitle=new l({content:"<h2>TITLE</h2>",classes:["storylineTitle"]});var s=this.horizontal?[window.innerWidth/2,30]:[t[0],30],r=this.horizontal?t[0]/2-s[0]:Math.ceil((2e3*this.scale-window.innerHeight)/2);!this.horizontal&&window.innerHeight>=960&&(r=1024==window.innerHeight?70:-80);var a=this.horizontal?[0,1]:[0,0],h=[0,r],u=12,c=this.horizontal?[s[0]+r-u,t[1]-u]:[0,r+.8*s[1]];this.storylineLabelModifier=new m({size:s,origin:a,transform:g.translate(h[0],h[1],0)}),this.storylineTitleModifier=new m({size:s,origin:a,transform:g.translate(c[0],c[1],0)}),this.container.add(this.storylineTitleModifier).add(this.storylineTitle),this.horizontal||this.container.add(this.storylineLabelModifier).add(this.storylineLabel)}function o(){this.sync.on("start",r.bind(this)),this.sync.on("update",a.bind(this)),this.sync.on("end",h.bind(this))}function r(){this.dragging=!0}function a(t){var i=this.horizontal?t.delta[1]:t.delta[0],e=this.dockPos.get()+i;this.dockPos.set(b.clamp(e,[0,this.dockHeight]))}function h(){this.dragging=!1,this.open=!0;var t=this.dockHeight/2;this.dockPos.get()<t&&this.dockPos.set(0,{duration:100,curve:"easeOut"}),this.dockPos.get()>=t&&(this.open=!1,this.dockPos.set(this.dockHeight,{duration:100,curve:"easeOut"}))}function u(){c.on("loadStoryline",function(){this.close()}.bind(this))}var l=t("famous/core/Surface"),c=t("famous/core/Engine"),p=t("famous/surfaces/ContainerSurface"),d=t("famous/core/RenderNode"),f=t("famous/modifiers/StateModifier"),m=t("famous/core/Modifier"),g=t("famous/core/Transform"),v=t("famous/core/View"),y=(t("famous/utilities/Timer"),t("famous/inputs/GenericSync")),_=t("famous/inputs/MouseSync"),w=t("famous/inputs/TouchSync"),S=t("famous/transitions/Transitionable"),b=t("famous/math/Utilities"),x=t("famous/transitions/Easing"),I=t("./DockToggleButton"),T=t("./Timeline");n.prototype=Object.create(v.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={visible:!0,size:2048,orientation:"horizontal"},n.prototype.toggle=function(){this.open?this.hide():this.show()},n.prototype.show=function(){this.dockPos.set(0,{duration:150,curve:"easeOut"}),this.open=!0},n.prototype.hide=function(){this.dockPos.set(this.dockHeight,{duration:100},function(){this.open=!1}.bind(this))},n.prototype.close=function(){this.dockPos.set(1.5*this.dockHeight,{duration:100},function(){this.open=!1}.bind(this))},n.prototype.pulse=function(){this.open=!1,this.pulsing=!0,this.dockPos.halt(),this.dockPos.set(this.dockHeight-20,{duration:600},function(){this.dockPos.set(this.dockHeight,{duration:300,curve:x.outElastic},function(){this.pulsing=!1}.bind(this))}.bind(this))},n.prototype.setStoryline=function(t){this.timeline.setStoryline(t);var i=this.horizontal?"<span class='storylineLabel'>Storyline</span> ":"";this.storylineTitle.setContent("<h2>@TITLE".replace("@TITLE",i)+t.name+"</h2>")},n.prototype.setup=function(t){this.setOptions(t),s.call(this)},n.prototype.render=function(){var t,i=(this.horizontal?-4400:-4900)*this.scale,e=this.dockHeight,n=i/e,s=924*this.scale,o=this.dockPos.get(),r=b.clamp(o,[0,e]);t=this.horizontal?s+n*(e-r):s+1.333*n*(e-r);var a=Math.PI*(e-o)/e+(this.horizontal?0:Math.PI/2),h=1+(e-r)/(10*this.scale),u=this.horizontal?t:80*this.scale,l=this.horizontal?80*this.scale:t;this.pulsing?a=this.horizontal?0:Math.PI/2:(this.background.setSize([200*h*this.scale,200*h*this.scale]),this.backgroundPositionModifier.setTransform(g.translate(u,l,0))),this.arrow.rotate(-a);var c=o-this.dockHeight,p=c/this.dockHeight,d=.8-p/2;this.pulsing&&(d=.8),this.backgroundPositionModifier.setOpacity(d),this.storylineTitleModifier.setOpacity(-1-2*p),this.storylineLabelModifier.setOpacity(-1-2*p);var f=0,m=this.options.verticalYOffset-2048*this.scale/2,v=this.horizontal?f:window.innerWidth-e/3.3+c,y=this.horizontal?e+c-50*this.scale:m;if(this.dockModifier.setTransform(g.translate(v,y,0)),this.dragging||this.open){this.timeline.visible=!0;var _=(e-o)/e,w=Math.ceil((2048*this.scale-window.innerHeight)/2);!this.horizontal&&window.innerHeight>=960&&(w=1024==window.innerHeight?80:-70);var S=this.horizontal?[1550*this.scale+(-400+400*_)*this.scale,370*this.scale-o/e*80]:[430*this.scale,w];this.timelineModifier.setTransform(g.multiply(g.translate(S[0],S[1],0),g.scale(_,_,1)))}else this.timeline.visible=!1;var x=[2048*this.scale/2,100*this.scale+(e-o)/5],I=this.horizontal?x[0]:x[1],T=this.horizontal?x[1]:x[0];return this.arrowModifier.setTransform(g.translate(I,T,0)),this.visible?this._node.render():void 0},e.exports=new n}),e("articles/articlesView",["require","exports","module","famous/core/Engine","famous/modifiers/StateModifier","famous/core/Transform","famous/core/View","famous/core/EventHandler","utils/smartScroller","utils/topControlsView","utils/bottomControlsView","articles/heroView","articles/bulletsView","utils/inkabinkaUtils","famous/math/Utilities","famous/utilities/Timer","dock/Dock"],function(t,i,e){function n(){l.apply(this,arguments),s.call(this)}function s(){this.visible=this.options.visible,this.hasGigya=this.options.hasGigya,this.isIE=this.options.isIE,this.isStorylineView=this.options.isStorylineView,this.webMode=!1,this.currentArticleIndex=0,this.smartTopic=null,this.smartDate="",this.heroContainerSize=[],this.topControlsContainerSize=[],this.bottomControlsContainerSize=[],this.bulletContainerSize=[],this.topControlsZ=60,this.bottomControlsZ=60,this.bulletsZ=40,this.heroZ=0,this.bulletsX=0,this.bulletsY=0,this.topControlsX=0,this.topControlsY=0,this.bottomControlsX=0,this.bottomControlsY=0,this.heroX=0,this.heroY=0,this.heroHeight=0,this.bulletsHeight=0,this.bulletsWidth=0,this.heroViews=[],this.timer=null,this.firstBulletDelay=2e3,this.topPadding=0,this.topControlsHeight=0,this.bottomControlsHeight=0,this.viewportWidth=0,this.viewportHeight=0,this.orientation="landscape",this.viewportWidth=window.innerWidth,this.viewportHeight=window.innerHeight,this.orientation=this.viewportHeight>this.viewportWidth?"portrait":"landscape","portrait"===this.orientation?(this.bulletsWidth=this.viewportWidth,this.topPadding=Math.round(g.map(this.bulletsWidth,320,512,10,15,!0)),this.topControlsHeight=Math.round(g.map(this.bulletsWidth,320,512,28,44,!0))+Math.round(2*this.topPadding),this.bottomControlsHeight=Math.round(g.map(this.bulletsWidth,320,512,28,44,!0))+Math.round(2*this.topPadding),this.topControlsContainerSize=[this.bulletsWidth,this.topControlsHeight],this.topControlsX=0,this.topControlsY=0,this.heroHeight=Math.floor(this.viewportHeight<=640?.4*this.viewportHeight:.5*this.viewportHeight),this.heroContainerSize=[this.bulletsWidth,this.heroHeight],this.heroX=0,this.heroY=this.topControlsHeight,this.bulletsHeight=this.viewportHeight-this.topControlsHeight-this.heroHeight-this.bottomControlsHeight,this.bulletContainerSize=[this.bulletsWidth,this.bulletsHeight],this.bulletsX=0,this.bulletsY=this.topControlsHeight+this.heroHeight,this.bottomControlsContainerSize=[this.bulletsWidth,this.bottomControlsHeight],this.bottomControlsX=0,this.bottomControlsY=this.topControlsHeight+this.heroHeight+this.bulletsHeight):(this.bulletsWidth=Math.ceil(this.viewportWidth/2),this.topPadding=Math.round(g.map(this.bulletsWidth,320,512,10,15,!0)),this.topControlsHeight=Math.round(g.map(this.bulletsWidth,320,512,26,44,!0))+Math.round(2*this.topPadding),this.bottomControlsHeight=Math.round(g.map(this.bulletsWidth,320,512,26,44,!0))+Math.round(2*this.topPadding),this.topControlsContainerSize=[this.bulletsWidth,this.topControlsHeight],this.topControlsX=this.bulletsWidth,this.topControlsY=0,this.heroContainerSize=[this.bulletsWidth,this.viewportHeight],this.bulletsHeight=this.viewportHeight-this.topControlsHeight-this.bottomControlsHeight,this.bulletContainerSize=[this.bulletsWidth,this.bulletsHeight],this.bulletsX=this.bulletsWidth,this.bulletsY=this.topControlsHeight,this.bottomControlsContainerSize=[this.bulletsWidth,this.bottomControlsHeight],this.bottomControlsX=this.bulletsWidth,this.bottomControlsY=this.topControlsHeight+this.bulletsHeight),this.bulletPadding=Math.round(g.map(this.bulletsWidth,320,768,8,40,!0)),this.smartScroller=new c({itemWidth:this.heroContainerSize[0],itemHeight:this.heroContainerSize[1],orientation:this.orientation}),this.smartScrollerMod=new h({transform:u.translate(this.heroX,this.heroY,this.heroZ)}),this.topControlsView=new p({size:this.topControlsContainerSize,zIndex:this.topControlsZ,hasGigya:this.hasGigya,hasBackButton:this.isStorylineView,isStoryline:this.isStorylineView}),this.topControlsViewMod=new h({transform:u.translate(this.topControlsX,this.topControlsY,this.topControlsZ)}),this.bottomControlsView=new d({orientation:this.orientation,size:this.bottomControlsContainerSize,zIndex:this.bottomControlsZ,bulletAreaHeight:this.bulletsHeight+this.bottomControlsHeight,bulletAreaWidth:this.bulletsWidth,hasGigya:this.hasGigya,isStorylineView:this.isStorylineView}),this.bottomControlsViewMod=new h({transform:u.translate(this.bottomControlsX,this.bottomControlsY,this.bottomControlsZ)}),this.bulletsView=new m({orientation:this.orientation,size:this.bulletContainerSize,zIndex:this.bulletsZ,bulletPadding:this.bulletPadding}),this.bulletsViewMod=new h({transform:u.translate(this.bulletsX,this.bulletsY,this.bulletsZ)}),this._node.add(this.topControlsViewMod).add(this.topControlsView),this._node.add(this.bottomControlsViewMod).add(this.bottomControlsView),this._node.add(this.bulletsViewMod).add(this.bulletsView),this._node.add(this.smartScrollerMod).add(this.smartScroller)}function o(t){for(var i=0;i<this.heroViews.length;i++)Math.abs(i-t)<2?this.heroViews[i].show():this.heroViews[i].hide()}function r(t){var i=this.heroViews[t].smartArticle.dateName;this.bottomControlsView.setDate(i)}var a=t("famous/core/Engine"),h=t("famous/modifiers/StateModifier"),u=t("famous/core/Transform"),l=t("famous/core/View"),c=(t("famous/core/EventHandler"),t("utils/smartScroller")),p=t("utils/topControlsView"),d=t("utils/bottomControlsView"),f=t("articles/heroView"),m=t("articles/bulletsView"),g=t("utils/inkabinkaUtils"),v=(t("famous/math/Utilities"),t("famous/utilities/Timer")),y=t("dock/Dock");n.prototype=Object.create(l.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={hasGigya:!1,isIE:!1,isStorylineView:!1,visible:!0},n.prototype.init=function(t,i,e,n,s){this.heroViews=[],this.smartTopic=t,this.smartDate=e,this.webMode=n,this.currentArticleIndex=i,this.topControlsView.init(this.smartTopic.smartArticles.length,this.smartTopic.topicName,this.webMode,this.topPadding,this.topControlsHeight,this.bulletPadding),this.bottomControlsView.init({webMode:this.webMode,height:this.bottomControlsHeight,topPadding:this.topPadding,bulletPadding:this.bulletPadding,avatarImageURL:s}),this.topControlsView.setActiveIndicator(this.currentArticleIndex);for(var a=this.smartTopic.smartArticles.length,h=0;a>h;h++){var u=new f({orientation:this.orientation,smartArticle:this.smartTopic.smartArticles[h],size:this.heroContainerSize,isIE:this.isIE,itemIndex:h});this.heroViews.push(u)}o.call(this,this.currentArticleIndex),this.smartScroller.init(this.heroViews,this.webMode,this.currentArticleIndex),this.smartScroller.on("articleChange",function(t){this.heroViews[this.currentArticleIndex].resetImages(),this.currentArticleIndex=t.articleIndex,o.call(this,this.currentArticleIndex),this.heroViews[this.currentArticleIndex].currentIndex=-1,this.heroViews[this.currentArticleIndex].loadImage(0,!1),this.displayStoryline(),this.topControlsView.setActiveIndicator(this.currentArticleIndex),this.bulletsView.loadBullets(this.smartTopic.smartArticles[this.currentArticleIndex].smartBullets,this.currentArticleIndex),this.drawBullets(),this.storyLineDock.close(),this._eventOutput.emit("articleChange",{articleIndex:t.articleIndex}),r.call(this,this.currentArticleIndex)}.bind(this)),this.topControlsView.on("logo",function(){this.cleanUp(),this._eventOutput.emit("menu",null)}.bind(this)),this.topControlsView.on("share",function(){this._eventOutput.emit("share",{captureArticleID:this.smartTopic.smartArticles[this.currentArticleIndex].captureArticleID})}.bind(this)),this.bulletsView.on("bulletChange",function(t){this.heroViews[this.currentArticleIndex].loadImage(t.index,!1),t.index===this.smartTopic.smartArticles[this.currentArticleIndex].smartBullets.length-1&&this._eventOutput.emit("articleRead",{captureArticleID:this.smartTopic.smartArticles[this.currentArticleIndex].captureArticleID})}.bind(this)),this.bottomControlsView.on("reader",function(){this._eventOutput.emit("reader",{captureArticleID:this.smartTopic.smartArticles[this.currentArticleIndex].captureArticleID})}.bind(this)),this.bottomControlsView.on("avatar",function(){this._eventOutput.emit("avatar",null)}.bind(this)),this.bottomControlsView.on("logout",function(){this._eventOutput.emit("logout",null)}.bind(this))},n.prototype.setStorylines=function(t){for(var i=0;i<this.heroViews.length;i++)for(var e=this.heroViews[i],n=0;n<t.length;n++)for(var s=t[n],o=0;o<s.stories.length;o++)s.stories[o].smartArticleID===e.smartArticle.smartArticleID&&(e.storyline=s)},n.prototype.displayStoryline=function(){if(g.isValidWebKitVersion()===!0){var t=null!=this.heroViews[this.currentArticleIndex].storyline;if(console.log("displayStoryline(): "+t),!this.storyLineDock){var i=window.innerHeight>window.innerWidth?"vertical":"horizontal",e="vertical"==i?window.innerHeight:window.innerWidth;this.storyLineDock=y,this.storyLineDock.setup({orientation:i,size:e,verticalYOffset:this.bulletsY,headerHeight:this.heroY}),this.add(new h({size:[window.innerWidth,window.innerHeight],origin:[.5,.5],transform:u.translate(0,0,1e3)})).add(this.storyLineDock)}t?(this._eventOutput.emit("loadStorylineDock",{smartArticleID:this.heroViews[this.currentArticleIndex].smartArticle.smartArticleID,storylineID:this.heroViews[this.currentArticleIndex].storyline.id}),this.storyLineDock.setStoryline(this.heroViews[this.currentArticleIndex].storyline),this.isStorylineView===!1&&v.setTimeout(function(){this.storyLineDock.pulse()}.bind(this),500)):this.storyLineDock&&this.storyLineDock.close()}},n.prototype.reset=function(){console.log("reset()");for(var t=0;t<this.heroViews.length;t++)this.heroViews[t].resetImages();this.heroViews[this.currentArticleIndex].loadImage(0,!1),this.displayStoryline(),this.bulletsView.loadBullets(this.smartTopic.smartArticles[this.currentArticleIndex].smartBullets,0),this.drawBullets()},n.prototype.drawBullets=function(){this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){this.bulletsView.drawBullets()}.bind(this),this.firstBulletDelay)},n.prototype.setAvatar=function(t){this.bottomControlsView.setAvatar(t)},n.prototype.cleanUp=function(){this.webMode===!1&&(a.unpipe(this.smartScroller.sync),this.bulletsView.removeAllBullets(null,null))},n.prototype.goToIndex=function(t){this.currentArticleIndex=t,this.topControlsView.setActiveIndicator(this.currentArticleIndex),this.smartScroller.goToIndex(t),o.call(this,t),r.call(this,t)},n.prototype.render=function(){return this.visible?this._node.render():void 0},e.exports=n}),e("user/loginView",["require","exports","module","famous/core/Engine","famous/core/Surface","famous/modifiers/StateModifier","famous/core/Transform","famous/core/View","famous/core/EventHandler","famous/views/Scrollview"],function(t,i,e){function n(t){h.apply(this),this.outputEvents=new u,u.setOutputHandler(this,this.outputEvents),this.viewportWidth=window.innerWidth,this.viewportHeight=window.innerHeight,this.zIndex=0,null!=t.zIndex&&(this.zIndex=t.zIndex),this.iconSize=26,this.iconPadding=10,this.loginSurface=new o({size:[this.viewportWidth,700],content:'<div id="loginContainer"></div>'}),this.closeSurface=new o({size:[this.viewportWidth,this.iconSize+this.iconPadding],content:'<img class="pullRight" style="width: '+this.iconSize+"px; height: "+this.iconSize+"px; cursor: pointer; margin-top: "+this.iconPadding+"px;margin-right: "+this.iconPadding+'px;" src="content/images/close.png" width="'+this.iconSize+'" height="'+this.iconSize+'" />',classes:["onTop"]}),this.closeSurfaceMod=new r({transform:a.translate(0,0,410)}),this.scrollview=new l({defaultItemSize:[this.viewportWidth,this.loginSurface.size[1]]}),this.scrollviewMod=new r({transform:a.translate(0,0,400)}),this.scrollview.sequenceFrom([this.loginSurface]),this._node.add(this.scrollviewMod).add(this.scrollview),this._node.add(this.closeSurfaceMod).add(this.closeSurface),this.doLogin=function(){if("undefined"!=typeof gigya){var t={containerID:"loginContainer",screenSet:"Mobile-login",startScreen:"gigya-login-screen"};gigya.accounts.showScreenSet(t)}},this.loginSurface.on("deploy",function(){if(console.log("login deployed"),"undefined"!=typeof gigya){var t={containerID:"loginContainer",screenSet:"Mobile-login",startScreen:"gigya-login-screen"};gigya.accounts.showScreenSet(t)}}),this.closeSurface.on("click",function(){this.outputEvents.emit("close")}.bind(this)),this.reset=function(){s.pipe(this.scrollview)}}var s=t("famous/core/Engine"),o=t("famous/core/Surface"),r=t("famous/modifiers/StateModifier"),a=t("famous/core/Transform"),h=t("famous/core/View"),u=t("famous/core/EventHandler"),l=t("famous/views/Scrollview");n.prototype=Object.create(h.prototype),n.prototype.constructor=n,e.exports=n}),e("user/shareView",["require","exports","module","zepto","famous/core/Engine","famous/core/Surface","famous/modifiers/StateModifier","famous/core/Transform","famous/core/View","famous/core/EventHandler","famous/views/Scrollview"],function(t,i,e){function n(t){h.apply(this),this.outputEvents=new u,u.setOutputHandler(this,this.outputEvents),this.viewportWidth=window.innerWidth,this.viewportHeight=window.innerHeight,this.zIndex=0,null!=t.zIndex&&(this.zIndex=t.zIndex),this.iconSize=26,this.iconPadding=10,this.shareSurface=new o({size:[this.viewportWidth,300],content:'<div id="shareContainer"></div>'}),this.closeSurface=new o({size:[this.viewportWidth,this.iconSize+this.iconPadding],content:'<img class="pullRight" style="width: '+this.iconSize+"px; height: "+this.iconSize+"px; cursor: pointer; margin-top: "+this.iconPadding+"px;margin-right: "+this.iconPadding+'px;" src="content/images/close.png" width="'+this.iconSize+'" height="'+this.iconSize+'" />',classes:["onTop"]}),this.closeSurfaceMod=new r({transform:a.translate(0,0,410)}),this.scrollview=new l({defaultItemSize:[this.viewportWidth,300]}),this.scrollviewMod=new r({transform:a.translate(0,this.iconSize+2*this.iconPadding,400)}),this.scrollview.sequenceFrom([this.shareSurface]),this._node.add(this.scrollviewMod).add(this.scrollview),this._node.add(this.closeSurfaceMod).add(this.closeSurface),this.doShare=function(t,i,e,n,s,o,r){if("undefined"!=typeof gigya){var a=SiteConfig.api.other+"/Smart/GetArticleForSharep";a+="?m="+t,a+="&d="+i,a+="&y="+e,a+="&w=768",a+="&h=1024",a+="&t="+n,a+="&a="+s,a+="&u="+o,a+="&pix="+r,$.ajax({type:"GET",dataType:"jsonp",url:a,success:function(t){this.createShareControl(t.ShareID,t.Smart.smartTopics[0].smartArticles[0],o,n,s)}.bind(this),error:function(t,i,e){console.log(i+" "+e)}})}},this.createShareControl=function(t,i,e,n,s){for(var o="http://www.inkabinka.com/",r=SiteConfig.api.other+"/Smart/ShareCompletep",a=i.headline,h="",u=0;u<i.smartBullets.length;u++)if("full"===i.smartBullets[u].imageType&&null!=i.smartBullets[u].imageID){h=SiteConfig.cdnURL+i.smartBullets[u].imageID+"-p_ng.jpeg";break}o+="?sid="+t,r+="?sid="+t;var l=new gigya.socialize.UserAction;l.setTitle(a),l.setDescription("Read this article in 20 seconds on InkaBinka"),l.setLinkBack(o),l.addActionLink("Read the Article",o),""!==h&&l.addMediaItem({type:"image",src:h,href:o});var c="Testing out the emailBody template.";""!==h&&(c+='<img src="'+h+'" />');var p=this,d={userAction:l,showEmailButton:!0,showMoreButton:!1,context:p,emailBody:c,onLoad:function(t){t.context.shareSurface.setSize([t.context.viewportWidth,300]),t.context.scrollview.setOptions({defaultItemSize:[t.context.viewportWidth,300]})},onSendDone:function(t){r+="&p="+encodeURIComponent(t.providers),$.ajax({type:"GET",dataType:"jsonp",url:r,success:function(){console.log("shareCompleteURL success"),t.context.logActivity(e,n,s,"articleShared",t.providers,function(){t.context.closeMe(!0)})}})},containerID:"shareContainer"};gigya.socialize.showShareUI(d)},this.logActivity=function(t,i,e,n,s,o){if(console.log("logActivity"),null!=t&&""!==t&&null!=n&&""!==n){var r=SiteConfig.api.other+"/User/Activityp";r=r+"?userID="+t,r=r+"&activity="+n,null!=i&&""!==i&&(r=r+"&smartTopicID="+i),null!=e&&""!==e&&(r=r+"&captureArticleID="+e),null!=s&&""!==s&&(r+="&det="+encodeURIComponent(s)),$.ajax({type:"GET",dataType:"jsonp",async:!0,url:r,success:function(){console.log("logActivity success"),o&&o()}})}},this.closeMe=function(t){this.outputEvents.emit("close",{continueToShare:t})}.bind(this),this.closeSurface.on("click",function(){this.closeMe(!1)}.bind(this)),this.reset=function(){s.pipe(this.scrollview)}}var s=(t("zepto"),t("famous/core/Engine")),o=t("famous/core/Surface"),r=t("famous/modifiers/StateModifier"),a=t("famous/core/Transform"),h=t("famous/core/View"),u=t("famous/core/EventHandler"),l=t("famous/views/Scrollview");n.prototype=Object.create(h.prototype),n.prototype.constructor=n,e.exports=n}),e("reader/readerView",["require","exports","module","famous/core/Engine","famous/core/Surface","famous/modifiers/StateModifier","famous/core/Transform","famous/core/View","famous/transitions/Easing","famous/core/EventHandler","famous/views/Scrollview","utils/topControlsView","utils/inkabinkaUtils"],function(t,i,e){function n(){u.apply(this,arguments),s.call(this)}function s(){this.visible=this.options.visible,this.hasGigya=this.options.hasGigya,this.viewportWidth=window.innerWidth,this.viewportHeight=window.innerHeight,this.orientation=this.viewportHeight>this.viewportWidth?"portrait":"landscape",this.webMode=!1,this.articleIndex=0,this.articleCount=0,this.topicName="",this.dateName="",this.article=null,this.paddingMultiplier=.03,this.padding=0,this.topControlsHeightMultiplier=.1,this.minIconSize=26,this.minControlsHeight=0,this.padding=Math.round(this.viewportWidth>this.viewportHeight?this.viewportWidth*this.paddingMultiplier:this.viewportHeight*this.paddingMultiplier),this.topControlsHeight=Math.round(this.viewportHeight*this.topControlsHeightMultiplier),this.minControlsHeight=parseInt(this.padding)+parseInt(this.minIconSize),this.topControlsHeight<this.minControlsHeight&&(this.topControlsHeight=this.minControlsHeight),this.contentWidth=this.viewportWidth-2*this.padding,this.headlineFontSize=Math.round(d.map(this.viewportWidth,320,1024,24,44,!1)),this.contentFontSize=Math.round(d.map(this.viewportWidth,320,1024,14,28,!1)),this.lineHeightMultiplier=1.3,this.bulletsWidth=this.viewportWidth,this.bulletPadding=Math.round(d.map(this.bulletsWidth,240,800,10,40,!0)),this.topPadding=Math.round(d.map(this.bulletsWidth,320,512,10,15,!0)),this.topControlsHeight=Math.round(d.map(this.bulletsWidth,320,512,28,44,!0))+Math.round(2*this.topPadding),"portrait"===this.orientation?(this.bulletsWidth=this.viewportWidth,this.topPadding=Math.round(d.map(this.bulletsWidth,320,512,10,15,!0)),this.topControlsHeight=Math.round(d.map(this.bulletsWidth,320,512,28,44,!0))+Math.round(2*this.topPadding)):(this.bulletsWidth=Math.ceil(this.viewportWidth/2),this.topPadding=Math.round(d.map(this.bulletsWidth,320,512,10,15,!0)),this.topControlsHeight=Math.round(d.map(this.bulletsWidth,320,512,26,44,!0))+Math.round(2*this.topPadding)),this.topControlsContainerSize=[this.viewportWidth,this.topControlsHeight],this.modifiers={controlsOverlay:new a({opacity:1,transform:h.translate(0,0,105)}),scrollview:new a({opacity:0,transform:h.translate(this.padding,this.topControlsHeight,100)})},this.easings={opacity:{duration:1e3,curve:l.linear}},this.controlsOverlaySurface=new r({size:this.topControlsContainerSize,content:"&nbsp;",properties:{backgroundColor:"#F0F0F0"},classes:["nearTop"]}),this.contentSurface=new r({size:[this.contentWidth,window.innerHeight],content:"<h1>Loading Article...</h1>",properties:{backgroundColor:"#F0F0F0"}}),this.scrollview=new c({defaultItemSize:[this.contentWidth,window.innerHeight]}),this.scrollview.sequenceFrom([this.contentSurface]),this.add(this.modifiers.scrollview).add(this.scrollview),this.topControlsView=new p({size:this.topControlsContainerSize,zIndex:110,hasGigya:this.hasGigya,hasBackButton:!0}),this.add(this.topControlsView)}var o=t("famous/core/Engine"),r=t("famous/core/Surface"),a=t("famous/modifiers/StateModifier"),h=t("famous/core/Transform"),u=t("famous/core/View"),l=t("famous/transitions/Easing"),c=(t("famous/core/EventHandler"),t("famous/views/Scrollview")),p=t("utils/topControlsView"),d=t("utils/inkabinkaUtils");n.prototype=Object.create(u.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={hasGigya:!1,visible:!0},n.prototype.init=function(t,i,e,n,s,o,r){this.articleCount=t,this.articleIndex=i,this.topicName=e,this.dateName=n,this.topPadding=s,this.topControlsHeight=o,this.bulletPadding=r,this.topControlsView.init(this.articleCount,this.topicName,this.webMode,this.topPadding,this.topControlsHeight,this.bulletPadding),this.topControlsView.setActiveIndicator(this.articleIndex),this.topControlsView.on("logo",function(){this._eventOutput.emit("articles",null)}.bind(this)),this.topControlsView.on("share",function(){null!=this.article&&this._eventOutput.emit("share",{captureArticleID:this.article.captureArticleID})}.bind(this))},n.prototype.displayArticle=function(t){this.article=t;var i="";if(i+='<div class="readerHeadline" style="font-size: '+this.headlineFontSize+"px; line-height: "+Math.round(this.headlineFontSize*this.lineHeightMultiplier)+'px;">'+this.article.headline+"</div>",null!=this.article.source||null!=this.article.sourceLogoURL){var e="",n="";null!=this.article.sourceLogoURL&&""!==this.article.sourceLogoURL&&(e+='<img style="width: 50px; height: 50px; border-radius: 10px; margin-right: 10px;" src="'+this.article.sourceLogoURL+'" width="50" height="50" />'),null!=this.article.source&&""!==this.article.source&&(n+=""!==e?"<br />":"Source: ",n+=this.article.source),(""!==e||""!==n)&&(i+='<div style="margin-top: 10px; margin-bottom: 10px; font-size: 10px;">'+e+n+"</div>")}i+='<div class="readerContent" style="font-size: '+this.contentFontSize+"px; line-height: "+Math.round(this.contentFontSize*this.lineHeightMultiplier)+'px;">'+this.article.content+"</div>",null!=this.article.link&&""!==this.article.link&&(i+='<a target="_blank" href="'+this.article.link+'">'+this.article.link+"</a><br /><br />"),this.contentSurface.setContent(i);var s=d.getContentDivHeight(this.contentWidth,i,this.topControlsHeight+this.topPadding,1e5);
this.scrollview.setOptions({defaultItemSize:[this.contentWidth,s]}),this.contentSurface.setSize([this.contentWidth,s]),this.modifiers.scrollview.setOpacity(1,this.easings.opacity)},n.prototype.reset=function(){o.pipe(this.scrollview)},n.prototype.render=function(){return this.visible?this._node.render():void 0},e.exports=n}),e("reader/acceptView",["require","exports","module","famous/core/Engine","famous/core/Surface","famous/modifiers/StateModifier","famous/core/Transform","famous/core/View","famous/core/EventHandler"],function(t,i,e){function n(){h.apply(this,arguments),s.call(this)}function s(){this.visible=this.options.visible,this.viewportWidth=window.innerWidth,this.viewportHeight=window.innerHeight,this.mainSurface=new o({size:[this.viewportWidth,this.viewportHeight],classes:["accept-background"]}),this.fontSize=Math.round(.1*this.viewportWidth),Math.round(.1*this.viewportHeight)<this.fontSize&&(this.fontSize=Math.round(.1*this.viewportHeight)),this.lineHeight=Math.round(1.3*this.fontSize),this.textHeight=2*this.fontSize+this.lineHeight,this.textSurface=new o({size:[this.viewportWidth,this.textHeight],content:'<span style="font-size: '+this.fontSize+"px; line-height: "+this.lineHeight+'px;">Open this story in<br />InkaBinka Reader</span>',classes:["accept"]}),this.textY=Math.round(this.viewportHeight/2)-Math.round(.7*this.textHeight),this.textSurfaceMod=new r({transform:a.translate(0,this.textY,1e3)}),this.buttonWidth=Math.round(this.viewportWidth/3),this.buttonHeight=this.lineHeight,this.buttonY=this.textY+this.textHeight,this.yesSurface=new o({size:[this.buttonWidth,this.buttonHeight],content:'<span style="font-size: '+this.fontSize+'px;">Yes</span>',classes:["accept-yes"]}),this.yesX=Math.round(this.viewportWidth/2)-this.buttonWidth-Math.round(this.fontSize/2),this.yesSurfaceMod=new r({transform:a.translate(this.yesX,this.buttonY,1e3)}),this.noSurface=new o({size:[this.buttonWidth,this.buttonHeight],content:'<span style="font-size: '+this.fontSize+'px;">No</span>',classes:["accept-no"]}),this.noX=Math.round(this.viewportWidth/2)+Math.round(this.fontSize/2),this.noSurfaceMod=new r({transform:a.translate(this.noX,this.buttonY,1e3)}),this._node.add(this.mainSurface),this._node.add(this.textSurfaceMod).add(this.textSurface),this._node.add(this.yesSurfaceMod).add(this.yesSurface),this._node.add(this.noSurfaceMod).add(this.noSurface),this.yesSurface.on("click",function(){this._eventOutput.emit("acceptYes",{})}.bind(this)),this.noSurface.on("click",function(){this._eventOutput.emit("acceptNo",{})}.bind(this))}{var o=(t("famous/core/Engine"),t("famous/core/Surface")),r=t("famous/modifiers/StateModifier"),a=t("famous/core/Transform"),h=t("famous/core/View");t("famous/core/EventHandler")}n.prototype=Object.create(h.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={visible:!0},n.prototype.render=function(){return this.visible?this._node.render():void 0},e.exports=n}),e("main",["require","exports","module","zepto","async","famous/core/Engine","famous/views/RenderController","utils/inkabinkaUtils","utils/auth","splash/splashView","menu/menuView","articles/articlesView","user/loginView","user/shareView","reader/readerView","reader/acceptView","famous/utilities/Timer"],function(t){function i(){var t=function(){Y.isUnsupportedIE()===!1&&F(function(){n()})};e.call(this,t)}function e(t){Wi.show(ji,null,t)}function n(){f(function(){ui===!1&&U(!0),Ii===!0&&null==Si&&Y.hasPreviousLogin()===!0?(Ii=!1,a()):z(function(){R("loadAllData done"),_(function(){O(!0,function(){R("preloadMenuImages done"),null!=Hi&&T(mi,Hi),s(),C(!1,null)})})})})}function s(){R("showView()"),ui===!0&&null==mi&&null!=vi&&vi[0]&&(mi=vi[0].smartTopicID),null==mi?o():r(mi)}function o(){R("showMenu()"),mi=null,Ci="menu",Ei=null,W(),Bi.init(bi,function(){p(),Bi.reset(function(){xi=!0,Wi.show(Bi,null,function(){Bi.animateIn(null),setTimeout(function(){Bi.animateTopicsIn(null)},1010)})})})}function r(t){mi=t;for(var i=null,e=null,n=0;n<vi.length;n++)if(vi[n].smartTopicID===mi){i=vi[n];break}for(var s=0;s<Mi.length;s++)Mi[s].smartTopicID===mi&&(e=Mi[s].articleView);if(null!=i&&null!=e){E(mi,!1,null),Ci="article",Ei=null,null!=Si&&S(Si.UID,mi,null,"topicLoaded",null),p();var r=I(mi);e.goToIndex(r),e.reset(),B=e,xi=!0,Ai=mi,W(),Wi.show(e)}else o()}function a(){p(),Gi.reset(),xi=!1,W(),Wi.show(Gi)}function h(t){null!=Si?(p(),qi.reset(),xi=!1,W(),Wi.show(qi),qi.doShare(oi,ri,ai,mi,t,Si.UID,_i)):(Ci="share",Ei=t,V(!0,null))}function u(t){if(null!=Si||Z.isGigyaLoaded()===!1){for(var i=null,n=0;n<Oi.length;n++)Oi[n].captureArticleID===t&&(i=Oi[n].readerView);null!=i?(console.log("displaying existing reader"),p(),i.reset(),console.log("calling setTopicName: "+Ri),i.topControlsView.setTopicName(Vi,Ri),xi=!0,W(),Wi.show(i)):(console.log("loading new reader"),i=new ei({hasGigya:Z.isGigyaLoaded()}),i.on("articles",function(){Ci="",Ei=null,c()}),i.on("share",function(i){Ci="reader",Ei=t,h(i.captureArticleID)}),Oi.push({captureArticleID:t,readerView:i}),i.init(B.smartTopic.smartArticles.length,B.currentArticleIndex,B.smartTopic.topicName,B.smartDate,B.topPadding,B.topControlsHeight,B.bulletPadding),i.topControlsView.setTopicName(Vi,Ri),e.call(this,function(){y(t,function(t){W(),i.displayArticle(t),p(),i.reset(),xi=!0,Wi.show(i)})}.bind(this)))}else Ci="reader",Ei=t,V(!0,null)}function l(){W(),Wi.show(Xi,null,null)}function c(){console.log("showLastView(): "+Ci),"reader"===Ci?u(Ei):"share"===Ci?h(Ei):(p(),B.reset(),xi=!0,W(),Wi.show(B))}function p(){q.unpipe(Bi.scrollview);for(var t=0;t<Mi.length;t++)q.unpipe(Mi[t].articleView.smartScroller.sync);for(var i=0;i<Oi.length;i++)q.unpipe(Oi[i].readerView.scrollview);q.unpipe(Gi.scrollview),q.unpipe(qi.scrollview)}function d(){xi===!0&&(null!=Pi&&clearTimeout(Pi),Pi=setTimeout(function(){var t=D("");window.location.replace(t)},200))}function f(t){var i=Y.getParameterByName("sid")||null;if(null!=i&&Y.isGuid(i)===!0)g(i);else{m(!0),hi="1"===(Y.getParameterByName("p")||"0"),ui="1"===(Y.getParameterByName("web")||"0"),li="1"===(Y.getParameterByName("c")||"0"),mi=Y.getParameterByName("t")||null,gi=Y.getParameterByName("a")||null,Ci=Y.getParameterByName("act")||"menu",Ii="1"===(Y.getParameterByName("f")||"1"),ki="1"===(Y.getParameterByName("debug")||"0"),"app.inkabinka.com"!==window.location.host&&(Ii=!1,Ti=999999);var e=Y.getParameterByName("pid")||null,n=Y.getParameterByName("pix")||null;null!=e&&(mi=e),null!=n&&(Hi=parseInt(n)),"1"===(Y.getParameterByName("viewport")||"0")&&alert(ci+" x "+pi),t&&t()}}function m(t){t===!0?(oi=parseInt(Y.getParameterByName("m"))||parseInt(si.getMonth()+1),ri=parseInt(Y.getParameterByName("d"))||parseInt(si.getDate()),ai=parseInt(Y.getParameterByName("y"))||parseInt(si.getFullYear())):(oi=parseInt(si.getMonth()+1),ri=parseInt(si.getDate()),ai=parseInt(si.getFullYear()));var i=new Date;0===oi&&(oi=parseInt(i.getMonth()+1)),0===ri&&(ri=parseInt(i.getDate())),0===ai&&(ai=parseInt(i.getFullYear()))}function g(t){var i=window.location.protocol,e=window.location.host,n=i+"//"+e,s=SiteConfig.api.other+"/Smart/ShareResponsep?sid="+t,o=SiteConfig.api.other+"/Smart/GetSharep?sid="+t;$.ajax({type:"GET",dataType:"jsonp",url:s,success:function(){$.ajax({type:"GET",dataType:"jsonp",url:o,success:function(t){n+="?m="+t.Month,n+="&d="+t.Day,n+="&y="+t.Year,t.SmartTopicID&&"00000000-0000-0000-0000-000000000000"!==t.SmartTopicID&&(n+="&t="+t.SmartTopicID),null==t.ArticleIndex&&(t.ArticleIndex=0),n+="&pix="+t.ArticleIndex,console.log("handleShareResponse - reloading page: "+n),window.location.replace(n)}})}})}function v(t){var i=SiteConfig.api.main+"/Smart/Smart";i=i+"?m="+oi,i=i+"&d="+ri,i=i+"&y="+ai,i=i+"&w="+ci,i=i+"&h="+pi,i=i+"&p="+(hi?"1":"0"),null!=mi&&(i=i+"&t="+mi),gi&&(i=i+"&a="+gi),console.log("url: "+i),$.ajax({type:"GET",dataType:"jsonp",url:i,success:function(i){vi=i.smartTopics,yi=i.date,Mi=[];for(var e=0;e<vi.length;e++){var n=vi[e],s=new K({hasGigya:Z.isGigyaLoaded(),isIE:Y.isIE(),isStorylineView:!1});s.init(n,0,yi,ui,k()),s.on("menu",function(){if(ui===!1){var t=new Date,i=t.getMonth()+1,e=t.getDate(),n=t.getFullYear();i===oi&&e===ri&&n===ai?o():(oi=i,ri=e,ai=n,mi=null,window.location.replace(D("")))}}),s.on("avatar",function(){V(!0,null)}),s.on("share",function(t){h(t.captureArticleID)}),s.on("reader",function(t){console.log("articleView reader: "+this.smartTopic.topicName),Ei=t.captureArticleID,Vi=this.smartTopic.topicName,Ri=!1,l()}),s.on("articleChange",function(t){W(),T(mi,t.articleIndex)}),s.on("loadStorylineDock",function(t){P(t.smartArticleID,t.storylineID,!1,null)}),s.on("logout",function(){Si=null,W(),Z.logout()});var r={smartTopicID:n.smartTopicID,articleView:s};Mi.push(r),Di.push({smartTopicID:n.smartTopicID,articleIndex:0})}t&&t()}})}function y(t,i){var e=SiteConfig.api.main+"/Smart/FullStory?id="+t;console.log("url: "+e),$.ajax({type:"GET",dataType:"jsonp",url:e,success:function(t){i&&i(t)}})}function _(t){try{for(var i=SiteConfig.api.main+"/Smart/Storylines?smartArticleIDs=",e=[],n=0;n<vi.length;n++)for(var s=vi[n],o=0;o<s.smartArticles.length;o++){var r=s.smartArticles[o];-1===e.indexOf(r.smartArticleID)&&e.push(r.smartArticleID)}for(var a="",h=0;h<e.length;h++)a+=e[h],h<e.length-1&&(a+=",");i+=encodeURIComponent(a),console.log("url: "+i),$.ajax({type:"GET",dataType:"jsonp",url:i,success:function(i){if(R("loadStorylines done: "+i.length),null!=i.length){Ni=i;for(var e=0;e<Mi.length;e++)Mi[e].articleView.setStorylines(Ni)}t&&t()}})}catch(u){console.log("loadStorylines ERROR: "+u.message)}}function w(t,i){try{var n=SiteConfig.api.main+"/Smart/Storyline?storylineID="+t;console.log("url: "+n),e.call(this),$.ajax({type:"GET",dataType:"jsonp",url:n,error:function(){alert("AJAX ERROR")},success:function(e){var n=e.smartTopics[0];A(t,n,!1,null);for(var s=0,o=0;o<n.smartArticles.length;o++)if(n.smartArticles[o].smartArticleID===i){s=o;break}var a=new K({hasGigya:Z.isGigyaLoaded(),isIE:Y.isIE(),isStorylineView:!0});a.init(n,s,yi,ui,k()),a.on("menu",function(){r(Ai)}),a.on("avatar",function(){V(!0,null)}),a.on("share",function(t){h(t.captureArticleID)}),a.on("reader",function(t){Ei=t.captureArticleID,Vi=this.smartTopic.topicName,Ri=!0,l()}),a.on("articleChange",function(){W()}),a.on("logout",function(){Si=null,W(),Z.logout()}),a.setStorylines(Ni),a.goToIndex(s),a.reset();var u={smartTopicID:n.smartTopicID,articleView:a};Mi.push(u),B=a,xi=!0,p(),W(),Wi.show(a)}})}catch(s){console.log("loadStoryline ERROR: "+s.message)}}function S(t,i,e,n,s){if(null!=t&&""!==t&&null!=n&&""!==n){var o=SiteConfig.api.other+"/User/Activityp";o=o+"?userID="+t,o=o+"&activity="+n,null!=i&&""!==i&&(o=o+"&smartTopicID="+i),null!=e&&""!==e&&(o=o+"&captureArticleID="+e),$.ajax({type:"GET",dataType:"jsonp",async:!0,url:o,success:function(){s&&s()}})}}function b(t){bi=[];var i=new Date,e=i.getMonth()+1,n=i.getDate(),s=i.getFullYear(),o=SiteConfig.api.main+"/Smart/Topics?m="+e+"&d="+n+"&y="+s;$.ajax({type:"GET",dataType:"jsonp",url:o,success:function(i){bi=i,t&&t()}.bind(this)})}function x(){if(null!=Si){var t=SiteConfig.api.other+"/user/"+Si.UID+"/session/";t+="?SessionID="+encodeURIComponent(Si.UIDSig),t+="&UserAgent="+encodeURIComponent(navigator.userAgent),t+="&IP="+encodeURIComponent(""),t+="&FirstName="+encodeURIComponent(Si.firstName),t+="&LastName="+encodeURIComponent(Si.lastName),t+="&Username="+encodeURIComponent(Si.email),t+="&AvatarURL="+encodeURIComponent(Si.photoURL),$.ajax({type:"GET",dataType:"jsonp",url:t,success:function(){}.bind(this)})}}function I(t){for(var i=0,e=0;e<Di.length;e++)Di[e].smartTopicID===t&&(i=Di[e].articleIndex);return i}function T(t,i){for(var e=0;e<Di.length;e++)Di[e].smartTopicID===t&&(Di[e].articleIndex=i)}function M(){for(var t=0;t<Di.length;t++)Di[t].articleIndex=0}function z(t){var i=[];ui===!1&&i.push(function(t){b(t)}),i.push(function(t){v(t)}),G.parallel(i,function(){t&&t()})}function O(t,i){var e="menu";if(zi[e]={toLoad:0,loaded:0},ui===!0)i&&i();else{for(var n=[],s=0;s<bi.length;s++){var o=bi[s];512>=ci?""!==o.smallMenuImageID&&n.push(SiteConfig.cdnURL+o.smallMenuImageID+"-p_ng.jpeg"):""!==o.largeMenuImageID&&n.push(SiteConfig.cdnURL+o.largeMenuImageID+"-p_ng.jpeg")}zi[e].toLoad=n.length;for(var r=0;r<n.length;r++){var a=new Image;a.onload=function(){t===!0?H(e,i):H(e,null)},a.src=n[r]}t===!1&&i&&i()}}function C(t,i){var e="firstArticle";zi[e]={toLoad:0,loaded:0};for(var n=[],s=0;s<vi.length;s++){var o=vi[s];if(null!=o.smartArticles[0])for(var r=o.smartArticles[0],a=0;a<r.smartBullets.length;a++){var h=r.smartBullets[a];null!=h.imageID&&n.push(SiteConfig.cdnURL+h.imageID+"-"+fi+".jpeg")}}zi[e].toLoad=n.length;for(var s=0;s<n.length;s++){var u=new Image;u.onload=function(){t===!0?H(e,i):H(e,null)},u.src=n[s]}t===!1&&i&&i()}function E(t,i,e){var n="remaining_"+t;zi[n]={toLoad:0,loaded:0};for(var s=[],o=0;o<vi.length;o++){var r=vi[o];if(r.smartTopicID===t)for(var a=0;a<r.smartArticles.length;a++)if(a>0)for(var h=r.smartArticles[a],u=0;u<h.smartBullets.length;u++){var l=h.smartBullets[u];null!=l.imageID&&s.push(SiteConfig.cdnURL+l.imageID+"-"+fi+".jpeg")}}zi[n].toLoad=s.length;for(var o=0;o<s.length;o++){var c=new Image;c.onload=function(){i===!0?H(n,e):H(n,null)},c.src=s[o]}i===!1&&e&&e()}function P(t,i,e,n){var s="storylineDock_"+i;zi[s]={toLoad:0,loaded:0};for(var o=[],r=0;r<Ni.length;r++){for(var a=!1,h=0;h<Ni[r].stories.length;h++)if(Ni[r].stories[h].smartArticleID===t){a=!0;break}if(a===!0){var u=Ni[r].stories.length-1,l=Ni[r].stories.length-10;0>l&&(l=0);for(var c=u;c>=l;c--)o.push(Ni[r].stories[c].imageURL)}}zi[s].toLoad=o.length;for(var r=0;r<o.length;r++){var p=new Image;p.onload=function(){e===!0?H(s,n):H(s,null)},p.src=o[r]}e===!1&&n&&n()}function A(t,i,e,n){var s="storyline_"+t;zi[s]={toLoad:0,loaded:0};for(var o=[],r=0;r<i.smartArticles.length;r++)for(var a=i.smartArticles[r],h=0;h<a.smartBullets.length;h++){var u=a.smartBullets[h];null!=u.imageID&&o.push(SiteConfig.cdnURL+u.imageID+"-"+fi+".jpeg")}zi[s].toLoad=o.length;for(var l=0;l<o.length;l++){var c=new Image;c.onload=function(){e===!0?H(s,n):H(s,null)},c.src=o[l]}e===!1&&n&&n()}function H(t,i){zi[t].loaded+=1,zi[t].loaded===zi[t].toLoad&&i&&i()}function D(t){var i="";if(null!=t&&""!==t)i=t;else{var e=window.location.protocol,n=window.location.host;i=e+"//"+n}var s=i,o="0",r="0",a="0";return ui===!0&&(o="1"),li===!0&&(r="1"),Ii===!0&&(a="1"),s+="?m="+oi,s+="&d="+ri,s+="&y="+ai,null!==mi&&(s+="&t="+mi),s+="&pix="+I(mi),s+="&web="+o,s+="&c="+r,s+="&act="+Ci,s+="&f="+a,ki===!0&&(s+="&debug=1"),s}function k(){var t=null;return null!=Si&&(null==Si.photoURL||""===Si.photoURL?Si.photoURL="content/images/avatar.png":t=Si.photoURL),t}function N(){for(var t=k(),i=0;i<Mi.length;i++)Mi[i].articleView.setAvatar(t)}function F(t){null!=Si?t&&t():Z.getUserInfo(function(i){i&&i.user.UID&&""!==i.user.UID&&(Si=i.user,Y.setCookie("previousLogin","true",365),N(),x()),t&&t()})}function L(t,i){hi===!0?i&&i():F(function(){null==Si?t&&t():""===Si.UID?t&&t():i&&i()})}function V(t,i){Z.isGigyaLoaded()===!0?L(function(){t||wi>=Ti?a():i&&i()},function(){i&&i()}):i&&i()}function R(t){ki===!0&&console.log(t)}function U(t){if(t===!1){var i=parseInt(si.getMonth()+1),e=parseInt(si.getDate()),n=parseInt(si.getFullYear());(i!==oi||e!==ri||n!==ai)&&(oi=i,ri=e,ai=n,mi=null,M(),window.location.replace(D("")))}clearTimeout(Fi),Fi=setTimeout(function(){U(!1)},Li)}function W(){clearTimeout(Fi),ui===!1&&(Fi=setTimeout(function(){U(!1)},Li))}function j(t){var i=null;switch(typeof t){case"number":i=new Date(ai,oi-1,ri),i.setDate(i.getDate()+t);break;default:t instanceof Date==!0&&(i=t)}i instanceof Date&&(oi=parseInt(i.getMonth()+1),ri=parseInt(i.getDate()),ai=parseInt(i.getFullYear()),M(),window.location.replace(D("")))}var B,G=(t("zepto"),t("async")),q=t("famous/core/Engine"),X=t("famous/views/RenderController"),Y=t("utils/inkabinkaUtils"),Z=t("utils/auth"),Q=t("splash/splashView"),J=t("menu/menuView"),K=t("articles/articlesView"),ti=t("user/loginView"),ii=t("user/shareView"),ei=t("reader/readerView"),ni=t("reader/acceptView"),si=(t("famous/utilities/Timer"),new Date),oi=0,ri=0,ai=0,hi=!1,ui=!1,li=!1,ci=window.innerWidth,pi=window.innerHeight,di=pi>ci?"portrait":"landscape",fi="portrait"===di?"p":"l",mi=null,gi=null,vi=null,yi="",_i=0,wi=0,Si=null,bi=[],xi=!0,Ii=!0,Ti=3,Mi=[],zi=[],Oi=[],Ci="",Ei=null,Pi=null,Ai=null,Hi=null,Di=[],ki=!1,Ni=[],Fi=null,Li=18e5,Vi="",Ri=!1,Ui=q.createContext(),Wi=new X({outTransition:!1}),ji=new Q,Bi=new J,Gi=new ti({zIndex:4e3}),qi=new ii({zIndex:4e3}),Xi=new ni({});Ui.add(Wi),q.on("resize",d),q.on("orientationchange",d),q.on("loadStoryline",function(t){w(t.storylineID,t.storyID)}.bind(this)),q.on("changeDate",function(t){j(t)}.bind(this)),q.on("_initApp",i.bind(this)),Bi.on("topic",function(t){r(t.smartTopicID)}),Gi.on("close",function(){Ci="",Ei=null,c()}),qi.on("close",function(t){t.continueToShare===!1&&"reader"!==Ci&&(Ci="",Ei=null),c()}),Xi.on("acceptYes",function(){null!=Ei?u(Ei):(Ci="",Ei=null,c())}),Xi.on("acceptNo",function(){Ci="article",c()}),Z.authEventHandlers(function(){F(function(){c()})},function(){N()}),i()}),i(["main"])}();